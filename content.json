{"meta":{"title":"Secret Garden","subtitle":"","description":"","author":"tsunamiGG","url":"https://tsunamiGG.github.io","root":"/"},"pages":[{"title":"æ‰€æœ‰åˆ†ç±»","date":"2020-05-17T13:00:41.486Z","updated":"2020-05-17T13:00:41.486Z","comments":true,"path":"categories/index.html","permalink":"https://tsunamigg.github.io/categories/index.html","excerpt":"","text":"javascript"},{"title":"å…³äº","date":"2020-05-17T12:59:07.730Z","updated":"2020-05-17T12:59:07.730Z","comments":true,"path":"about/index.html","permalink":"https://tsunamigg.github.io/about/index.html","excerpt":"","text":"å ä¸ªä½å­"},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2020-05-17T13:01:21.307Z","updated":"2020-05-17T13:01:21.307Z","comments":true,"path":"tags/index.html","permalink":"https://tsunamigg.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"chromeè°ƒè¯•éªšæ“ä½œ","slug":"Chrome-debugging-ways","date":"2020-05-28T14:26:20.000Z","updated":"2020-05-28T14:29:19.762Z","comments":true,"path":"2020/05/28/Chrome-debugging-ways/","link":"","permalink":"https://tsunamigg.github.io/2020/05/28/Chrome-debugging-ways/","excerpt":"è§£é”chromeè°ƒè¯•é»‘ç§‘æŠ€","text":"è§£é”chromeè°ƒè¯•é»‘ç§‘æŠ€ chromeè°ƒè¯•éªšæ“ä½œ é€šç”¨ç¯‡(Windows) åˆ‡æ¢DevToolsçª—å£çš„å¸ƒå±€ï¼ˆä¸‹å³ï¼‰ Ctrl + Shift + D åˆ‡æ¢DevToolsé€‰é¡¹å¡ (Element-NetWork-Audits) Ctrl + [ æˆ– ]ï¼š å‘å·¦å’Œå‘å³ Ctrl + 1 åˆ° 9ï¼šDevTools&gt;Settings&gt;Preferences&gt;Appearanceä¸­æ‰“å¼€ (å¼€å¯ä¹‹åï¼Œæµè§ˆå™¨ç½‘é¡µé€‰é¡¹å¡ä¹Ÿå¯ä»¥åˆ‡æ¢) Stylesæ•°å€¼è°ƒæ•´ Alt +ä¸Šä¸‹ç®­å¤´ 0.1 ä¸Šä¸‹ç®­å¤´ 1 Shfit+ä¸Šä¸‹ç®­å¤´ 10 Ctrl +ä¸Šä¸‹ç®­å¤´ 100 elementsï¼Œlogsï¼Œ sources &amp; network çš†å¯ä½¿ç”¨ Ctrl+F Elementä¸­çš„HTMLå¯ä»¥ç›´æ¥Ctrl+Cä¿å­˜ copy(å…¨å±€å¯¹è±¡æˆ–è€…DOM or ä¸€äº›å¤ªé•¿çš„å¯¹è±¡)ï¼Œå¯ç›´æ¥å¤åˆ¶åˆ°ç¼–è¾‘å™¨ä¸­æŸ¥çœ‹ã€‚ 12345678&#x2F;&#x2F; consoleæ¿å—window ....blabllablacopy(window)Ctrl+V debugger è¶Šè¿‡ä¸‹ä¸€ä¸ªå‡½æ•°è°ƒç”¨ : F10ã€Ctrl + â€˜ ; è¿›å…¥ä¸‹ä¸€ä¸ªå‡½æ•°è°ƒç”¨ : F11ã€Ctrl + ; è·³å‡ºå½“å‰å‡½æ•° : Shift + F11ã€Ctrl + Shift + ; åˆ‡æ¢æ–­ç‚¹æ¡ä»¶: ç‚¹å‡»è¡Œå·ã€Ctrl + B; åªåˆ—ä¸¾å‡ºæ¥æˆ‘è®¤ä¸ºå¾ˆå¸¸ç”¨çš„ï¼Œè¯¦è§ï¼š https://developers.google.com/web/tools/chrome-devtools/shortcuts Commandç¯‡ æ‰“å¼€devtools, [Ctrl] + [Shift] + [P] (Macï¼š [âŒ˜] + [Shift]+ [P] ) ,ä¼šè¿›å…¥è¿™æ ·çš„ç•Œé¢ã€‚ æˆªå±æ–¹å¼ æ²¡é”™ï¼Œæœ‰å¥½å‡ ç§æˆªå±çš„æ–¹å¼ï¼Œä½†å¾®ä¿¡æˆªå›¾ä»–ä¸é¦™å—ï¼Ÿ ä¸ä¸ä¸ï¼Œç¬¬ä¸‰æ–¹å·¥å…·åªèƒ½æˆªæ»¡ä½ çš„å±å¹•å°ºå¯¸å¤§å°ï¼Œæ¯”å¦‚ï¼šwebé•¿åº¦å¤§äº1080ï¼Œè€Œä½ è¦çœ‹åˆ°æ‰€æœ‰çš„element? é€‰æ‹©ä¸Šå›¾ä¸­çš„ï¼š full size å³å¯ã€‚ é•¿å›¾ç¤ºä¾‹é¢„è­¦: åˆ‡æ¢ä¸»é¢˜ å½“ä½ åœ¨æ™šä¸Šå·¥ä½œï¼Œè®¨åŒç™½é—ªé—ªçš„devtools,Commondè¾“å…¥ï¼š themeã€‚ é‡Œé¢è¿˜æœ‰å¾ˆå¤šå¾ˆå¤šåŠŸèƒ½~ æ¨¡å—å¦‚ä¸‹ï¼š Snippets ä½äºSourcesæ¨¡å—çš„ï¼Œå¾ˆå¸¸ç”¨çš„é™¤äº†pageæ¥çœ‹ä¸€äº›errå’Œæºç ã€‚è¿˜æœ‰ä¸€ä¸ªsnippetsä¹Ÿå¾ˆå®ç”¨ã€‚ 1.æ–°å»ºä»£ç å— 2.æ‰§è¡Œ(!+ä»£ç å—åºå·) è¿™æ ·å°±å¯ä»¥è¾“å‡ºå¯¹åº”ä»£ç å—çš„ç»“æœå•¦ã€‚ å¯ä»¥ç†è§£ä¸ºç»™ä½ å¼€äº†ä¸ªæ²™ç®±ï¼Œæ‰€ä»¥ä½ å¯ä»¥å¼•å…¥å…¶ä»–æ¥æºä»£ç å—æ¥æ‰§è¡Œã€‚ æµ‹è¯•è¯æ˜ï¼Œæ¸…cookie ï¼Œæ¸…ç¼“å­˜ï¼Œå…³é—­æµè§ˆå™¨éƒ½ä¸ä¼šå¯¼è‡´snippetsä¸¢å¤±ï¼Œè€Œä¸”æ˜¯è·¨åŸŸåå…¨å±€å¯ç”¨ï¼Œåº”è¯¥æ˜¯å¼ºå­˜å‚¨äºæµè§ˆå™¨ä¸Šçš„ ã€‚æœ‰ç‚¹ç¡¬~ Date: 2020/2/28 Consoleæ¨¡å—ç¯‡ $ç¬¦å· 1.è°ƒè¯•çš„è¿‡ç¨‹ä¸­ï¼Œä½ ç»å¸¸ä¼šé€šè¿‡æ‰“å°æŸ¥çœ‹ä¸€äº›å˜é‡çš„å€¼ï¼Œä½†å¦‚æœä½ æƒ³çœ‹ä¸€ä¸‹ä¸Šæ¬¡æ‰§è¡Œçš„ç»“æœå‘¢ï¼Ÿå†è¾“ä¸€éè¡¨è¾¾å¼å—ï¼Ÿ è¿™æ—¶å€™ $_ å°±æ´¾ä¸Šäº†ç”¨åœºï¼Œ$_ æ˜¯å¯¹ä¸Šæ¬¡æ‰§è¡Œçš„ç»“æœçš„ å¼•ç”¨ ï¼š $ å˜é‡åœ¨ console ä¸­å°±æ˜¯å¯¹è¿™ä¸€å¤§ä¸²å‡½æ•° document.querySelector çš„åˆ«åã€‚ $$å˜é‡æ‰§è¡Œ document.QuerySelectorAll å¹¶ä¸”å®ƒè¿”å›çš„æ˜¯ï¼šä¸€ä¸ªèŠ‚ç‚¹çš„ æ•°ç»„ ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª Node list ä¾‹å¦‚ï¼šArray.from(document.querySelectorAll(&#39;div&#39;)) === $$(&#39;div&#39;) ã€‚ æŸ¥æ‰¾Nodeå¯æ¯”å¯¹ç€Elementçœ‹å¼ºå¤ªå¤šå•¦ï¼ ç»“åˆèµ·æ¥å°±æœ‰ä¸€ä¸ªå¾ˆå¦™çš„cssè°ƒè¯•æ³•~ 12// Consoleè¾“å…¥ï¼$$('*').forEach(item=&gt;&#123;item.style.outline='1px solid red'&#125;) æ•ˆæœå¦‚ä¸‹ï¼š custom formatter è‡ªå®šä¹‰æ ¼å¼è½¬æ¢å™¨ æˆ‘ä»¬ä¹ æƒ¯ä½¿ç”¨ DevTools çš„ console é»˜è®¤å¯¹ object çš„è½¬æ¢(ä¾‹å¦‚ä¸Šå›¾)ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬æƒ³ç”¨ä¸ä¼—ä¸åŒçš„æ–¹å¼æ¥å¤„ç†ã€‚ é‚£æˆ‘ä»¬å°±å¯ä»¥è‡ªå®šä¹‰è¾“å‡ºå¯¹è±¡çš„å‡½æ•° custom formatter~ å…·ä½“çš„å®˜ç½‘ä»‹ç»åœ¨è¿™é‡Œï¼š https://docs.google.com/document/d/1FTascZXT9cxfetuPRT2eXPQKXui4nWFivUnS_335T3U/preview å¼€å¯æ–¹æ³•ï¼šæ‰“å¼€devtools,æŒ‰ä¸‹F1ã€‚å‹¾é€‰å¦‚ä¸‹~ formatterï¼š å®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä¸‰ä¸ªæ–¹æ³•ï¼š header : å¤„ç†å¦‚ä½•å±•ç¤ºåœ¨ console çš„æ—¥å¿—ä¸­çš„ä¸»è¦éƒ¨åˆ†ã€‚ hasbody : å¦‚æœä½ æƒ³æ˜¾ç¤ºä¸€ä¸ªç”¨æ¥å±•å¼€å¯¹è±¡çš„ â–¶ ç®­å¤´ï¼Œè¿”å› true body : å®šä¹‰å°†ä¼šè¢«æ˜¾ç¤ºåœ¨å±•å¼€éƒ¨åˆ†çš„å†…å®¹ä¸­ã€‚ 12345678window.devtoolsFormatters = [&#123; header: function(obj)&#123; return [\"div\", &#123;&#125;, obj.toString()] &#125;, hasBody: function()&#123; return false; &#125;&#125;] å…¶ä¸­header æ–¹æ³•è¿”å›äº†ä¸€ä¸ª JsonML (æ³¨ï¼š JsonML : JSON Markup Language - JSON æ ‡è®°è¯­è¨€) æ•°ç»„ï¼Œç”±è¿™äº›ç»„æˆï¼š æ ‡ç­¾å å±æ€§å¯¹è±¡ å†…å®¹ (æ–‡æœ¬å€¼æˆ–è€…å…¶ä»–å…ƒç´ ) è®©æˆ‘ä»¬çœ‹çœ‹å‘ç”Ÿäº†ä»€ä¹ˆï¼š amazing ç°æœ‰å¥½å‡ ç§ custom formatter å¯ä¾›é€‰æ‹©ï¼Œä¾‹å¦‚ï¼šä½ å¯ä»¥åœ¨è¿™ä¸ª immutable-devtools ä»“åº“ä¸­æ‰¾åˆ°å¯¹äº Immutable.js ç»“æ„çš„å®Œç¾å±•ç¤ºã€‚ä½†ä½ åŒæ ·å¯ä»¥è‡ªå·±é€ ä¸€ä¸ªã€‚ å¦‚æœä½ é‡åˆ°ç»“æ„ä¸å¯»å¸¸çš„å¯¹è±¡æ—¶ï¼Œæˆ–å¤§é‡çš„æ—¥å¿—(æœ€å¥½é¿å…è¿™æ ·çš„æƒ…å†µï¼Œä½†æ˜¯æœ‰æ—¶å€™å¾ˆæœ‰ç”¨)è€Œä½ æƒ³ä»ä¸­åšåŒºåˆ†æ—¶ï¼Œä½ å¯ä»¥é‡‡ç”¨ custom formatter æ¥å¤„ç†ã€‚ ä¸€ä¸ªå¾ˆå®ç”¨çš„çªé—¨ï¼šç›´æ¥å°†ä½ ä¸å…³å¿ƒï¼Œä¸éœ€è¦åŒºåˆ«å¯¹å¾…çš„å¯¹è±¡è¿‡æ»¤å‡ºæ¥ï¼Œç›´æ¥åœ¨ header æ–¹æ³•é‡Œé¢ return nullã€‚è®© DevTools ä½¿ç”¨é»˜è®¤çš„æ ¼å¼åŒ–æ–¹å¼æ¥å¤„ç†è¿™äº›å€¼ã€‚ è®©æˆ‘ä»¬æ¥æ‰¾ç‚¹ä¹å­ï¼Œè®©å¼€è®©å¼€ï¼Œæˆ‘è¦è£…é€¼å•¦ï¼ 12345678910111213141516171819202122232425262728293031window.devtoolsFormatters = [&#123; header: function(obj)&#123; if (!obj.__clown) &#123; return null; &#125; delete obj.__clown; const style = ` color: red; border: dotted 2px gray; border-radius: 4px; padding: 5px; `; const content = `ğŸ¤¡ $&#123;JSON.stringify(obj, null, 2)&#125;`; try &#123; return ['div', &#123;style&#125;, content] &#125; catch (err) &#123; // for circular structures return null; // use the default formatter &#125; &#125;, hasBody: function()&#123; return false; &#125;&#125;]console.clown = function (obj) &#123; console.log(&#123;...obj, __clown: true&#125;);&#125;console.log(&#123;message: 'hello!'&#125;); // normal logconsole.clown(&#123;message: 'hello!'&#125;); // a silly log å¯ä»¥åœ¨massageé‡Œé¢åŠ å…¥ä¸€ä¸ªemojiè¡¨æƒ…ã€‚å½“ç„¶ï¼Œ**ä»–çš„å®é™…ä½œç”¨æ˜¯tagï¼Œå¯ä»¥é€šè¿‡ä¸åŒçš„tagæ¥è¡¨ç¤ºä¸åŒçš„é¡¹ç›®ï¼Œä¾¿äºåŒºåˆ†~","categories":[],"tags":[{"name":"browser","slug":"browser","permalink":"https://tsunamigg.github.io/tags/browser/"}]},{"title":"èµ°å¥½ä¸‹ä¸€æ­¥","slug":"reload","date":"2020-05-23T14:48:07.000Z","updated":"2020-05-23T14:52:29.238Z","comments":true,"path":"2020/05/23/reload/","link":"","permalink":"https://tsunamigg.github.io/2020/05/23/reload/","excerpt":"æŠ›ä¸‹è¿‡å»ï¼Œèµ°å‘æœªæ¥ï¼Œæˆå°±è‡ªå·±","text":"æŠ›ä¸‹è¿‡å»ï¼Œèµ°å‘æœªæ¥ï¼Œæˆå°±è‡ªå·± å‰è¨€å¤§ä¸‰ä¸‹å­¦æœŸï¼Œè§‰å¾—è‡ªå·±ä¸èƒ½å°±æ­¤æ²‰æ²¦ã€‚æƒ³ç€è‡ªå·±å¥½æ­¹ç®—ä¸ªè®¡ç®—æœºæ²¾è¾¹çš„ä¸“ä¸šï¼Œå»æ‰¾ä¸€ä»½ç¼–ç¨‹ç›¸å…³çš„å·¥ä½œï¼Œåº”è¯¥è¿˜æ˜¯æœ‰æå¤´çš„ã€‚ åœ¨å›¾ä¹¦é¦†çœ‹åˆ°ä¸€æœ¬ã€Šwebå·¥ç¨‹å¸ˆçš„è‡ªæˆ‘ä¿®å…»ã€‹ï¼Œå¿ƒé‡Œæ³¢æ¾œèµ·ä¼ã€‚äºæ˜¯ï¼Œå°±åœ¨å‰ç«¯çš„è·¯ä¸Šä¸€å»ä¸å¤è¿”~ æŠ˜æˆŸå®ä¹ å»äº†ä¸€å®¶é«˜æ­ŒçŒ›è¿›ï¼Œç–¯ç‹‚å¢é•¿çš„ç°å·²ä¸Šå¸‚çš„åœ¨çº¿æ•™è‚²å…¬å¸ï¼Œå½“æˆ‘æ»¡æ€€æ†§æ†¬ï¼Œå‡†å¤‡å¤§å¹²ä¸€åœºï¼Œç°å®å´ç»™æˆ‘æ¥äº†ä¸€è®°ç‹ ç‹ çš„patchã€‚ å¯¹äºæ²¡æœ‰ä»»ä½•é¡¹ç›®ç»éªŒï¼Œåªå­¦äº†ä¿©ä¸ªæœˆåŸºç¡€çš„æˆ‘æ¥è¯´ï¼›æ¯å¤©é†é†çŒé¡¶ï¼Œå¾ˆå¤šäº‹æƒ…å¹¶æ²¡æœ‰åšåˆ°è‡ªå·±èƒ½åšåˆ°çš„æœ€å¥½ï¼Œæ›´å¤šçš„å¤±è¯¯ï¼Œè„‘å­çŠ¯æµ‘ï¼Œç»™å†³å®šæˆ‘å®ä¹ æ˜¯å¦é€šè¿‡çš„å¸ˆå‚…ç•™ä¸‹äº†èƒ½åŠ›ä¸è¶³çš„å°è±¡ã€‚ ä»æœªæƒ³è¿‡ä¼šæœ‰è¿™æ ·çš„ç»“æœï¼Œæ¯å¤©ç¡ä¸ç€ï¼Œå¾ˆå¤šå°±æ¥åˆ°å·¥ä½å­¦ä¹ çŸ¥é“æ™šä¸Š9ç‚¹ï¼Œä¸å¤§å®¶ä¸€èµ·å¼€æ—©ä¼šï¼Œå®Œæˆå‡ ä¸ªç®€å•çš„ä»»åŠ¡ï¼Œä¸€èµ·æä¹æ±¤å›¢å»ºï¼Œå‚åŠ å¹´ä¼šâ€¦. å¯¹æˆ‘çš„æ‰“å‡»æ˜¯å·¨å¤§çš„ï¼Œå¬ç€HRBPå®‰æ…°çš„è¯­éŸ³ï¼Œæ€ç»ªç¿»æ¶Œã€‚æˆ‘ç”šè‡³å¼€å§‹æ€€ç–‘è‡ªå·±çœŸæ­£æ˜¯å¦èƒ½å¤Ÿèƒœä»»è¿™ä»½å·¥ä½œï¼Œæˆ‘æ˜¯ä¸æ˜¯åº”è¯¥å¬çˆ¸å¦ˆçš„è¯ï¼Œå›å»å°å¿åŸå»è€ƒå…¬åŠ¡å‘˜â€¦.å„ç§æ€€ç–‘ï¼Œä¸è‡ªä¿¡çš„è´Ÿé¢æƒ…ç»ªå°±åƒæ½®æ±ä¸€èˆ¬ï¼Œæƒ³è¦æ¨å¾—è¶Šè¿œï¼Œå´å¼¹å›æ¥è¶Šè¿œã€‚æˆ‘çŸ¥é“ï¼Œæˆ‘å¤±å»äº†è¿™è¾ˆå­æœ€é‡è¦çš„ç¬¬äºŒæ¬¡æœºä¼šã€‚ é‡å¯ï¼Ÿæ”¹å˜ï¼Ÿåœ¨é¢“åºŸ2ä¸ªæœˆåï¼Œæˆ¿ç§Ÿï¼Œç”µè´¹ï¼Œç‡ƒæ°”è´¹ï¼Œä¸€æ¡æ¡çŸ­ä¿¡æé†’ç€æˆ‘ï¼Œä¸èƒ½å†è¿™æ ·ä¸‹å»äº†ã€‚ äºæ˜¯é™ä½è‡ªå·±çš„è¦æ±‚ï¼Œåœ¨æ­¦æ±‰è¿™æ ·ä¸€ä¸ªå¤§ç¯å¢ƒéƒ½æ˜¯å¤–åŒ…çš„æ¡ä»¶ä¸‹ï¼ŒåŒ†åŒ†å°±ç­¾äº†ä¸€ä¸ª40äººï¼Œåªæœ‰1ä¸ªå‰ç«¯çš„ç§‘æŠ€å…¬å¸â€¦. å—¯ï¼Œæ˜¯çš„ï¼Œå¯¹äºç°çŠ¶éå¸¸ä¸æ»¡æ„ã€‚æ¯å¤©å†™ç€ä¸å¤ªæ„Ÿå…´è¶£çš„ä¸šåŠ¡ï¼Œæ”¹ç€ç¨€çƒ‚çš„ä»£ç ã€‚ å¦‚æœéè¦è¯´è¿›æ­¥ï¼Œé‚£å¤§æ¦‚æ˜¯ç£¨å¹³äº†æ£±è§’ï¼Œåˆ·æ–°äº†å¯¹å®¢æˆ·çš„è®¤çŸ¥ï¼Œç†Ÿæ‚‰äº†å¾®ä¿¡è¿™æ ·ç¨€çƒ‚çš„å¼€å‘ç¯å¢ƒâ€¦ æˆ‘ä»ç„¶æ²¡æœ‰æ”¾å¼ƒï¼ŒåŠªåŠ›åœ¨å·¥ä½œç©ºä½™æ—¶é—´ï¼Œå»çœ‹ç‚¹ä¸œè¥¿ï¼Œä½†å°±åƒä¸€åªæ— å¤´è‹è‡ä¸€èˆ¬ï¼Œä¹±æ’ã€‚ ç€å­¦ä¹ çš„äº‹æƒ…ä¸èƒ½ä¸€è¹´è€Œå°±ï¼Œå¾—æŒä¹‹ä»¥æ’ï¼Œç³»ç»Ÿçš„å­¦ã€‚å°±ä»çº¢å®ä¹¦å¼€å§‹ï¼Œé‡å­¦åŸºç¡€ï¼Œç„¶åå°±å»è‚¯Vueæºç ã€‚ç°åœ¨å¯¹Vue2.xçš„åŒå‘ç»‘å®šï¼Œè™šæ‹ŸDOMï¼Œæ¨¡æ¿ç¼–è¯‘éƒ½æœ‰ä¸€å®šç†è§£ï¼Œæºç ä¸­æ²¡æœ‰ç§˜å¯†ã€‚ å¦‚æœè¿·èŒ«äº†å°±å¼€å§‹åˆ¶å®šè®¡åˆ’å§è¿·èŒ«æ¥è‡ªäºä¸‹æ—¶ä»£5Gçš„æµªæ½®ï¼Œæ¯æ¬¡é€šä¿¡é©å‘½éƒ½è®©äººä»¬çš„ç”Ÿæ´»å‘ç”Ÿç¿»å¤©è¦†åœ°çš„å˜åŒ–..è¿™æ¬¡ä¹Ÿæ¯«ä¸ä¾‹å¤–ã€‚æ˜¯ç»§ç»­åœ¨æœ¬å°±è¿‡é¥±å’Œçš„äº’è”ç½‘ç»§ç»­æŒ£æ‰è¿˜æ˜¯å»æŠŠæ¡ä½æ–°çš„é£å£æœºä¼šï¼Ÿä½†ç›¸ä¿¡è‡ªå·±çš„æ¡ä»¶ï¼Œå¹¶æ²¡æœ‰æœºä¼šå»æŠ“ä½æ–°é£å£ï¼Œåªèƒ½ç»§ç»­å‰è¿›ï¼Œä½†ç´§è·Ÿå˜åŒ–å‘å±•ï¼Œå‘æŒ¥è‡ªå·±çš„æ´å¯ŸåŠ›ï¼Œæ‰¾åˆ°åˆé€‚çš„æœºä¼šï¼ åˆšæ¯•ä¸šå¿«ä¸€å¹´ï¼Œæƒ³ç€ç»™è‡ªå·±å®šä¸€ä¸ªç›®æ ‡ã€‚ æ¯•ä¸š3å¹´å†…ï¼Œåœ¨æ­¦æ±‰å·¥èµ„è¿‡ä¸‡æˆ–è€…è¿›å…¥ä¸€å®¶å¿ƒé‡Œæ»¡æ„çš„å…¬å¸ã€‚å¯¹å‰ç«¯çš„æŠ€èƒ½å¾ˆç†Ÿç»ƒï¼Œå¯ä»¥ç‹¬è‡ªè§£å†³ä¸šåŠ¡éš¾ç‚¹ï¼Œå…»æˆè‰¯å¥½ç¼–ç ä¹ æƒ¯ã€‚ç†Ÿç»ƒVueä¸reactï¼Œå•ƒå®ŒVue2.x,3.xæºç ï¼›æ·±å…¥ä½¿ç”¨canvasæˆ–è€…è¿›å‡»æ•°æ®å¯è§†åŒ–ç­‰ç­‰æœ‰æ·±åº¦çš„é¢†åŸŸã€‚ èƒ½å¤Ÿå†™pyæˆ–è€…å…¶ä»–åç«¯è¯­è¨€ï¼Œå»æ¡èµ·SQLï¼Œç¢°ç¢°æœåŠ¡ç«¯çš„æ•°æ®åº“ï¼ŒæœåŠ¡å™¨ç­‰ç­‰ã€‚ ä»Šå¹´ï¼Œä¸€å®šè¦è·³æ§½ï¼ å†²é¸­ï¼","categories":[],"tags":[{"name":"diary","slug":"diary","permalink":"https://tsunamigg.github.io/tags/diary/"}]},{"title":"Vue-source-learn1","slug":"Vue-source-learn1","date":"2020-05-22T02:37:35.963Z","updated":"2020-05-28T14:18:39.927Z","comments":true,"path":"2020/05/22/Vue-source-learn1/","link":"","permalink":"https://tsunamigg.github.io/2020/05/22/Vue-source-learn1/","excerpt":"title: vueæºç å­¦ä¹ ï¼ˆå¼€ç¯‡ï¼‰date: 2020-05-10 10:37:35tags: Vue-2.6X-source-learn notes åº”è¯¥å¦‚ä½•å­¦ä¹ æºç ï¼Ÿ æˆ‘è§‰å¾—æœ€å¼€å§‹æœ‰ä¸ªå…¨å±€è§‚ï¼Œç„¶ååˆ‡å…¥ç»†èŠ‚çš„æ¨¡å—ï¼Œå¸¦ç€é—®é¢˜å»è¯»ã€‚","text":"title: vueæºç å­¦ä¹ ï¼ˆå¼€ç¯‡ï¼‰date: 2020-05-10 10:37:35tags: Vue-2.6X-source-learn notes åº”è¯¥å¦‚ä½•å­¦ä¹ æºç ï¼Ÿ æˆ‘è§‰å¾—æœ€å¼€å§‹æœ‰ä¸ªå…¨å±€è§‚ï¼Œç„¶ååˆ‡å…¥ç»†èŠ‚çš„æ¨¡å—ï¼Œå¸¦ç€é—®é¢˜å»è¯»ã€‚ vueæºç å­¦ä¹ ç¬”è®° æœ¬ç¯‡ç»“åˆäº†é˜…è¯» https://nlrx-wjc.github.io/Learn-Vue-Source-Code/ çš„ç¬”è®°ï¼Œæ„Ÿè°¢wjc199366(wx)å¼€æºã€‚ ç°åœ¨åº”è¯¥çœ‹ä¸äº†äº†ï¼Œå› ä¸ºå‘ç”Ÿäº†ä¸€äº›äº‹æƒ…ï¼Œå¤§æ¦‚æ˜¯äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾ä»¥å½±å“æ——ä¸‹ã€Šæ·±å…¥æµ…å‡ºVue.jsã€‹é”€é‡ä¸ºç”±ï¼Œè”ç³»å¾®è½¯ï¼Œå°†ç”µå­ä¹¦çš„ä»“åº“ç»™å…³äº†â€¦.. ä¸è¿‡å¥½åœ¨å…³é—­ä¹‹å‰ï¼Œç•™äº†ä¸€ä»½åœ¨æœ¬åœ°ï¼Œéœ€è¦çš„åŠ æˆ‘å¾®ä¿¡å–ï¼štangtang1996918 é˜…è¯»æºç ä¹‹å‰ï¼Œå»ºè®®å»çœ‹çœ‹HcySunYangå¤§ä½¬å¯¹vue2/3ä¸­ä¸€äº›é‡è¦æ¦‚å¿µçš„è§£è¯»ï¼š http://hcysun.me/vue-design/zh/essence-of-comp.html ä¾‹å¦‚ï¼šç»„ä»¶ä¼ å‡ºçš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼ŸVnodeæ˜¯å¦‚ä½•è®¾è®¡çš„ï¼ŸVnodeæ˜¯å¦‚ä½•æŒ‚è½½ä¸ºçœŸå®DOMçš„ï¼Ÿ å¯¹é˜…è¯»æºç ï¼Œç†æ¸…æ€è·¯æ˜¯éå¸¸æœ‰å¸®åŠ©çš„~ æºç ä¹‹ä¸­æ²¡æœ‰ç§˜å¯†~ 1.è·¯çº¿ å˜åŒ–ä¾¦æµ‹ç¯‡ å­¦ä¹ Vueä¸­å¦‚ä½•å®ç°æ•°æ®çš„å“åº”å¼ç³»ç»Ÿï¼Œä»è€Œè¾¾åˆ°æ•°æ®é©±åŠ¨è§†å›¾ã€‚ è™šæ‹ŸDOMç¯‡ å­¦ä¹ ä»€ä¹ˆæ˜¯è™šæ‹ŸDOMï¼Œä»¥åŠVueä¸­çš„DOM-DiffåŸç† æ¨¡æ¿ç¼–è¯‘ç¯‡ å­¦ä¹ Vueå†…éƒ¨æ˜¯æ€ä¹ˆæŠŠtemplateæ¨¡æ¿ç¼–è¯‘æˆè™šæ‹ŸDOM,ä»è€Œæ¸²æŸ“å‡ºçœŸå®DOM ç”Ÿå‘½å‘¨æœŸç¯‡ å­¦ä¹ Vueä¸­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå®ç°åŸç† å®ä¾‹æ–¹æ³•ç¯‡ å­¦ä¹ Vueä¸­æ‰€æœ‰å®ä¾‹æ–¹æ³•(å³æ‰€æœ‰ä»¥$å¼€å¤´çš„æ–¹æ³•)çš„å®ç°åŸç† å…¨å±€APIç¯‡ å­¦ä¹ Vueä¸­æ‰€æœ‰å…¨å±€APIçš„å®ç°åŸç† æŒ‡ä»¤ç¯‡ å­¦ä¹ Vueä¸­æ‰€æœ‰æŒ‡ä»¤çš„å®ç°åŸç† è¿‡æ»¤å™¨ç¯‡ å­¦ä¹ Vueä¸­æ‰€æœ‰è¿‡æ»¤å™¨çš„å®ç°åŸç† å†…ç½®ç»„ä»¶ç¯‡ å­¦ä¹ Vueä¸­å†…ç½®ç»„ä»¶çš„å®ç°åŸç† 2.æ–¹æ³•é¢å¯¹ç¹å¤çš„æºç ï¼Œæˆ‘ä»¬åº”è¯¥æ€ä¹ˆå»è¯»ï¼Ÿ è¯´ä¸‹é€‚åˆæˆ‘è‡ªå·±çš„è¯»æºç æ–¹æ³•ï¼ŒæŠ›ç –å¼•ç‰ã€‚ ä¸€æœ¬æ­£ç»çš„ä¸€è¡Œè¡Œçš„çœ‹æºç ï¼Œæˆ‘åªèƒ½è¯´å…„å¼Ÿï¼Œä½ ä»–å¨˜çš„çœŸæ˜¯ä¸ªå¤©æ‰ 1.ä¸€èˆ¬æˆ‘å…ˆæ‰«ä¸€çœ¼importå¼•å…¥çš„éƒ½æ˜¯é‚£äº›æ¨¡å—çš„jsæ–‡ä»¶ï¼Œä¸€èˆ¬æºç çš„ç›®å½•ç»“æ„éƒ½æ¸…æ™°ã€‚æ ¹æ®å¼•å…¥çš„jsæ–‡ä»¶å¤§æ¦‚éƒ½çœ‹å‡ºè¯¥jsæ–‡ä»¶çš„ä¾èµ–æ€§ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¾èµ–é¡¹çš„å¤šå°‘æ¥åˆ¤æ–­å¤æ‚ç¨‹åº¦ï¼Œæœ‰ä¸ªå¿ƒç†é¢„æœŸã€‚ 2.ç„¶åå»çœ‹jsæ–‡ä»¶ä¸»å‡½æ•°çš„è¾“å…¥å’Œè¾“å‡ºï¼Œå³ä¼ å‚å’Œè¿”å›éƒ½æ˜¯ä»€ä¹ˆï¼Œå…ˆææ¸…æ¥šå…¶ä¸»è¦åŠŸèƒ½ã€‚ å¯¹ã€‚ä¸æ˜¯ä¸€ä¸Šæ¥å°±ä¸€è¡Œè¡Œçš„çœ‹é€»è¾‘ä»£ç ï¼Œé™¤éä½ æœ‰è¶…å¼ºçš„ç†è§£èƒ½åŠ›ï¼Œä¸€èˆ¬æ˜¯å¾ˆåƒåŠ›çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å°±å…ˆå‡è£…è‡ªå·±æ˜¯ä¸ªdebugå·¥å…·ï¼Œå…ˆè®¾ç½®è·³è¿‡å…¨éƒ¨å‡½æ•°å†…éƒ¨ç»†èŠ‚ï¼Œåªè§‚å¯Ÿä¸»å‡½æ•°å’Œå„ä¸ªå†…éƒ¨å­å‡½æ•°çš„è¾“å…¥å’Œè¾“å‡ºã€‚(è¿™æœŸé—´è‚¯å®šå°‘ä¸äº†å»æŸ¥çœ‹ä¸Šä¸€éƒ¨å¼•å…¥çš„å‡½æ•°åŠŸèƒ½)ã€‚å¦‚æœç»“åˆæ³¨é‡Šçœ‹äº†å¾ˆå¤šè¾“å…¥è¾“å‡ºè¿˜æ˜¯ä¸æ˜ç™½å…¶ä½œç”¨ï¼Œé‚£ä¹Ÿå¾ˆæ­£å¸¸ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥å¤åˆ¶ä¸€ä¸‹ä»£ç ç‰‡æ®µï¼Œåšä¸€äº›æµ‹è¯•æ¥è¯å®éƒ¨åˆ†æˆ‘ä»¬å¯¹æŸäº›å‡½æ•°åŠŸèƒ½çš„çŒœæƒ³ã€‚æœ‰äº†è¿™äº›ï¼Œæˆ‘ä»¬è„‘ä¸­å¤§å¤šéƒ½èƒ½æœ‰ä¸ªæ¡†æ¶ã€‚ å…¶å®è¿™è·Ÿè¯æ˜æ•°å­¦é¢˜çš„æ€è·¯ååˆ†ç±»ä¼¼ï¼Œå…ˆæå‡ºå‡è®¾ï¼Œç„¶åç”¨å„ç§å…¬ç†ï¼Œå®šç†æ¥æ…¢æ…¢æ¨å¯¼è¯æ˜ã€‚ 3.æ·±å…¥æ¯ä¸ªå‡½æ•°å†…éƒ¨çš„ç»†èŠ‚ã€‚è¿™ä¸ªå°±å…«ä»™è¿‡æµ·å„æ˜¾ç¥é€šäº†ã€‚ä¸è¿‡æˆ‘è§‰å¾—è¿˜å¯ä»¥å…ˆåšå‡æ³•ï¼Œå³æ ¹æ®æ³¨é‡Šè§£å†³å…¼å®¹æ€§å’Œä¸€äº›åˆ¤æ–­ç¯å¢ƒçš„hackå…ˆç»™å±è”½æ‰ï¼Œå…³æ³¨æ¯ä¸ªå‡½æ•°ä¸»è¦çš„é€»è¾‘ï¼Œç­‰æŠŠæ•´ä¸ªæ¨¡å—çš„è„‰ç»œå¼„æ¸…æ¥šåï¼Œæœ‰ç©ºå†å»çœ‹çœ‹å“ªäº›hackã€‚ç»†èŠ‚ä¸æ¸…æ¥šçš„åŒæ ·æµ‹è¯•ï¼Œç”¨ç»“æœå»é€†æ¨è¿‡ç¨‹ã€‚ 4.åšç¬”è®°ï¼Œè‡ªå·±å†™ä¸€éæ¢³ç†æ¸…æ¥šï¼ŒæŠŠä½ è§‰å¾—ä¸€äº›å¾ˆç²¾å¦™çš„æ€è·¯ï¼Œæœ‰è¶£çš„ç±»æ¯”è”æƒ³ï¼Œæ–¹æ³•æ€»ç»“ï¼Œéƒ½å¯ä»¥è®°å½•ä¸‹æ¥ å¤æ‚çš„ä¸œè¥¿éƒ½æ˜¯ç”±ç®€å•çš„ä¸œè¥¿æ„æˆï¼Œäººä»¬æ“…é•¿å°†ä¸œè¥¿å˜å¤æ‚ï¼Œå´ä¸æ“…é•¿å°†ä¸œè¥¿å˜ç®€å•ã€‚ 3.ç›®å½•ç»“æ„å¼ºçƒˆå»ºè®®æµè§ˆä¸€éï¼Œæºç ä¸­å¾ˆå¤šéƒ½æ˜¯å¤ç”¨çš„ï¼Œçºµè§‚å…¨å±€ï¼Œå†æŸäº›åˆ¤æ–­ä¸Šæ˜¯èƒ½å¤Ÿå¸®ä¸Šå¿™çš„~ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120srcâ”œâ”€ compilerâ”‚ â”œâ”€ codeframe.jsâ”‚ â”œâ”€ codegenâ”‚ â”‚ â”œâ”€ events.jsâ”‚ â”‚ â””â”€ index.jsâ”‚ â”œâ”€ create-compiler.jsâ”‚ â”œâ”€ directivesâ”‚ â”‚ â”œâ”€ bind.jsâ”‚ â”‚ â”œâ”€ index.jsâ”‚ â”‚ â”œâ”€ model.jsâ”‚ â”‚ â””â”€ on.jsâ”‚ â”œâ”€ error-detector.jsâ”‚ â”œâ”€ helpers.jsâ”‚ â”œâ”€ index.jsâ”‚ â”œâ”€ optimizer.jsâ”‚ â”œâ”€ parserâ”‚ â”‚ â”œâ”€ entity-decoder.jsâ”‚ â”‚ â”œâ”€ filter-parser.jsâ”‚ â”‚ â”œâ”€ html-parser.jsâ”‚ â”‚ â”œâ”€ index.jsâ”‚ â”‚ â””â”€ text-parser.jsâ”‚ â””â”€ to-function.jsâ”œâ”€ coreâ”‚ â”œâ”€ componentsâ”‚ â”‚ â”œâ”€ index.jsâ”‚ â”‚ â””â”€ keep-alive.jsâ”‚ â”œâ”€ config.jsâ”‚ â”œâ”€ global-apiâ”‚ â”‚ â”œâ”€ assets.jsâ”‚ â”‚ â”œâ”€ extend.jsâ”‚ â”‚ â”œâ”€ index.jsâ”‚ â”‚ â”œâ”€ mixin.jsâ”‚ â”‚ â””â”€ use.jsâ”‚ â”œâ”€ index.jsâ”‚ â”œâ”€ instanceâ”‚ â”‚ â”œâ”€ events.jsâ”‚ â”‚ â”œâ”€ index.jsâ”‚ â”‚ â”œâ”€ init.jsâ”‚ â”‚ â”œâ”€ inject.jsâ”‚ â”‚ â”œâ”€ lifecycle.jsâ”‚ â”‚ â”œâ”€ proxy.jsâ”‚ â”‚ â”œâ”€ render-helpersâ”‚ â”‚ â”œâ”€ render.jsâ”‚ â”‚ â””â”€ state.jsâ”‚ â”œâ”€ observerâ”‚ â”‚ â”œâ”€ array.jsâ”‚ â”‚ â”œâ”€ dep.jsâ”‚ â”‚ â”œâ”€ index.jsâ”‚ â”‚ â”œâ”€ scheduler.jsâ”‚ â”‚ â”œâ”€ traverse.jsâ”‚ â”‚ â””â”€ watcher.jsâ”‚ â”œâ”€ utilâ”‚ â”‚ â”œâ”€ debug.jsâ”‚ â”‚ â”œâ”€ env.jsâ”‚ â”‚ â”œâ”€ error.jsâ”‚ â”‚ â”œâ”€ index.jsâ”‚ â”‚ â”œâ”€ lang.jsâ”‚ â”‚ â”œâ”€ next-tick.jsâ”‚ â”‚ â”œâ”€ options.jsâ”‚ â”‚ â”œâ”€ perf.jsâ”‚ â”‚ â””â”€ props.jsâ”‚ â””â”€ vdomâ”‚ â”œâ”€ create-component.jsâ”‚ â”œâ”€ create-element.jsâ”‚ â”œâ”€ create-functional-component.jsâ”‚ â”œâ”€ helpersâ”‚ â”œâ”€ modulesâ”‚ â”œâ”€ patch.jsâ”‚ â””â”€ vnode.jsâ”œâ”€ platformsâ”‚ â”œâ”€ webâ”‚ â”‚ â”œâ”€ compilerâ”‚ â”‚ â”œâ”€ entry-compiler.jsâ”‚ â”‚ â”œâ”€ entry-runtime-with-compiler.jsâ”‚ â”‚ â”œâ”€ entry-runtime.jsâ”‚ â”‚ â”œâ”€ entry-server-basic-renderer.jsâ”‚ â”‚ â”œâ”€ entry-server-renderer.jsâ”‚ â”‚ â”œâ”€ runtimeâ”‚ â”‚ â”œâ”€ serverâ”‚ â”‚ â””â”€ utilâ”‚ â””â”€ weexâ”‚ â”œâ”€ compilerâ”‚ â”œâ”€ entry-compiler.jsâ”‚ â”œâ”€ entry-framework.jsâ”‚ â”œâ”€ entry-runtime-factory.jsâ”‚ â”œâ”€ runtimeâ”‚ â””â”€ utilâ”œâ”€ serverâ”‚ â”œâ”€ bundle-rendererâ”‚ â”‚ â”œâ”€ create-bundle-renderer.jsâ”‚ â”‚ â”œâ”€ create-bundle-runner.jsâ”‚ â”‚ â””â”€ source-map-support.jsâ”‚ â”œâ”€ create-basic-renderer.jsâ”‚ â”œâ”€ create-renderer.jsâ”‚ â”œâ”€ optimizing-compilerâ”‚ â”‚ â”œâ”€ codegen.jsâ”‚ â”‚ â”œâ”€ index.jsâ”‚ â”‚ â”œâ”€ modules.jsâ”‚ â”‚ â”œâ”€ optimizer.jsâ”‚ â”‚ â””â”€ runtime-helpers.jsâ”‚ â”œâ”€ render-context.jsâ”‚ â”œâ”€ render-stream.jsâ”‚ â”œâ”€ render.jsâ”‚ â”œâ”€ template-rendererâ”‚ â”‚ â”œâ”€ create-async-file-mapper.jsâ”‚ â”‚ â”œâ”€ index.jsâ”‚ â”‚ â”œâ”€ parse-template.jsâ”‚ â”‚ â””â”€ template-stream.jsâ”‚ â”œâ”€ util.jsâ”‚ â”œâ”€ webpack-pluginâ”‚ â”‚ â”œâ”€ client.jsâ”‚ â”‚ â”œâ”€ server.jsâ”‚ â”‚ â””â”€ util.jsâ”‚ â””â”€ write.jsâ”œâ”€ sfcâ”‚ â””â”€ parser.jsâ””â”€ shared â”œâ”€ constants.js â””â”€ util.js","categories":[],"tags":[]},{"title":"Vueçš„å˜åŒ–ä¾¦æµ‹","slug":"Vue-source-learn2","date":"2020-05-22T00:40:28.000Z","updated":"2020-05-28T14:18:34.374Z","comments":true,"path":"2020/05/22/Vue-source-learn2/","link":"","permalink":"https://tsunamigg.github.io/2020/05/22/Vue-source-learn2/","excerpt":"Vueçš„å“åº”å¼æ•°æ®æ˜¯å¦‚ä½•åšåˆ°çš„ï¼Ÿ","text":"Vueçš„å“åº”å¼æ•°æ®æ˜¯å¦‚ä½•åšåˆ°çš„ï¼Ÿ å˜åŒ–ä¾¦æµ‹ å˜åŒ–ä¾¦æµ‹ = æ•°æ®è§‚æµ‹+ä¾èµ–æ”¶é›†+ä¾èµ–æ›´æ–° ä½¿ç”¨Object.definePropertyæ¥ä½¿å¾—æ•°æ®å˜å¾—å¯â€œè§‚æµ‹â€ ä¾èµ–æ”¶é›†(Observer)ï¼šæ˜¯æŒ‡æ”¶é›†è§†å›¾é‡Œçš„éƒ¨åˆ†ä¸æ•°æ®ç»‘å®šçš„å…³ç³» åœ¨getterä¸­æ”¶é›†ä¾èµ–ï¼Œåœ¨setterä¸­é€šçŸ¥æ›´æ–°ä¾èµ– å…¸å‹çš„å‘å¸ƒ-è®¢é˜…æ¨¡å¼,ä¸ºäº†è§£è€¦ï¼Œæ–°å¢äº†ä¸€ä¸ªç®¡ç†å¯¹è±¡ dep(æ”¶é›†æŸä¸ªæ•°æ®ç›¸å…³çš„æ‰€æœ‰ä¾èµ–)ï¼Œwatcher(è¢«depé€šçŸ¥ï¼Œæ›´æ–°ä¾èµ–) 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950// observer.js// æ”¶é›†ä¾èµ–const Dep = require('./dep');export class Observer &#123; constructor(value) &#123; this.value = value; def(value, \"__ob__\", this); if (Array.isArray(value)) &#123; console.log(\"array\"); &#125; else &#123; this.walk(value); &#125; &#125; walk(obj) &#123; const keys = Object.keys(obj); for (let i = 0; i &lt; keys.length; i++) &#123; defineReactive(obj,keys[i]); &#125; &#125;&#125;function defineReactive(obj, key, val) &#123; if (arguments.length === 2) &#123; val = obj[key]; &#125; if (typeof val === 'object') &#123; new Observer(val); &#125; const dep = new Dep(); Object.defineProperty(obj, key, &#123; enumerable: true, configurable: true, get() &#123; dep.depend(); return val; &#125;, set(newval) &#123; if (val === newval) return; val = newval; dep.notify(); &#125; &#125;)&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142// dep.js// ä¾èµ–ç®¡ç†å™¨ï¼š 1æ•°æ® ï¼šnä¾èµ– çš„ä¸€å¯¹å¤šå…³ç³»è¿›è¡Œä¾èµ–ç®¡ç†ï¼Œæ”¶é›†æŸä¸ªæ•°æ®ç›¸å…³çš„æ‰€æœ‰ä¾èµ–export default class Dep &#123; constructor() &#123; this.subs = []; &#125; addSub(sub) &#123; this.subs.push(sub); &#125; removeSub(sub) &#123; remove(this.subs, sub); &#125; depend() &#123; window.target &amp;&amp; this.addSub(window.target); &#125; notify() &#123; const subs = this.subs.slice(); for (let i = 0; i &lt; subs.length; i++) &#123; subs[i].update(); &#125; &#125;&#125;export function remove(arr, item) &#123; if (arr.length &gt; 1) &#123; const itemIndex = arr.indexOf(item); if (itemIndex &gt; 1) &#123; return arr.splice(itemIndex, 1); &#125; &#125; &#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354// watcher.js// watcherè¡¨ç¤ºä¾èµ–å…³ç³»ï¼Œé€šçŸ¥è§†å›¾æ›´æ–°// window.targetæ˜¯ä¸ºäº†æ‹·è´ä¸€ä»½ watcher,æ·»åŠ åˆ°Depçš„ä¾èµ–æ•°ç»„ä¸­export default class Watcher &#123; constructor(vm, expOrFn, cb) &#123; this.vm = vm; this.cb = cb; this.getter = parsePath(expOrFn); this.value = this.get(); &#125; get() &#123; window.target = this; const vm = this.vm; let value = this.getter.call(vm, vm); window.target = undefined; return value; &#125; update() &#123; const oldValue = this.value; this.value = this.get(); this.cb.call(this.vm, this.value, oldValue); &#125;&#125;/** * æŠŠä¸€ä¸ªå½¢å¦‚'data.a.b.c'çš„å­—ç¬¦ä¸²è·¯å¾„æ‰€è¡¨ç¤ºçš„å€¼ï¼Œä»çœŸå®çš„dataå¯¹è±¡ä¸­å–å‡ºæ¥ * ä¾‹å¦‚ï¼š * data = &#123;a:&#123;b:&#123;c:2&#125;&#125;&#125; * parsePath('a.b.c')(data) // 2 */const bailRE = /[^\\w.$]/;export function parsePath(path) &#123; if (bailRE.test(path)) return; const segements = path.split('.'); return function (obj) &#123; for (let i = 0; i &lt; segements.length; i++) &#123; if (!obj) return; obj = obj[segements[i]]; &#125; return obj; &#125;&#125; ä¾¦æµ‹æµç¨‹ vueè¿™å¥—å˜åŒ–ä¾¦æµ‹çš„ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œå› ä¸ºåˆ©ç”¨definePropertyæ¥è¿›è¡Œæ”¶é›†ï¼Œåªé™äºè¯»å’Œå†™å·²æœ‰å€¼ï¼Œå½“æˆ‘ä»¬å¯¹objè¿›è¡Œæ–°å¢æˆ–è€…åˆ é™¤å±æ€§å€¼æ—¶ï¼Œå®ƒæ˜¯ç›‘å¬ä¸åˆ°çš„ã€‚æ‰€ä»¥åœ¨å®˜ç½‘æ–‡æ¡£ä¸Šçš„å™è¿°ä¸Šè¯´æ˜è¿‡ï¼Œå¯¹æ•°ç»„æˆ–å¯¹è±¡çš„ç›´æ¥å¢åŠ æˆ–è€…åˆ é™¤ä¼šäº§ç”Ÿä¸æœŸæœ›çš„ç»“æœï¼Œ ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œç‰¹åœ°å¢åŠ äº†Vue.setå’ŒVue.deleteä¸¤ä¸ªå…¨å±€API ã€‚ æ•°ç»„æ€ä¹ˆåŠ? çœ‹åˆ°è¿™é‡Œï¼Œå¯¹åŸå‹ç†Ÿæ‚‰çš„äººå¯èƒ½ä¼šé—®äº†ï¼Œè¿™ç§æ–¹æ³•åªé’ˆå¯¹äºObjç±»å‹ï¼Œé‚£å‰©ä¸‹çš„å¸¸ç”¨çš„Arrç±»å‹æˆ–è€…å…¶ä»–ç±»å‹å‘¢ï¼ŸdefinePropertyæ•°ç»„æ˜¯ä¸å¯èƒ½ä½¿ç”¨çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æ€ä¹ˆå¯¹æ•°ç»„è¿›è¡Œä¾èµ–æ”¶é›†å’Œé€šçŸ¥æ›´æ–°ï¼Ÿ è¿˜æ˜¯å»¶ç»­ä¸Šé¢çš„æ€æƒ³ï¼šæ‹¦æˆªï¼Œvueå°†æ‰€æœ‰æ•°ç»„çš„å¼‚å˜æ–¹æ³•(èƒ½æ”¹å˜åŸæœ‰æ•°ç»„)æ‹¦æˆªä¸€æ³¢ï¼Œå°±èƒ½çŸ¥é“arrå•¥æ—¶å€™è¢«setteräº†ã€‚ ç»å¸¸é¢è¯•è¢«é—®åˆ°åŸå‹ï¼ŒåŸå‹é“¾çš„what,why,é‚£ä¹ˆhow???? æˆ‘è§‰å¾—è¿™å°±æ˜¯ä¸ªå¾ˆå·§å¦™çš„å®è·µ~ æ‹¦æˆªæ•°ç»„åŸå‹ä¸Šçš„å¼‚å˜æ–¹æ³•(ä¼šæ”¹å˜åŸæœ‰å®¿ä¸»çš„æ–¹æ³•)çš„ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748//ä»£ç ä½ç½® vue/src/core/observer/array.js/* * not type checking this file because flow doesn't play well with * dynamically accessing methods on Array prototype */import &#123; def &#125; from '../util/index'const arrayProto = Array.prototypeexport const arrayMethods = Object.create(arrayProto)const methodsToPatch = [ 'push', 'pop', 'shift', 'unshift', 'splice', 'sort', 'reverse']/** * Intercept mutating methods and emit events */methodsToPatch.forEach(function (method) &#123; // cache original method const original = arrayProto[method] def(arrayMethods, method, function mutator (...args) &#123; const result = original.apply(this, args) const ob = this.__ob__ let inserted switch (method) &#123; case 'push': case 'unshift': inserted = args break case 'splice': inserted = args.slice(2) break &#125; if (inserted) ob.observeArray(inserted) // notify change ob.dep.notify() return result &#125;)&#125;) æ•°ç»„ä¾èµ–æ”¶é›† æ— è®ºæ€æ ·,å…ˆå¾—ç”¨walkè®©å…ƒç´ æ³¨å…¥observerä¾èµ–ï¼Œä½¿å¾—åœ¨getterä¸­å®ä¾‹åŒ–Depæ”¶é›†ä¾èµ–å¹¶å°†æ•°ç»„æ–¹æ³•æ‹¦æˆªæ‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102// æºç ä½ç½®ï¼š/src/core/observer/index.jsconst Dep = require(\"./dep\");const &#123; arrayKeys, arrayMethods &#125; = require(\"./array\");// æºç ä½ç½®ï¼šsrc/core/observer/index.js// ä½¿ç”¨ defineProperty è®©æ•°æ®å¯è§‚æµ‹export class Observer &#123; constructor(value) &#123; this.value = value; this.dep = new Dep(); def(value, \"__ob__\", this); if (Array.isArray(value)) &#123; const agument = hasProto ? protoAugment : copyAugument; [agument](value, arrayMethods, arrayKeys); this.observerArray(value); &#125; else &#123; this.walk(value); &#125; &#125; walk(obj) &#123; const keys = Object.keys(obj); for (let i = 0; i &lt; keys.length; i++) &#123; defineReactive(obj, keys[i]); &#125; &#125; observerArray(ietms) &#123; for (let i = 0; i &lt; ietms.length; i++) &#123; observe(ietms[i]); &#125; &#125;&#125;export const hasProto = \"__proto__\" in &#123;&#125;;/* å¤åˆ¶åŸå‹å±æ€§ï¼Œæ·»åŠ æ‹¦æˆª*/function protoAugment(target, src, keys) &#123; target.__proto__ = src;&#125;function copyAugument(target, src, keys) &#123; for (let i = 0; i &lt; keys.length; i++) &#123; const key = key[i]; def(target, key, src[key]); &#125;&#125;/* * å°è¯•ä¸ºvalueåˆ›å»ºä¸€ä¸ª0bserverå®ä¾‹ï¼Œå¦‚æœåˆ›å»ºæˆåŠŸï¼Œç›´æ¥è¿”å›æ–°åˆ›å»ºçš„Observerå®ä¾‹ã€‚ * å¦‚æœ Value å·²ç»å­˜åœ¨ä¸€ä¸ªObserverå®ä¾‹ï¼Œåˆ™ç›´æ¥è¿”å›å®ƒ */function observe(value) &#123; if (!isObject(value) || value instanceof VNode) &#123; return; &#125; let ob; if (hasOwn(value, '__ob__') &amp;&amp; value.__ob__ instanceof Observer) &#123; ob = value.__ob__; &#125; else &#123; ob = new Observer(value); &#125; return ob;&#125;function defineReactive(obj, key, val) &#123; let childOb = observe(val); if (arguments.length === 2) &#123; val = obj[key]; &#125; if (typeof val === \"object\") &#123; new Observer(val); &#125; const dep = new Dep(); Object.defineProperty(obj, key, &#123; enumerable: true, configurable: true, get() &#123; if (childOb) &#123; childOb.dep.depend(); &#125; return val; &#125;, set(newval) &#123; if (val === newval) return; val = newval; dep.notify(); &#125; &#125;);&#125; é€šçŸ¥æ›´æ–° ä¸»è¦æ˜¯è¿˜è¦å¯¹æ•°ç»„è¿›è¡Œæ·±åº¦ç›‘æµ‹å’Œæ–°å¢å…ƒç´ ä¾¦æµ‹ï¼Œåœ¨æ‹¦æˆªçš„åŸå‹ä¸Šè¿›è¡Œä¾èµ–æ›´æ–°ã€‚ __ob__æ˜¯åœ¨è¿›è¡Œåˆå§‹åŒ–observerçš„æ—¶å€™ï¼Œåœ¨è¢«ç›‘å¬è€…ä¸Šé¢æŒ‚è½½äº†è‡ªå·±çš„å®ä¾‹ï¼Œä»¥ä¾¿è®¿é—®åè¿›è¡Œä¾èµ–æ›´æ–°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748// æºç ä½ç½®ï¼švue/src/core/observer/array.js/* * not type checking this file because flow doesn't play well with * dynamically accessing methods on Array prototype */import &#123; def &#125; from '../util/index'const arrayProto = Array.prototypeexport const arrayMethods = Object.create(arrayProto)const methodsToPatch = [ 'push', 'pop', 'shift', 'unshift', 'splice', 'sort', 'reverse']/** * Intercept mutating methods and emit events */methodsToPatch.forEach(function (method) &#123; // cache original method const original = arrayProto[method] def(arrayMethods, method, function mutator (...args) &#123; const result = original.apply(this, args) const ob = this.__ob__ let inserted switch (method) &#123; case 'push': case 'unshift': inserted = args break case 'splice': inserted = args.slice(2) break &#125; if (inserted) ob.observeArray(inserted) // notify change ob.dep.notify() return result &#125;)&#125;) æ€»ç»“ï¼š vueçš„å˜åŒ–ä¾¦æµ‹ä¸Reactå¯¹æ¯”Vdomå’ŒAngularçš„è„å€¼æ£€æµ‹éƒ½ä¸ä¸€æ ·ã€‚æ ¸å¿ƒæ˜¯åˆ©ç”¨definePropertyçš„èƒ½åŠ›ï¼Œæ‹¦æˆªæ‰€æœ‰ç»‘å®šçš„å“åº”å¼æ•°æ®(dataä¸­),åœ¨æ‹¦æˆªä¸­æ·»åŠ ä¾èµ–ç®¡ç†å™¨Depæ¥æ”¶é›†ç®¡ç†ä¾èµ–,ç”¨Watcherè¡¨ç¤ºä¾èµ–å…³ç³»æœ¬èº«ï¼Œè¿›è¡Œé€šçŸ¥ä¾èµ–æ›´æ–°ã€‚ å…¶ä¸­ï¼Œå¯¹äºæ•°ç»„çš„ä¾¦æµ‹çš„æ€è·¯æ˜¯ï¼Œè¦†ç›–æ‰€æœ‰æ•°ç»„åŸå‹çš„çš„å¼‚å˜æ–¹æ³•ï¼Œåœ¨è¦†ç›–åæ¤å…¥ä¾èµ–é€»è¾‘ã€‚è¿™å¥—ç¼ºç‚¹å°±æ˜¯å¯¹æ•°ç»„è¿›è¡Œä¸‹æ ‡èµ‹å€¼æ“ä½œæ—¶ï¼Œvueæ˜¯ä¾¦æµ‹ä¸åˆ°çš„ï¼Œå®˜ç½‘æ–‡æ¡£ä¸Šå¤šå¤„å¯¹æ­¤æœ‰è¯´æ˜ã€‚ ç›¸ä¿¡ä¸‹æ¬¡ï¼Œé¢è¯•å®˜é—®ï¼šä¸ºä»€ä¹ˆåœ¨vueä¸­å¯¹æ•°ç»„ä¸‹æ ‡è¿›è¡Œèµ‹å€¼æ“ä½œä¼šå¯¼è‡´ä¸æ­£ç¡®çš„å“åº”å¼æ•°æ®ç»“æœã€‚è¿™ç§ç±»ä¼¼çš„é—®é¢˜ï¼Œä½ ä¸€å®šèƒ¸æœ‰æˆç«¹ã€‚","categories":[],"tags":[{"name":"Vue-2.6X-source-learn notes","slug":"Vue-2-6X-source-learn-notes","permalink":"https://tsunamigg.github.io/tags/Vue-2-6X-source-learn-notes/"}]},{"title":"fabric notes","slug":"fabric-notes","date":"2020-04-21T01:17:56.000Z","updated":"2020-05-28T14:27:32.996Z","comments":true,"path":"2020/04/21/fabric-notes/","link":"","permalink":"https://tsunamigg.github.io/2020/04/21/fabric-notes/","excerpt":"ä¸€æ¬¡ fabric+ fabric customiseControls å®è·µ","text":"ä¸€æ¬¡ fabric+ fabric customiseControls å®è·µ åˆ¶ä½œå›¾ç‰‡æ¶‚é¸¦ç”»æ¿(å¾®ä¿¡æµè§ˆå™¨) fabric+customiseControlsç®€ä»‹ fabricæ˜¯ä¸€ä¸ªcanvasåº“ï¼Œå…¶æ ¸å¿ƒå°±æ˜¯å°†canvasAPIè½¬æ¢ä¸ºå¯¹è±¡æ¨¡å‹ï¼Œè®©æˆ‘ä»¬æ›´åŠ ä¾¿æ·çš„ä½¿ç”¨ã€‚ customiseControlsåˆ™æ˜¯åŸºäºfabricçš„æ’ä»¶ï¼Œå¯ä¸ºæ–°å»ºçš„fabricå¯¹è±¡è®¾ç½®è§’æ ‡ï¼Œå¹¶ä¸ºå…¶æä¾›ä¸€ç³»åˆ—äº‹ä»¶ï¼šdragï¼Œ scaleï¼Œrotateï¼Œremoveï¼Œæˆ–è€…è‡ªå®šä¹‰äº‹ä»¶ã€‚ fabric:https://github.com/fabricjs/fabric.js customiseControlsï¼šhttps://github.com/pixolith/fabricjs-customise-controls-extension æ•ˆæœè¯´æ˜(æ¨¡ç³Šçš„å›¾ç‰‡æ˜¯æ•…æ„çš„) ç”¨æˆ·æ¶‚é¸¦ç¯èŠ‚ï¼š æ¶‚é¸¦çš„æ„æˆ = 1.åŸå¸‚èƒŒæ™¯å›¾ + è´´çº¸å›¾ç‰‡ç´ æ + æ–‡å­—å›¾ç‰‡ç´ æ 1ç‚¹å‡»ç¼©ç•¥å›¾åˆ‡æ¢ï¼Œåˆ‡æ¢æ—¶2ï¼Œ3ä¸å˜åŒ–ã€‚ 2ï¼Œ3æ˜¯å¯é€‰ä¸­åå¯æ‹–æ‹½ï¼Œæ‹–æ‹½æ—¶ä¸å½±å“å…¶ä»–å›¾ç‰‡ç´ æï¼Œé€‰ä¸­ä¹‹åå‡ºç°å››ä¸ªè§’çš„è§’æ ‡ï¼Œè§’æ ‡çš„äº‹ä»¶ä¸ºæ”¾å¤§ï¼Œç¼©å°ï¼Œæ—‹è½¬ï¼Œç§»é™¤ã€‚ ç”Ÿæˆç¯èŠ‚ æ ¹æ®ç”¨æˆ·æ¶‚é¸¦çš„ç»“æœï¼Œç”Ÿæˆä¸€å¼ å¸¦æœ‰å…¶ä»–ä¿¡æ¯çš„æµ·æŠ¥(é•¿æŒ‰ä¿å­˜åˆ°æ‰‹æœºç›¸å†Œ)ï¼Œæ¯”å¦‚ï¼š ç”¨æˆ·åœ°ç†ä½ç½®ä¿¡æ¯ï¼Œå½“å‰å‚ä¸äººæ•°ï¼ŒäºŒç»´ç ï¼Œæ˜µç§°ï¼Œå¤´åƒç­‰ç­‰ å¼€æ’¸ å¼€æ’¸ä¹‹å‰è¿˜æ˜¯æ¢³ç†ä¸€ä¸‹é‡ç‚¹å’Œä¼˜åŒ–ç‚¹ï¼š A.æ¶‚é¸¦ç”»æ¿çš„äº¤äº’(é‡ç‚¹) B.ç²¾å‡†ç”Ÿæˆæµ·æŠ¥(é‡ç‚¹)å’Œæµ·æŠ¥çš„æ¸…æ™°åº¦(ä¼˜åŒ–ç‚¹) Aéƒ¨åˆ†ï¼š ç”¨æˆ·é€‰æ‹©å¯¹åº”èƒŒæ™¯æˆ–è€…æ¶‚é¸¦ç´ æåæœ‰æ­£ç¡®ç›¸åº”ï¼Œè®¾ç½®è¾¹ç•Œå€¼ 1.åˆå§‹åŒ–fabricæ’ä»¶ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768// è®¾ç½®éƒ¨åˆ†è§’æ ‡ä¸å¯è§fabric.Object.prototype.setControlsVisibility(&#123; ml: false, mr: false, mtr: false, mt: false, mb: false&#125;);// è§’æ ‡äº‹ä»¶è®¾ç½®fabric.Canvas.prototype.customiseControls(&#123; br: &#123; action: \"rotate\" &#125;, bl: &#123; action: 'scale' &#125;, tl: &#123; action: function action(e, target) &#123; var canvas = target.canvas; canvas.remove(target).renderAll(); &#125; &#125;, tr: &#123; action: 'scale' &#125;&#125;);// ç¦ç”¨é€‰æ¡†fabric.Object.prototype.transparentCorners = false;// è§’æ ‡åŸºç¡€è®¾ç½®fabric.Object.prototype.customiseCornerIcons(&#123; settings: &#123; borderColor: '#fff', cornerSize: 20, cornerBackgroundColor: 'transparent', cornerPadding: 5 &#125;, br: &#123; action: \"rotate\", icon: './imgs/icons/rotate.svg' &#125;, bl: &#123; action: 'scale', icon: './imgs/icons/resize.svg' &#125;, tl: &#123; icon: './imgs/icons/remove.svg', action: function action(e, target) &#123; var canvas = target.canvas; canvas.remove(target).renderAll(); &#125; &#125;, tr: &#123; action: 'scale', icon: './imgs/icons/resize.svg' &#125;&#125;, function () &#123; board.renderAll();&#125;);var ww = $(window).width();var wh = $(window).height();var board = new fabric.Canvas('drawBoard', &#123; backgroundColor: 'transparent', width: (ww * 0.92 height: (wh * 0.67&#125;); 2.æ·»åŠ ç”¨æˆ·ç‚¹å‡»äº¤äº’(click -&gt; æ–°å¢å¯¹åº”ç´ æè‡³ç”»æ¿ æˆ–è€…åˆ‡æ¢åŸå¸‚èƒŒæ™¯) 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162var fabricItemList = [];// è®¾ç½®å›¾ç‰‡èƒŒæ™¯function setImagebg(imgSrc) &#123; fabric.Image.fromURL(imgSrc, function (img) &#123; img.set(&#123; scaleX: board.width / img.width, scaleY: board.height / img.height &#125;); board.setBackgroundImage(img, board.renderAll.bind(board)); board.requestRenderAll(); &#125;, &#123; crossOrigin: 'anonymous' &#125;);&#125;// è®¾ç½®è‡ªå®šä¹‰å›¾ç‰‡function setPicture(obj) &#123; obj.customiseCornerIcons(function () &#123; board.renderAll(); &#125;); fabricItemList.push(obj); board.add(obj); board.setActiveObject(obj);&#125;// ç”Ÿæˆæ–‡å­—å¯¹è±¡function addText(ctext) &#123; var color = arguments.length &gt; 1 &amp;&amp; arguments[1] !== undefined ? arguments[1] : \"#fff\"; var textObj = new fabric.Text(ctext, &#123; fontFamily: \"PingFang SC, Verdana, Helvetica Neue, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif\", fontSize: 30, top: 150, left: 150, originX: 'center', originY: 'center', fill: color &#125;); setPicture(textObj);&#125;// ç”Ÿæˆå›¾ç‰‡å¯¹è±¡function featImg(imgSrc, scale) &#123; fabric.Image.fromURL(imgSrc, function (img) &#123; img.set(&#123; scaleX: scale, scaleY: scale, angle: 0, left: Math.random() &lt; 0.5 ? Math.random() * 50 + 110 : -Math.random() * 50 + 110, top: Math.random() &lt; 0.5 ? Math.random() * 50 + 120 : -Math.random() * 50 + 120, hasControls: true, borderColor: '#fff' &#125;); setPicture(img); &#125;, &#123; crossOrigin: 'anonymous' &#125;);&#125; 3.ç”Ÿæˆç”»æ¿å›¾ 1234567let drawImg = board.toDataURL(); // ç”Ÿæˆåå¤åŸfabricå¯¹è±¡fabricItemList.forEach(function (item) &#123; return board.remove(item);&#125;);fabricItemList = []; Béƒ¨åˆ†ï¼š å¦‚ä½•æ ¹æ®è®¾è®¡ç¨¿ç²¾å‡†ç»˜åˆ¶æµ·æŠ¥ï¼ˆé‡ç‚¹ï¼‰ï¼Ÿ 1.ä½¿ç”¨ç°æœ‰æˆç†Ÿçš„æ–¹æ¡ˆï¼š canvas2Image + html2canvas(é«˜è´¨é‡å‰ç«¯å¿«ç…§æ–¹æ¡ˆï¼šæ¥è‡ªé¡µé¢çš„ã€Œè‡ªæ‹ã€) è¯¦è§ç½‘æ˜“äº‘éŸ³ä¹å›¢é˜Ÿçš„æ–‡ç« ï¼šhttps://juejin.im/post/5df2e8ab6fb9a0163770816d#heading-15 2.è‡ªå·±çæŠ˜è…¾ æœ€ç»ˆé€‰æ‹©ï¼š*è‡ªå·±çæŠ˜è…¾ * å¿ƒè·¯å†ç¨‹ï¼š ï¼Ÿï¼Ÿï¼Ÿï¼Ÿä½œè€…æ˜¯ä¸æ˜¯è„‘å­æœ‰ç—…(å°å£°BB)â€¦ ä¸ºä»€ä¹ˆæˆ‘è¦åšè´¹åŠ›ä¸è®¨å¥½çš„äº‹æƒ…ï¼Ÿ ç°æˆçš„åº“ä»–ä¸é¦™å—ï¼Ÿ åŸå› åœ¨äºiosæ‰‹æœºåœ¨æˆæƒåçš„ï¼šå¾®ä¿¡æµè§ˆå™¨çš„ç™½æ¡é—®é¢˜ ç™½æ¡ä¼šä½¿å¾—æ•´ä¸ªå¯è§†åŒºçš„DOMè¢«å‘ä¸Šé¡¶ä¸€éƒ¨åˆ†è·ç¦»â€¦ æ•´ä¸ªç½‘ä¸Šçš„æ–¹æ¡ˆéƒ½åœ¨ç°æœ‰èµ„æºä¸‹éƒ½ä¸èƒ½å¥½å¥½è§£å†³ï¼Œhttps://developers.weixin.qq.com/community/develop/doc/0000a09f840910386ee69390251c00 ç™½æ¡é—®é¢˜ä½¿å¾—åœ¨ä½¿ç”¨å‰é¢çš„ã€Œè‡ªæ‹ã€æ–¹æ¡ˆæ—¶ï¼Œç”Ÿæˆçš„æµ·æŠ¥ä¼šé”™ä½â€¦ç»“æœæƒ¨ä¸å¿ç¹ï¼ html2canvasæ˜¯æ ¹æ®éå†DOMæ ·å¼ä¿¡æ¯æ¥ç”Ÿæˆçš„ï¼Œè€Œä¸”åœ¨éå†è¿‡ç¨‹ä¸­ï¼Œå®ƒä¼šé‡æ–°åŠ è½½æ‰€æœ‰èµ„æº(åœ¨networkè‡ªå·±çœ‹)ï¼Œå¦‚æœé‡åˆ°è´¨é‡è¾ƒé«˜æˆ–è€…åƒè¿™æ ·çš„æ•°é‡çš„å›¾ç‰‡ï¼Œä¼šå‡ºç°ç»˜åˆ¶ç©ºç™½çš„å¯èƒ½ã€‚ è‡ªå·±çæŠ˜è…¾çš„ç»“æœï¼š æ ¹æ®canvasçš„drawimageå†™äº†ä¸ªç”Ÿæˆå›¾çš„jsï¼Œå†™çš„åƒåœ¾ï¼Œå¤§ä½¬å‹¿å–·â€¦https://github.com/tsunamiGG/utils/blob/master/makePoster.jsã€‚ å¤§æ¦‚æ€è·¯ï¼š canvaså›¾å±‚å †å æ˜¯æœ‰é¡ºåºçš„ï¼Œæ‰€ä»¥æŒ‰ç…§å›¾å±‚é¡ºåºè¿›è¡Œä¼ å‚ã€‚ ä¸ºä¿è¯ç”Ÿæˆèµ„æºçš„å®Œæ•´æ€§ï¼Œå¿…é¡»å…ˆç¡®ä¿onloadä¹‹åè¿›å…¥åˆæˆè¿‡ç¨‹ã€‚ ä»¥å·¦ä¸Šè§’ä¸ºåŸç‚¹ï¼Œç„¶åä½¿ç”¨æ€§èƒ½ä¸é”™çš„drawimage(x,y,w,h)ç¦»å±æ¸²æŸ“ç”Ÿæˆï¼Œä»è€Œé¿å¼€äº†ç”Ÿæˆå›¾è¢«ç™½æ¡å½±å“ã€‚ béƒ¨åˆ†ï¼šæµ·æŠ¥çš„æ¸…æ™°åº¦(ä¼˜åŒ–ç‚¹) å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„æ•ˆæœå›¾æ¸…æ™°åº¦æ˜¯éå¸¸ä¸ç†æƒ³çš„ï¼Œéœ€è¦ä¼˜åŒ–ã€‚ ä¸ºä»€ä¹ˆæˆ‘ä»¬çš„canvasç»˜åˆ¶çš„ä¸œè¥¿çœ‹ä¸Šå»æ€»æ˜¯æ¯”ç”¨DOMåˆæˆçš„ä¸œè¥¿ç³Šä¸€äº›ï¼Ÿ çœŸå®ç‰©ç†è®¾å¤‡çš„åƒç´ å’Œcssçš„åƒç´ æ˜¯æœ‰å·®è·çš„ï¼Œwindow.devicePixelRatioçš„å€¼å°±ååº”äº†å…¶æ¯”ä¾‹ã€‚å®ƒå‘Šè¯‰æµè§ˆå™¨åº”ä½¿ç”¨å¤šå°‘å±å¹•å®é™…åƒç´ æ¥ç»˜åˆ¶å•ä¸ªCSSåƒç´ ã€‚ åŒä¸€ä¸ªä¸œè¥¿ï¼Œä½ ä½¿ç”¨ä¸€ä¸ªcssåƒç´ æ¥è¡¨ç¤ºï¼Œå‡è®¾åœ¨ä¸åŒæ‰‹æœºä¸Šåˆ†åˆ«æµè§ˆå™¨æœ¬éœ€è¦4ä¸ªç‰©ç†åƒç´ æˆ–8ä¸ªç‰©ç†åƒç´ ã€‚è€Œcanvasåªç”¨ä¸€ä¸ªä½å›¾åƒç´ æ¥å¡«å……4ä¸ªç‰©ç†åƒç´ æˆ–8ä¸ªç‰©ç†åƒç´ ï¼Œä¸ç³Šæ‰æ€ªå‘¢.. å¦‚æœæƒ³æ·±å…¥äº†è§£ï¼Œå‚è€ƒï¼šhttps://juejin.im/post/5cbdda7bf265da036504fb46 1.jsè®¾ç½®æ”¾å¤§devicePixelRatioå€æ•°å®½é«˜çš„canvasï¼Œcssè®¾ç½®ç¼©å°devicePixelRatioå€æ•°çš„canvasã€‚æ‰©å¤§å®é™…åƒç´ æ•°é‡ï¼Œè§†è§‰ä¸Šä¿æŒè·ŸåŸæœ‰å°ºå¯¸ä¸€è‡´ï¼Œåœ¨APIç”Ÿæˆå›¾ç‰‡åä¼šæ¸…æ™°å¾ˆå¤šã€‚ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨cssç¼©å°è§†è§‰ç”»å¸ƒæ—¶ï¼Œç”±äºfabircä¼šåœ¨htmlä¸Šç”Ÿæˆä¸¤ä¸ªcanvasç”»å¸ƒï¼Œåˆ†åˆ«æ˜¯outerå’Œinnerï¼Œä½ éœ€è¦æŠŠä¸¤ä¸ªç”»å¸ƒçš„csséƒ½ç¼©å°ã€‚ 2.å…³é—­canvasæŠ—é”¯é½¿ 123456789101112const canvas = document.createElement(\"canvas\");const scale = window.devicePixelRatio;canvas.width = width * scale;canvas.height = height * scale;const context = canvas.getContext(\"2d\").scale(scale, scale)// å…³é—­æŠ—é”¯é½¿context.mozImageSmoothingEnabled = false;context.webkitImageSmoothingEnabled = false;context.msImageSmoothingEnabled = false;context.imageSmoothingEnabled = false; ä¼˜åŒ–åæ•ˆæœå¦‚ä¸‹ï¼Œæ‰‹æœºä¿å­˜å›¾å®é™…è´¨é‡æ¯”è¿™ä¸ªé«˜ï¼š 4.æ€»ç»“å¯¹ååˆ†é™Œç”Ÿçš„canvasç¨å¾®æœ‰äº†ä¸€äº›è®¤è¯†ï¼Œç”¨canvasåšåŠ¨ç”»çš„åº“éå¸¸å¤šï¼Œä½†æœ‰ä¸ªè‡´å‘½çš„ç¼ºç‚¹å°±æ˜¯æ²¡åŠæ³•è¿›è¡Œè°ƒè¯•â€¦ å…¶ä¸­è¿˜æœ‰å¾ˆå¤šå¾®ä¿¡æµè§ˆå™¨çš„å¾ˆå¤šç„å­¦é—®é¢˜å°±ä¸å±•å¼€äº†ï¼Œç™½æ¡é—®é¢˜ç¡®å®æ˜¯å¾ˆå¤´ç–¼çš„ã€‚fabricå¯ä»¥æ•´å‡ºå¾ˆå¤šæƒŠè‰³çš„æ•ˆæœï¼Œä½†å…¶ä¹±ä¸ƒå…«ç³Ÿçš„æ–‡æ¡£å’Œç³Ÿç³•çš„ç¤ºä¾‹ä¼šå¸¦æ¥å¾ˆå¤šéº»çƒ¦ï¼Œå½±å“å‘æŒ¥â€¦","categories":[],"tags":[{"name":"fabric canvas notes","slug":"fabric-canvas-notes","permalink":"https://tsunamigg.github.io/tags/fabric-canvas-notes/"}]},{"title":"åˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼","slug":"object-create","date":"2019-08-25T11:45:38.000Z","updated":"2020-05-28T14:21:24.705Z","comments":true,"path":"2019/08/25/object-create/","link":"","permalink":"https://tsunamigg.github.io/2019/08/25/object-create/","excerpt":"åœ¨nativeä¸­ï¼Œåˆ›å»ºå¯¹è±¡çš„æ–¹å¼åƒå·®ä¸‡åˆ«ï¼Œè®¾è®¡æ¨¡å¼ä¸­çš„åˆ›å»ºå‹åˆ™åŸºäºè¿™äº›ä¸åŒçš„æ–¹å¼","text":"åœ¨nativeä¸­ï¼Œåˆ›å»ºå¯¹è±¡çš„æ–¹å¼åƒå·®ä¸‡åˆ«ï¼Œè®¾è®¡æ¨¡å¼ä¸­çš„åˆ›å»ºå‹åˆ™åŸºäºè¿™äº›ä¸åŒçš„æ–¹å¼ 1.ç®€å•å·¥å‚æ¨¡å¼ï¼šSimple Factoryå·¥å‚æ¨¡å¼ä»€ä¹ˆæ„æ€ï¼Ÿ å¦‚æœæŠŠæˆ‘ä»¬ç¼–å†™ä¸šåŠ¡ä»£ç çš„è¿‡ç¨‹ï¼Œæ¯”ä½œé€ ä¸€å°ç”µè§†æœºï¼Œé‚£ä¹ˆå·¥å‚æ¨¡å¼å°±æ˜¯å…ˆæ‰“é€ å¥½ç”Ÿäº§ç”µè§†æœºçš„æµæ°´çº¿ã€‚å¦‚ä½•æ‰“é€ ç”Ÿäº§çº¿ï¼Ÿï¼Ÿï¼Ÿ æˆ‘ä»¬å°†éœ€è¦å·¥å‚åˆ¶é€ çš„äº§ç‰©çš„ç‰¹æ€§æŠ½è±¡å‡ºæ¥ï¼Œåœ¨ä»£ç ä¸Šè¡¨ç°ä¸ºæˆ‘ä»¬è§„å®šå…¶å±æ€§åç§°ï¼Œä½†å…¶å±æ€§å€¼åˆå‚æ•°æ¥å†³å®šã€‚ 1234567function createBook(name, pages, author) &#123; let newBook = &#123;&#125;; newBook.name = name; newBook.pages = pages; newBook.author = author; return newBook;&#125; è¿™æ˜¯ä¸€ç§å·¥å‚æ¨¡å¼ï¼Œå…¶å®ç°æ–¹å¼ä¸ä¹‹å‰å­¦åŸºç¡€çš„å¯„ç”Ÿç»§æ‰¿æœ‰ç‚¹ç›¸ä¼¼ï¼Œä¹Ÿæ˜¯åœ¨ä¸€ä¸ªæ–°çš„å˜é‡ä¸Šå»æ·»åŠ å±æ€§ï¼Œä½¿ç”¨å­—é¢é‡æ–¹å¼åˆ›å»ºå¯¹è±¡ä¼šæ¯”ä½¿ç”¨newé«˜æ•ˆçš„å¤šã€‚ è¿˜æœ‰ä¸€ç§å°±æ˜¯å…ˆå°†ä¸åŒå‹å·çš„ç”µè§†æœºé€ å‡ºæ¥ï¼Œç„¶åé€šè¿‡å·¥å‚æ¥è¾“é€åˆ°ä¸åŒçš„äº§å“åŒºã€‚ è¿™é‡Œçš„å·¥å‚ä¸åœ¨åˆ¶é€ ï¼Œè€Œæ˜¯å……å½“deliverçš„è§’è‰²ã€‚ 123456789101112131415161718192021222324function fictionBook() &#123; this.name = 'ä¹å·ç¼¥ç¼ˆå½•'; this.story = 'é“ç”²ä¾ç„¶åœ¨'; this.tellStory = function()&#123; console.log(this.story) &#125;&#125;function classicBook() &#123; this.name = 'å‡å¦‚ç»™æˆ‘ä¸‰å¤©å…‰æ˜'; this.author = 'æµ·ä¼¦å‡¯å‹’'; this.bookauthor = function () &#123; console.log(this.author) &#125;&#125;function createBook(type) &#123; switch (type) &#123; case 'fiction': return new fictionBook(); case 'classic': return new classicBook(); &#125;&#125; ä¸¤ç§æ–¹å¼ä¼˜ç¼ºç‚¹ååˆ†æ˜æ˜¾ï¼Œ ç¬¬ä¸€ç§å¸¸è§æ–¹å¼éœ€è¦æˆ‘ä»¬å›ºå®šæŸäº›å‚æ•°ç±»å‹ï¼Œé™åˆ¶äº†å…¶å¤šæ ·æ€§ï¼Œä½†ç›¸æ¯”ç¬¬äºŒç§çœäº‹å¤šäº†ã€‚ç¬¬äºŒç§åˆ™ç›¸åï¼Œæ¯åˆ›é€ ä¸€ç§ä¸åŒå‹å·çš„ç”µè§†æœºå°±éœ€è¦æˆ‘ä»¬å»åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»å¹¶å‘åˆ†å‘ç±»æ·»åŠ è¯¥é€‰é¡¹ã€‚ 2.å·¥å‚æ–¹æ³•æ¨¡å¼: Factory Method12345678910111213141516//å®‰å…¨æ¨¡å¼ const Factory = function (type, content) &#123; if (this instanceof Factory) &#123; return new this[type](content); &#125; else &#123; return new Factory(type, content); &#125; &#125;Factory.prototype = &#123; show: function(content) &#123; this.content = content; console.log(content); &#125;&#125;const test = new Factory('show', '2'); å®‰å…¨æ¨¡å¼çš„å¥½å¤„åœ¨äºï¼Œåœ¨ç®€å•å·¥å‚æ¨¡å¼ä¸ŠåŠ äº†ä¸€å±‚é™åˆ¶ï¼Œå¦‚æœæ²¡æœ‰åˆ›å»ºå·¥å‚ç±»ï¼Œå°±ç›´æ¥æ‰§è¡Œè¯¥å‡½æ•°è€Œä¸æ˜¯è¿”å›å·¥å‚å¯¹è±¡ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940//æŠ½è±¡æ¨¡å¼const abstractFactory = function (superType, subType) &#123; if (typeof abstractFactory[superType] === 'function' ) &#123; function F() &#123;&#125;; F.prototype = new abstractFactory[superType](); subType.constructor = subType; subType.prototype = new F(); &#125; else &#123; throw new Error('æœªåˆ›å»ºè¯¥æŠ½è±¡ç±»') &#125;&#125;abstractFactory.desk = function() &#123; this.type = 'desk';&#125;abstractFactory.desk.prototype = &#123; getDeskSize: function () &#123; return new Error('æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨') &#125;, getDeskMaterial: function() &#123; return new Error('æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨') &#125;&#125;//å®ä¾‹åŒ–æŠ½è±¡deskç±»// 1.å­ç±»æ„é€ æ–¹æ³•let machilusDesk = function(size, material) &#123; this.size = size; this.material = material;&#125;// 2. å°†å­ç±»æ„é€ æ–¹æ³•é€å…¥å·¥å‚ï¼Œç»§æ‰¿å·¥å‚æŠ½è±¡æ–¹æ³•abstractFactory('desk', machilusDesk);// 3. è¦†ç›–æŠ½è±¡æ–¹æ³•machilusDesk.prototype.getDeskSize = function() &#123; return this.size;&#125;machilusDesk.prototype.getDeskMaterial = function() &#123; return this.material;&#125; åœ¨JSä¸­ï¼Œabstractæ˜¯ä¸€ä¸ªä¿ç•™å…³é”®å­—ï¼Œæ‰€ä»¥æƒ³è¦å®ç°æŠ½è±¡ç±»ï¼Œæ˜¯ä¸å¯èƒ½åƒä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€é‚£ä¹ˆæ–¹ä¾¿ï¼Œä½†ç”±äºå…¶çµæ´»æ€§ï¼Œæˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿå‡ºæŠ½è±¡ç±»çš„ä¸»è¦è¡Œä¸ºã€‚ æŠ½è±¡æ–¹æ³•æ—¶ä¸å¯è°ƒç”¨çš„ï¼Œä¼šæŠ¥é”™ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¨¡æ‹Ÿå‡ºå…¶è¿™ä¸ªè¡Œä¸ºï¼Œå¹¶ä¸”é‡‡ç”¨å¯„ç”Ÿç»§æ‰¿æ¥ç»§æ‰¿çˆ¶ç±»ã€‚å½“å·¥å‚ç”Ÿæˆå­ç±»åï¼Œè¦†ç›–æŠ½è±¡æ–¹æ³•ï¼Œå°±ä¸ä¼šæŠ¥é”™äº†ã€‚ æŠ½è±¡æ¨¡å¼æ˜¯æå‰å®šä¹‰äº†ç±»çš„ç»“æ„ï¼Œè€Œä¸æ˜¯ç›´æ¥åˆ›å»ºç±»ã€‚å°±åƒå»ºæˆ¿å­å…ˆç”»å¥½æˆ¿å­çš„å›¾çº¸ä¸€æ ·ï¼Œå…ˆæè¿°å‡ºå…¶è½®å»“~ ä½†JSä¸­ä¸æ”¯æŒæŠ½è±¡åŒ–åˆ›å»ºå’Œè™šæ‹Ÿæ–¹æ³•ï¼Œæ‰€ä»¥å…¶å¼•ç”¨å¹¶ä¸å¹¿æ³›ï¼Œä½†ä¹Ÿæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­å¾ˆç»å…¸å¸¸è§çš„ä¸€ç§æ¨¡å¼ã€‚ 3.å»ºé€ è€…æ¨¡å¼ï¼š Builderå¦‚æœè¯´å·¥å‚æ¨¡å¼çš„ä¾§é‡ç‚¹åœ¨åˆ›å»ºçš„ç»“æœï¼Œé‚£ä¹ˆå»ºé€ è€…å°±æ˜¯æ³¨é‡åˆ›å»ºè¿‡ç¨‹çš„ä¸€ç§æ¨¡å¼ã€‚ å»ºé€ è€…ä¼šæ³¨æ„åˆ›å»ºè¿‡ç¨‹çš„æ¯ä¸ªç»†èŠ‚ï¼Œå°±åƒæˆ‘ä»¬ææ©¡çš®äººæ—¶ï¼Œä¸å…‰è¦æ³¨æ„èº«ä½“çš„è½®å»“ï¼Œè¿˜è¦æ³¨æ„å¤´æœ‰å¤šå¤§ï¼Œå››è‚¢æœ‰å¤šé•¿â€¦.ç†æ‰€å½“ç„¶çš„åˆ›å»ºè¿‡ç¨‹ä¼šå¤æ‚å¾ˆå¤šã€‚ å…¶è¿‡ç¨‹å°±æ˜¯å°†å„ç§ç‰¹æ€§éƒ½å°è£…æˆç±»ï¼Œç„¶ååœ¨ä¸»ç±»é‡Œé¢æ ¹æ®ä¸åŒå‚æ•°ï¼Œå®ä¾‹åŒ–ä¸åŒçš„ç‰¹æ€§ï¼Œç»„æˆæ–°çš„å­ç±»ï¼Œæˆ–è€…å«å…¶å¤åˆå¯¹è±¡ã€‚ 123456789101112131415161718192021222324252627function House(parmas) &#123; this.material = parmas &amp;&amp; parmas.material || '**'; this.area = parmas &amp;&amp; parmas.area || '**';&#125;House.prototype = &#123; getMaterial: function() &#123; return this.material; &#125;, getArea: function() &#123; return this.area; &#125;&#125;function material(material) &#123; this.material = material;&#125;function area(m) &#123; this.area = m * m;&#125;function newHouse(material, m) &#123; let _house = new House(); _house.material = new material(material); _house.area = new area(area); return _house;&#125; å°±åƒæ­ç§¯æœ¨ä¸€æ ·ï¼Œå…ˆæŠŠå„å—ç§¯æœ¨çš„å½¢çŠ¶æ‰¾å¥½ï¼Œç„¶åç»„åˆåœ¨ä¸€èµ·ã€‚æŠ›å‡ºä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœè¦åœ¨ä¸€ä¸ªç½‘é¡µä¸Šå‘ˆç°å¡ç‰‡å †ç Œçš„æ•ˆæœï¼Œä½ ä¼šæ€ä¹ˆåšå‘¢ï¼Ÿ ä¸ªäººç†è§£ï¼Œè¿™ä¸ªæ¨¡å¼æ˜¯æˆ‘ä»¬ç»å¸¸è§£å†³ç”Ÿæ´»ä¸­é—®é¢˜çš„ä¸€ç§æ–¹æ³•çš„æŠ½è±¡ï¼Œå¤æ‚çš„é—®é¢˜ç®€å•åŒ–ï¼Œå°±æ˜¯å°†ä¸€ä¸ªå¤æ‚çš„äº‹ç‰©æ‹†åˆ†æˆå¤šä¸ªç®€å•çš„äº‹ç‰©ï¼Œå†ä»¥æŸç§æ–¹å¼ç»„åˆèµ·æ¥ï¼Œæ¥è§£å†³é—®é¢˜çš„ä¸€ç§æ–¹æ³•ã€‚ 4.åŸå‹æ¨¡å¼ï¼šprototypeå…¶è¢«ç§°ä¸ºè¯­è¨€ä¹‹é­‚ï¼Œå®ƒå°†åŸå‹å¯¹è±¡æŒ‡å‘åˆ›å»ºå¯¹è±¡çš„ç±»ï¼Œä½¿è¿™äº›ç±»å…±äº«åŸå‹å¯¹è±¡çš„æ–¹æ³•å’Œå±æ€§ã€‚ å­˜åœ¨å³åˆç†ï¼Œé‚£ä¹ˆå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿåœ¨å¾ˆå¤šå¤æ‚çš„åŠŸèƒ½ä¸‹ï¼Œæˆ‘ä»¬çš„å­ç±»éœ€è¦ç»§æ‰¿çˆ¶ç±»çš„ä¸€äº›å±æ€§ä¸æ–¹æ³•ï¼Œä½†æ˜¯å¹¶éæ‰€æœ‰å­ç±»éœ€æ±‚çš„å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥å­ç±»ä¼šä»çˆ¶ç±»ç»§æ‰¿ä¸€äº›ä¸å¿…è¦çš„ï¼Œå¢åŠ é¢å¤–å¼€é”€çš„å±æ€§å’Œæ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªè½¦çš„çˆ¶ç±»ï¼Œå­ç±»å¯èƒ½æ˜¯è·‘è½¦ï¼Œè½¿è½¦ï¼ŒSUVï¼Œè¶Šé‡ï¼Œè·‘è½¦éœ€è¦æ•´ä¸ªè½¦ä½“ç»“æ„å’Œè½¿è½¦ä¸ä¸€æ ·ï¼Œä½†çˆ¶ç±»å› ä¸ºè€ƒè™‘æ•´ä½“æ€§ä¸ä¼šæœ‰ç‰¹æ®Šçš„è½¦ä½“ç»“æ„ï¼Œè€Œæ˜¯é€šç”¨çš„è½¿è½¦ç»“æ„ï¼Œé‚£ä¹ˆå­ç±»å°±ä»çˆ¶ç±»ç»§æ‰¿äº†ä¸€äº›é¢å¤–çš„è´Ÿæ‹…æ€§è´¨çš„å±æ€§å’Œæ–¹æ³•ã€‚è€Œå­ç±»æ¯æ¬¡å®ä¾‹åŒ–éƒ½ä¼šé€ æˆå¾ˆå¤šä¸å¯é¿å…çš„é¢å¤–å¼€é”€ã€‚ åŸå‹æ¦‚å¿µå°±æ­¤è€Œå‡ºï¼Œå®ƒå°†æŸäº›å¯å¤ç”¨ï¼Œå¯å…±äº«çš„ï¼Œå¼€é”€å¤§çš„å±æ€§å’Œæ–¹æ³•ä»çˆ¶ç±»æå–å‡ºæ¥æ”¾åœ¨åŸå‹ä¹‹ä¸­ï¼Œå­ç±»é€šè¿‡å‰æ–‡çš„æŸäº›ç»§æ‰¿æ–¹å¼æ¥ç»§æ‰¿ï¼Œç›´æ¥è·å¾—è¿™äº›å±æ€§å’Œæ–¹æ³•è€Œä¸æ˜¯æ¯æ¬¡å®ä¾‹åŒ–é‡æ–°åˆ›å»ºè¿™äº›å±æ€§å’Œæ–¹æ³•ï¼ŒèŠ‚çœäº†å¾ˆå¤šä¸å¿…è¦çš„å¼€é”€ã€‚ jsåœ¨åŸå‹æ¨¡å¼ä¸‹å®ç°çš„åŸå‹é“¾ï¼Œè®©æ‰€æœ‰å†…ç½®çš„å±æ€§å’Œæ–¹æ³•éƒ½äº«å—åˆ°è¯¥æ¨¡å¼çš„å¥½å¤„ã€‚ å…¶å®ç°æ–¹å¼å°±æ˜¯å¯¹ä¸€ä¸ªå¯¹è±¡çš„æ‹·è´ï¼Œä¹Ÿæ˜¯ä¸€ç§ç»§æ‰¿æ–¹å¼ï¼Œä½†å¾ˆç‰¹æ®Šçš„ä¸€ç‚¹ï¼Œåˆ›å»ºè¿‡ç¨‹äºå®ƒæ— ç“œï¼Œç†è§£è¿™ä¸€ç‚¹å¾ˆé‡è¦~ 5.å•ä¾‹æ¨¡å¼ï¼š singletonè¿™æ˜¯jsç¼–ç¨‹ä¸­å¾ˆå¸¸è§çš„ä¸€ç§æ¨¡å¼ï¼Œåªå…è®¸å®ä¾‹åŒ–ä¸€æ¬¡çš„å¯¹è±¡ç±»ã€‚æœ‰æ—¶ç”Ÿæˆå‘½åç©ºé—´namespaceã€‚å¤šäººåä½œå¼€å‘æˆ–è€…åŠ è½½ç‹¬ç«‹çš„ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„è¯è¯­æ€»æ˜¯æœ‰é™çš„ï¼Œæ€ä¹ˆè®©å®ƒä»¬çš„å‘½åäº’ä¸å½±å“å‘¢ï¼Ÿç­”æ¡ˆè¯´éƒ½å¼€è¾Ÿç‹¬ç«‹çš„å‘½åç©ºé—´ï¼Œä½¿å¾—å…¶æ–¹æ³•åéƒ½å¯ä»¥åŒºåˆ†å¼€ã€‚åŒæ—¶ï¼Œå¯¹æˆ‘ä»¬åœ¨ç®¡ç†é™æ€å˜é‡ä¹Ÿéå¸¸æœ‰å¸®åŠ©ã€‚ é£é¡å¾ˆå¤šæ—¶çš„Jqueryå°±æ˜¯ç»å…¸çš„ä¾‹å­ï¼Œå…¶$ç¬¦å°±æ˜¯å‘½åç©ºé—´ï¼Œ$(&#39;className&#39;).functionè¿™æ ·çš„è°ƒç”¨æ–¹å¼ä½¿å¾—ä»£ç æ¸…æ™°æ˜äº†ï¼Œä¸€çœ‹å°±çŸ¥é“æ˜¯Jqueryçš„æ–¹æ³•ã€‚ 1234567891011let mynamespace = &#123; utils: &#123; formate: function() &#123; ..... &#125; &#125;, ajax: function() &#123; ..... &#125; MYHEIGHT: 180&#125; å…¶å®å°±æ˜¯å°è£…åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œé¢ï¼Œå»¶å±•å¼€æ¥å°±æ˜¯æ¨¡å—æœºåˆ¶ï¼ŒæŠŠæ•´ä¸ªjsæ–‡ä»¶ä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå­˜æ”¾ä¸åŒçš„å‘½åç©ºé—´ï¼Œé¿å…æ–¹æ³•åçš„è¦†ç›–ã€‚ æ€ä¹ˆå®ç°åªèƒ½å®ä¾‹åŒ–ä¸€æ¬¡çš„å¯¹è±¡ç±»ï¼Ÿ å¦ˆè€¶ï¼Œç”¨ä¸ªé—­åŒ…è®°å½•ï¼Œå¦‚æœè¢«å®ä¾‹åŒ–äº†ï¼Œå°±returnæ‰ï¼Œeasyã€‚ ä»€ä¹ˆï¼Ÿ æ€ä¹ˆåˆ›å»ºä¸€ä¸ªé—­åŒ…ï¼Ÿï¼Ÿï¼Ÿ å»ºè®®ä½ å»çœ‹çœ‹ã€Šä½ ä¸çŸ¥é“çš„javascriptã€‹,ä¹¦ä¸­è¯¦ç»†çš„è®ºè¿°äº†é—­åŒ…æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆåˆ›å»ºé—­åŒ…ï¼Œé—­åŒ…çš„ç”¨é€”åˆæ˜¯ä»€ä¹ˆï¼Œé—­åŒ…èƒŒåçš„ä½œç”¨æœºåˆ¶å…¶å®æ˜¯ä¿æŒå¯¹ä½œç”¨åŸŸçš„å¼•ç”¨ç­‰ç­‰ã€‚ä¸‹æ¬¡æœ‰ç©ºï¼Œç»“åˆä¹¦æœ¬æˆ‘ä»¬æ¥è¯¦è§£ä¸€ä¸‹jsä¸­çš„é—­åŒ…ï¼Œè§£å¼€å…¶ç¥ç§˜çš„é¢çº±ã€‚ æ€»ç»“ åˆ›å»ºå‹è®¾è®¡æ¨¡å¼æ˜¯ä¸€äº›å¤„ç†å¯¹è±¡åˆ›å»ºçš„æ¨¡å¼ï¼Œé€šè¿‡æŸç§æ–¹å¼æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºæ¥é¿å…åŸºæœ¬å¯¹è±¡åˆ›å»ºæ—¶å¯èƒ½å¯¼è‡´è®¾è®¡ä¸Šçš„é—®é¢˜æˆ–å¢åŠ è®¾è®¡ä¸Šçš„å¤æ‚åº¦ã€‚ åˆ›å»ºå•ç±»ç®€å•å¯¹è±¡çš„ç®€å•å·¥å‚æ¨¡å¼ï¼Œç®€å•çš„ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œäºæ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼è¡¥è¶³åˆ›å»ºå¤šç±»çš„å®ä¾‹(å…¶å®æ˜¯ä¼ å…¥ä¸åŒå‚æ•°çš„ç®€å•å·¥å‚æ¨¡å¼å’Œå®‰å…¨æ¨¡å¼çš„æ··åˆ)ã€‚å»ºé€ è€…æ¨¡å¼åˆ™æ˜¯é€šè¿‡ç»„åˆå¤šç§ç®€å•å·¥å‚æ¨¡å¼ï¼Œæ¥åˆ›é€ å¤æ‚çš„å¯¹è±¡ã€‚åŸå‹æ¨¡å¼ä¹Ÿè¢«æˆä¸ºè¯­è¨€ä¹‹é­‚ï¼Œå°†æŸäº›å±æ€§å’Œæ–¹æ³•æ”¾åœ¨åŸå‹å¯¹è±¡ä¸­ä½œä¸ºæ‰€æœ‰å¯¹è±¡çš„å…±æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œé¿å…äº†å­ç±»æ¯æ¬¡å®ä¾‹åŒ–éƒ½ä¼šå¯èƒ½åˆ›å»ºæ–°çš„ä¸å¿…è¦çš„ï¼Œå¼€é”€å¤§çš„å±æ€§å’Œæ–¹æ³•ã€‚å•ä¾‹æ¨¡å¼åˆ™æ˜¯ä¸ºæˆ‘ä»¬çš„ä»£ç ç®¡ç†åšå‡ºäº†å“è¶Šçš„è´¡çŒ®ã€‚è¿™äº”ç§æ¨¡å¼ä¸­ï¼ŒåŸå‹æ¨¡å¼å¹¶ä¸å…³å¿ƒå¯¹è±¡åˆ›å»ºè¿‡ç¨‹ï¼Œä½†å¯¹åˆ›å»ºè¿‡ç¨‹åšå‡ºçš„è´¡çŒ®è¿˜æ˜¯æœ‰ç›®å…±ç¹ï¼Œæˆ–è®¸è¿™å°±æ˜¯å¤§ä½¬å§ï¼Œæ¶¦ç‰©ç»†æ— å£°~","categories":[],"tags":[{"name":"javascript-native","slug":"javascript-native","permalink":"https://tsunamigg.github.io/tags/javascript-native/"}]},{"title":"ESmodule","slug":"ESmodule","date":"2019-05-28T12:07:12.000Z","updated":"2020-05-28T14:21:05.901Z","comments":true,"path":"2019/05/28/ESmodule/","link":"","permalink":"https://tsunamigg.github.io/2019/05/28/ESmodule/","excerpt":"ESmoduleçš„æ ‡å‡†åŒ–å®Œæˆä¸€å®šä¼šæ€èµ·æ³¢æ¾œ~","text":"ESmoduleçš„æ ‡å‡†åŒ–å®Œæˆä¸€å®šä¼šæ€èµ·æ³¢æ¾œ~ å›¾è¯´ ES Modulesï¼ˆè½¬è½½è¯‘æ–‡ï¼‰åŸæ–‡ï¼šES modules: A cartoon deep-dive, Lin Clark ES modulesï¼ˆESMï¼‰ æ˜¯ JavaScript å®˜æ–¹çš„æ ‡å‡†åŒ–æ¨¡å—ç³»ç»Ÿã€‚ç„¶è€Œï¼Œå®ƒåœ¨æ ‡å‡†åŒ–çš„é“è·¯ä¸Šå·²ç»èŠ±è´¹äº†è¿‘ 10 å¹´çš„æ—¶é—´ã€‚ å¯å–œçš„æ˜¯ï¼Œæ ‡å‡†åŒ–ä¹‹è·¯é©¬ä¸Šå°±è¦å®Œæˆäº†ã€‚ç­‰åˆ° 2018 å¹´ 5 æœˆ Firefox 60 å‘å¸ƒä¹‹åï¼Œæ‰€æœ‰çš„ä¸»æµæµè§ˆå™¨å°±éƒ½æ”¯æŒ ESM äº†ã€‚åŒæ—¶ï¼ŒNode æ¨¡å—å·¥ä½œå°ç»„ä¹Ÿæ­£åœ¨ä¸º Node.js æ·»åŠ  ESM æ”¯æŒã€‚ä¸º WebAssembly æä¾› ESM é›†æˆçš„å·¥ä½œä¹Ÿæ­£åœ¨å¦‚ç«å¦‚è¼çš„è¿›è¡Œã€‚ è®¸å¤š JS å¼€å‘è€…éƒ½çŸ¥é“ï¼Œå¯¹ ESM çš„è®¨è®ºä»å¼€å§‹è‡³ä»Šä¸€ç›´éƒ½æ²¡åœè¿‡ã€‚ä½†æ˜¯å¾ˆå°‘æœ‰äººçœŸæ­£ç†è§£ ESM çš„å·¥ä½œåŸç†ã€‚ ä»Šå¤©ï¼Œè®©æˆ‘ä»¬æ¥æ¢³ç†æ¢³ç† ESM åˆ°åº•è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œä»¥åŠå®ƒè·Ÿå…¶ä»–æ¨¡å—ç³»ç»Ÿä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ ä¸ºä½•è¦æ¨¡å—åŒ–è¯´åˆ° JS ç¼–ç¨‹ï¼Œå…¶å®è¯´çš„å°±æ˜¯å¦‚ä½•ç®¡ç†å˜é‡ã€‚ç¼–ç¨‹çš„è¿‡ç¨‹éƒ½æ˜¯å…³äºå¦‚ä½•ç»™å˜é‡èµ‹å€¼ï¼Œè¦ä¹ˆç›´æ¥èµ‹å€¼ç»™å˜é‡ï¼Œè¦ä¹ˆæ˜¯æŠŠä¸¤ä¸ªå˜é‡ç»“åˆèµ·æ¥ç„¶åå†æŠŠç»“æœèµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡ å› ä¸ºå¤§éƒ¨åˆ†ä»£ç éƒ½æ˜¯å…³äºæ”¹å˜å˜é‡çš„ï¼Œæ‰€ä»¥å¦‚ä½•ç»„ç»‡è¿™äº›å˜é‡å°±ç›´æ¥å½±å“äº†ç¼–ç è´¨é‡ï¼Œä»¥åŠç»´æŠ¤å®ƒä»¬çš„æˆæœ¬ã€‚ å¦‚æœä»£ç ä¸­ä»…æœ‰å°‘é‡çš„å˜é‡ï¼Œé‚£ä¹ˆç»„ç»‡èµ·æ¥å…¶å®æ˜¯å¾ˆç®€å•çš„ã€‚JS æœ¬èº«å°±æä¾›äº†ä¸€ç§æ–¹å¼å¸®ä½ ç»„ç»‡å˜é‡ï¼Œç§°ä¸ºå‡½æ•°ä½œç”¨åŸŸã€‚å› ä¸ºå‡½æ•°ä½œç”¨åŸŸçš„ç¼˜æ•…ï¼Œä¸€ä¸ªå‡½æ•°æ— æ³•è®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä¸­å®šä¹‰çš„å˜é‡ã€‚ è¿™ç§æ–¹å¼æ˜¯å¾ˆæœ‰æ•ˆçš„ã€‚å®ƒä½¿å¾—æˆ‘ä»¬åœ¨å†™ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œåªéœ€è¦è€ƒè™‘å½“å‰å‡½æ•°ï¼Œè€Œä¸å¿…æ‹…å¿ƒå…¶å®ƒå‡½æ•°å¯èƒ½ä¼šæ”¹å˜å½“å‰å‡½æ•°çš„å˜é‡ã€‚ä¸è¿‡ï¼Œå®ƒä¹Ÿæœ‰ä¸å¥½çš„åœ°æ–¹ã€‚å®ƒä¼šè®©æˆ‘ä»¬å¾ˆéš¾åœ¨ä¸åŒå‡½æ•°ä¹‹é—´å…±äº«å˜é‡ã€‚ å¦‚æœæˆ‘ä»¬æƒ³è·Ÿå½“å‰å‡½æ•°ä»¥å¤–çš„å‡½æ•°å…±äº«å˜é‡è¦æ€ä¹ˆåŠå‘¢ï¼Ÿä¸€ç§é€šç”¨çš„åšæ³•æ˜¯æŠŠè¦å…±äº«çš„å˜é‡æå‡åˆ°ä¸Šä¸€å±‚ä½œç”¨åŸŸï¼Œæ¯”å¦‚å…¨å±€ä½œç”¨åŸŸã€‚ åœ¨ jQuery æ—¶ä»£è¿™ç§æå‡åšæ³•ç›¸å½“æ™®éã€‚åœ¨æˆ‘ä»¬åŠ è½½ä»»ä½• jQuery æ’ä»¶ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»ç¡®ä¿ jQuery å·²ç»å­˜åœ¨äºå…¨å±€ä½œç”¨åŸŸã€‚ è¿™ç§åšæ³•ä¹Ÿç¡®å®è¡Œä¹‹æœ‰æ•ˆï¼Œä½†æ˜¯ä¹Ÿå¸¦æ¥äº†ä»¤äººçƒ¦æ¼çš„å½±å“ã€‚é¦–å…ˆï¼Œæ‰€æœ‰çš„ &lt;script&gt; å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºæ’åˆ—ï¼Œå¼€å‘è€…å¿…é¡»éå¸¸è°¨æ…åœ°ç¡®ä¿æ²¡æœ‰ä»»ä½•ä¸€ä¸ªè„šæœ¬æ’åˆ—é”™è¯¯ã€‚ å¦‚æœæ’åˆ—é”™äº†ï¼Œé‚£ä¹ˆåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œåº”ç”¨å°†ä¼šæŠ›å‡ºé”™è¯¯ã€‚å½“å‡½æ•°åœ¨å…¨å±€ä½œç”¨åŸŸå¯»æ‰¾ jQuery å˜é‡æ—¶ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œé‚£ä¹ˆå®ƒå°†ä¼šæŠ›å‡ºå¼‚å¸¸é”™è¯¯ï¼Œå¹¶ä¸”åœæ­¢ç»§ç»­è¿è¡Œã€‚ è¿™åŒæ—¶ä¹Ÿä½¿å¾—ä»£ç çš„åæœŸç»´æŠ¤å˜å¾—å›°éš¾ã€‚å®ƒä¼šä½¿å¾—ç§»é™¤æ—§ä»£ç æˆ–è€…è„šæœ¬æ ‡ç­¾å˜å¾—å……æ»¡ä¸ç¡®å®šæ€§ã€‚ä½ æ ¹æœ¬ä¸çŸ¥é“ç§»é™¤å®ƒä¼šå¸¦æ¥ä»€ä¹ˆå½±å“ã€‚ä»£ç ä¹‹é—´çš„ä¾èµ–æ˜¯ä¸é€æ˜çš„ã€‚ä»»ä½•å‡½æ•°éƒ½å¯èƒ½ä¾èµ–å…¨å±€ä½œç”¨åŸŸä¸­çš„ä»»ä½•å˜é‡ï¼Œä»¥è‡³äºä½ ä¹Ÿä¸çŸ¥é“å“ªä¸ªå‡½æ•°ä¾èµ–å“ªä¸ªè„šæœ¬ã€‚ å…¶æ¬¡ï¼Œç”±äºå˜é‡å­˜åœ¨äºå…¨å±€ä½œç”¨åŸŸï¼Œæ‰€ä»¥ä»»ä½•ä»£ç éƒ½å¯ä»¥æ”¹å˜å®ƒã€‚æ¶æ„çš„ä»£ç å¯èƒ½ä¼šæ•…æ„æ”¹å˜å…¨å±€å˜é‡ï¼Œä»è€Œè®©ä½ çš„ä»£ç åšå‡ºå±é™©è¡Œä¸ºã€‚åˆæˆ–è€…ï¼Œä»£ç å¯èƒ½ä¸æ˜¯æ¶æ„çš„ï¼Œä½†æ˜¯å´æ— æ„åœ°æ”¹å˜äº†ä½ æœŸæœ›çš„å˜é‡ã€‚ã€ æ¨¡å—åŒ–çš„ä½œç”¨æ¨¡å—åŒ–ä¸ºä½ æä¾›äº†ä¸€ç§æ›´å¥½çš„æ–¹å¼æ¥ç»„ç»‡å˜é‡å’Œå‡½æ•°ã€‚ä½ å¯ä»¥æŠŠç›¸å…³çš„å˜é‡å’Œå‡½æ•°æ”¾åœ¨ä¸€èµ·ç»„æˆä¸€ä¸ªæ¨¡å—ã€‚ è¿™ç§ç»„ç»‡æ–¹å¼ä¼šæŠŠå‡½æ•°å’Œå˜é‡æ”¾åœ¨æ¨¡å—ä½œç”¨åŸŸä¸­ã€‚æ¨¡å—ä¸­çš„å‡½æ•°å¯ä»¥é€šè¿‡æ¨¡å—ä½œç”¨åŸŸæ¥å…±äº«å˜é‡ã€‚ ä¸è¿‡ï¼Œä¸å‡½æ•°ä½œç”¨åŸŸä¸åŒçš„æ˜¯ï¼Œæ¨¡å—ä½œç”¨åŸŸè¿˜æä¾›äº†ä¸€ç§æš´éœ²å˜é‡ç»™å…¶ä»–æ¨¡å—ä½¿ç”¨çš„æ–¹å¼ã€‚æ¨¡å—å¯ä»¥æ˜ç¡®åœ°æŒ‡å®šå“ªäº›å˜é‡ã€ç±»æˆ–å‡½æ•°å¯¹å¤–æš´éœ²ã€‚ å¯¹å¤–æš´éœ²çš„è¿‡ç¨‹ç§°ä¸ºå¯¼å‡ºã€‚ä¸€æ—¦å¯¼å‡ºï¼Œå…¶ä»–æ¨¡å—å°±å¯ä»¥æ˜ç¡®åœ°å£°ç§°å®ƒä»¬ä¾èµ–è¿™äº›å¯¼å‡ºçš„å˜é‡ã€ç±»æˆ–è€…å‡½æ•°ã€‚ å› ä¸ºè¿™æ˜¯ä¸€ç§æ˜ç¡®çš„å…³ç³»ï¼Œæ‰€ä»¥ä½ å¯ä»¥å¾ˆç®€å•åœ°è¾¨åˆ«å“ªäº›ä»£ç èƒ½ç§»é™¤ï¼Œå“ªäº›ä¸èƒ½ç§»é™¤ã€‚ æ‹¥æœ‰äº†åœ¨æ¨¡å—ä¹‹é—´å¯¼å‡ºå’Œå¯¼å…¥å˜é‡çš„èƒ½åŠ›ä¹‹åï¼Œä½ å°±å¯ä»¥æŠŠä»£ç åˆ†å‰²æˆæ›´å°çš„ã€å¯ä»¥ç‹¬ç«‹è¿è¡Œåœ°ä»£ç å—äº†ã€‚ç„¶åï¼Œä½ å°±å¯ä»¥åƒæ­ä¹é«˜ç§¯æœ¨ä¸€æ ·ï¼ŒåŸºäºè¿™äº›ä»£ç å—ï¼Œåˆ›å»ºæ‰€æœ‰ä¸åŒç±»å‹çš„åº”ç”¨ã€‚ ç”±äºæ¨¡å—åŒ–æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œæ‰€ä»¥å†å²ä¸Šæ›¾ç»å¤šæ¬¡å°è¯•ä¸º JS æ·»åŠ æ¨¡å—åŒ–çš„åŠŸèƒ½ã€‚ä¸è¿‡æˆªæ­¢åˆ°ç›®å‰ï¼ŒçœŸæ­£å¾—åˆ°å¹¿æ³›ä½¿ç”¨çš„åªæœ‰ä¸¤ä¸ªæ¨¡å—ç³»ç»Ÿã€‚ä¸€ä¸ªæ˜¯ Node.js ä½¿ç”¨çš„ CommonJS ï¼ˆCJSï¼‰ï¼›å¦ä¸€ä¸ªæ˜¯ JS è§„èŒƒçš„æ–°æ¨¡å—ç³»ç»Ÿ EcmaScript modulesï¼ˆESMï¼‰ï¼ŒNode.js ä¹Ÿæ­£åœ¨æ·»åŠ å¯¹ ESM çš„æ”¯æŒã€‚ ä¸‹é¢å°±è®©æˆ‘ä»¬æ¥æ·±å…¥ç†è§£ä¸‹è¿™ä¸ªæ–°çš„æ¨¡å—ç³»ç»Ÿæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ ESM åŸç†å½“ä½ åœ¨ä½¿ç”¨æ¨¡å—è¿›è¡Œå¼€å‘æ—¶ï¼Œå…¶å®æ˜¯åœ¨æ„å»ºä¸€å¼ ä¾èµ–å…³ç³»å›¾ã€‚ä¸åŒæ¨¡å—ä¹‹é—´çš„è¿çº¿å°±ä»£è¡¨äº†ä»£ç ä¸­çš„å¯¼å…¥è¯­å¥ã€‚ æ­£æ˜¯è¿™äº›å¯¼å…¥è¯­å¥å‘Šè¯‰æµè§ˆå™¨æˆ–è€… Node è¯¥å»åŠ è½½å“ªäº›ä»£ç ã€‚æˆ‘ä»¬è¦åšçš„æ˜¯ä¸ºä¾èµ–å…³ç³»å›¾æŒ‡å®šä¸€ä¸ªå…¥å£æ–‡ä»¶ã€‚ä»è¿™ä¸ªå…¥å£æ–‡ä»¶å¼€å§‹ï¼Œæµè§ˆå™¨æˆ–è€… Node å°±ä¼šé¡ºç€å¯¼å…¥è¯­å¥æ‰¾å‡ºæ‰€ä¾èµ–çš„å…¶ä»–ä»£ç æ–‡ä»¶ã€‚ ä½†æ˜¯å‘¢ï¼Œæµè§ˆå™¨å¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨è¿™äº›ä»£ç æ–‡ä»¶ã€‚å®ƒéœ€è¦è§£ææ‰€æœ‰çš„æ–‡ä»¶ï¼Œå¹¶æŠŠå®ƒä»¬å˜æˆä¸€ç§ç§°ä¸ºæ¨¡å—è®°å½•ï¼ˆModule Recordï¼‰çš„æ•°æ®ç»“æ„ã€‚åªæœ‰è¿™æ ·ï¼Œå®ƒæ‰çŸ¥é“ä»£ç æ–‡ä»¶ä¸­åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚ è§£æä¹‹åï¼Œè¿˜éœ€è¦æŠŠæ¨¡å—è®°å½•å˜æˆä¸€ä¸ªæ¨¡å—å®ä¾‹ã€‚æ¨¡å—å®ä¾‹ä¼šæŠŠä»£ç å’ŒçŠ¶æ€ç»“åˆèµ·æ¥ã€‚ æ‰€è°“ä»£ç ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä¸€ç»„æŒ‡ä»¤é›†åˆã€‚å®ƒå°±åƒæ˜¯åˆ¶ä½œæŸæ ·ä¸œè¥¿çš„é…æ–¹ï¼ŒæŒ‡å¯¼ä½ è¯¥å¦‚ä½•åˆ¶ä½œã€‚ä½†æ˜¯å®ƒæœ¬èº«å¹¶ä¸èƒ½è®©ä½ å®Œæˆåˆ¶ä½œã€‚ä½ è¿˜éœ€è¦ä¸€äº›åŸæ–™ï¼Œè¿™æ ·æ‰å¯ä»¥æŒ‰ç…§è¿™äº›æŒ‡ä»¤å®Œæˆåˆ¶ä½œã€‚ æ‰€è°“çŠ¶æ€ï¼Œå®ƒå°±æ˜¯åŸæ–™ã€‚å…·ä½“ç‚¹ï¼ŒçŠ¶æ€æ˜¯å˜é‡åœ¨ä»»ä½•æ—¶å€™çš„çœŸå®å€¼ã€‚å½“ç„¶ï¼Œå˜é‡å®é™…ä¸Šå°±æ˜¯å†…å­˜åœ°å€çš„åˆ«åï¼Œå†…å­˜æ‰æ˜¯æ­£åœ¨å­˜å‚¨å€¼çš„åœ°æ–¹ã€‚ æ‰€ä»¥ï¼Œå¯ä»¥çœ‹å‡ºï¼Œæ¨¡å—å®ä¾‹ä¸­ä»£ç å’ŒçŠ¶æ€çš„ç»“åˆï¼Œå°±æ˜¯æŒ‡ä»¤é›†å’Œå˜é‡å€¼çš„ç»“åˆã€‚ å¯¹äºæ¨¡å—è€Œè¨€ï¼Œæˆ‘ä»¬çœŸæ­£éœ€è¦çš„æ˜¯æ¨¡å—å®ä¾‹ã€‚æ¨¡å—åŠ è½½ä¼šä»å…¥å£æ–‡ä»¶å¼€å§‹ï¼Œæœ€ç»ˆç”Ÿæˆå®Œæ•´çš„æ¨¡å—å®ä¾‹å…³ç³»å›¾ã€‚ å¯¹äº ESM ï¼Œè¿™ä¸ªè¿‡ç¨‹åŒ…å«ä¸‰ä¸ªé˜¶æ®µï¼š æ„å»ºï¼šæŸ¥æ‰¾ï¼Œä¸‹è½½ï¼Œç„¶åæŠŠæ‰€æœ‰æ–‡ä»¶è§£ææˆæ¨¡å—è®°å½•ã€‚ å®ä¾‹åŒ–ï¼šä¸ºæ‰€æœ‰æ¨¡å—åˆ†é…å†…å­˜ç©ºé—´ï¼ˆæ­¤åˆ»è¿˜æ²¡æœ‰å¡«å……å€¼ï¼‰ï¼Œç„¶åä¾ç…§å¯¼å‡ºã€å¯¼å…¥è¯­å¥æŠŠæ¨¡å—æŒ‡å‘å¯¹åº”çš„å†…å­˜åœ°å€ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºé“¾æ¥ï¼ˆLinkingï¼‰ã€‚ è¿è¡Œï¼šè¿è¡Œä»£ç ï¼Œä»è€ŒæŠŠå†…å­˜ç©ºé—´å¡«å……ä¸ºçœŸå®å€¼ã€‚ å¤§å®¶éƒ½è¯´ ESM æ˜¯å¼‚æ­¥çš„ã€‚å› ä¸ºå®ƒæŠŠæ•´ä¸ªè¿‡ç¨‹åˆ†ä¸ºäº†ä¸‰ä¸ªä¸åŒçš„é˜¶æ®µï¼šåŠ è½½ã€å®ä¾‹åŒ–å’Œè¿è¡Œï¼Œå¹¶ä¸”è¿™ä¸‰ä¸ªé˜¶æ®µæ˜¯å¯ä»¥ç‹¬ç«‹è¿›è¡Œçš„ã€‚ è¿™æ„å‘³ç€ï¼ŒESM è§„èŒƒç¡®å®å¼•å…¥äº†ä¸€ç§å¼‚æ­¥æ–¹å¼ï¼Œä¸”è¿™ç§å¼‚æ­¥æ–¹å¼åœ¨ CJS ä¸­æ˜¯æ²¡æœ‰çš„ã€‚åé¢æˆ‘ä»¬ä¼šè¯¦ç»†è¯´åˆ°ä¸ºä»€ä¹ˆï¼Œç„¶è€Œåœ¨ CJS ä¸­ï¼Œä¸€ä¸ªæ¨¡å—åŠå…¶ä¾èµ–çš„åŠ è½½ã€å®ä¾‹åŒ–å’Œè¿è¡Œæ˜¯ä¸€èµ·é¡ºåºæ‰§è¡Œçš„ï¼Œä¸­é—´æ²¡æœ‰ä»»ä½•é—´æ–­ã€‚ ä¸è¿‡ï¼Œè¿™ä¸‰ä¸ªé˜¶æ®µæœ¬èº«æ˜¯æ²¡å¿…è¦å¼‚æ­¥åŒ–ã€‚å®ƒä»¬å¯ä»¥åŒæ­¥æ‰§è¡Œï¼Œè¿™å–å†³äºå®ƒæ˜¯ç”±è°æ¥åŠ è½½çš„ã€‚å› ä¸º ESM æ ‡å‡†å¹¶æ²¡æœ‰æ˜ç¡®è§„èŒƒæ‰€æœ‰ç›¸å…³å†…å®¹ã€‚å®é™…ä¸Šï¼Œè¿™äº›å·¥ä½œåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå¹¶ä¸”åˆ†åˆ«æ˜¯ç”±ä¸åŒçš„æ ‡å‡†æ‰€è§„èŒƒçš„ã€‚ å…¶ä¸­ï¼ŒESM æ ‡å‡† è§„èŒƒäº†å¦‚ä½•æŠŠæ–‡ä»¶è§£æä¸ºæ¨¡å—è®°å½•ï¼Œå¦‚ä½•å®ä¾‹åŒ–å’Œå¦‚ä½•è¿è¡Œæ¨¡å—ã€‚ä½†æ˜¯å®ƒæ²¡æœ‰è§„èŒƒå¦‚ä½•è·å–æ–‡ä»¶ã€‚ æ–‡ä»¶æ˜¯ç”±åŠ è½½å™¨æ¥æå–çš„ï¼Œè€ŒåŠ è½½å™¨ç”±å¦ä¸€ä¸ªä¸åŒçš„æ ‡å‡†æ‰€è§„èŒƒã€‚å¯¹äºæµè§ˆå™¨æ¥è¯´ï¼Œè¿™ä¸ªæ ‡å‡†å°±æ˜¯ HTMLã€‚ä½†æ˜¯ä½ è¿˜å¯ä»¥æ ¹æ®æ‰€ä½¿ç”¨çš„å¹³å°ä½¿ç”¨ä¸åŒçš„åŠ è½½å™¨ã€‚ åŠ è½½å™¨ä¹ŸåŒæ—¶æ§åˆ¶ç€å¦‚ä½•åŠ è½½æ¨¡å—ã€‚å®ƒä¼šè°ƒç”¨ ESM çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬ ParseModuleã€Module.Instantiate å’Œ Module.Evaluate ã€‚å®ƒå°±åƒæ˜¯æ§åˆ¶ç€ JS å¼•æ“çš„æœ¨å¶ã€‚ ä¸‹é¢æˆ‘ä»¬å°†æ›´åŠ è¯¦ç»†åœ°è¯´æ˜æ¯ä¸€æ­¥ã€‚ æ„å»ºå¯¹äºæ¯ä¸ªæ¨¡å—ï¼Œåœ¨æ„å»ºé˜¶æ®µä¼šåšä¸‰ä¸ªå¤„ç†ï¼š ç¡®å®šè¦ä»å“ªé‡Œä¸‹è½½åŒ…å«è¯¥æ¨¡å—çš„æ–‡ä»¶ï¼Œä¹Ÿç§°ä¸ºæ¨¡å—å®šä½ï¼ˆModule Resolutionï¼‰ æå–æ–‡ä»¶ï¼Œé€šè¿‡ä» URL ä¸‹è½½æˆ–è€…ä»æ–‡ä»¶ç³»ç»ŸåŠ è½½ è§£ææ–‡ä»¶ä¸ºæ¨¡å—è®°å½• 1.ä¸‹è½½æ¨¡å—åŠ è½½å™¨è´Ÿè´£å®šä½æ–‡ä»¶å¹¶ä¸”æå–ã€‚é¦–å…ˆï¼Œå®ƒéœ€è¦æ‰¾åˆ°å…¥å£æ–‡ä»¶ã€‚åœ¨ HTML ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ &lt;script&gt; æ ‡ç­¾æ¥å‘Šè¯‰åŠ è½½å™¨ã€‚ ä½†æ˜¯ï¼ŒåŠ è½½å™¨è¦å¦‚ä½•å®šä½ main.js ç›´æ¥ä¾èµ–çš„æ¨¡å—å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™å¯¼å…¥è¯­å¥å°±æ´¾ä¸Šç”¨åœºäº†ã€‚å¯¼å…¥è¯­å¥ä¸­æœ‰ä¸€éƒ¨åˆ†ç§°ä¸ºæ¨¡å—å®šä½ç¬¦ï¼ˆModule Specifierï¼‰ï¼Œå®ƒä¼šå‘Šè¯‰åŠ è½½å™¨å»å“ªå®šä½æ¨¡å—ã€‚ å¯¹äºæ¨¡å—å®šä½ç¬¦ï¼Œæœ‰ä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯ï¼šå®ƒä»¬åœ¨æµè§ˆå™¨å’Œ Node ä¸­ä¼šæœ‰ä¸åŒçš„å¤„ç†ã€‚æ¯ä¸ªå¹³å°éƒ½æœ‰è‡ªå·±çš„ä¸€å¥—æ–¹å¼æ¥è§£ææ¨¡å—å®šä½ç¬¦ã€‚è¿™äº›æ–¹å¼ç§°ä¸ºæ¨¡å—å®šä½ç®—æ³•ï¼Œä¸åŒçš„å¹³å°ä¼šä½¿ç”¨ä¸åŒçš„æ¨¡å—å®šä½ç®—æ³•ã€‚å½“å‰ï¼Œä¸€äº›åœ¨ Node ä¸­èƒ½å·¥ä½œæ¨¡å—å®šä½ç¬¦å¹¶ä¸èƒ½åœ¨æµè§ˆå™¨ä¸­å·¥ä½œï¼Œä½†æ˜¯å·²ç»æœ‰ä¸€é¡¹å·¥ä½œæ­£åœ¨è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ åœ¨è¿™ä¸ªé—®é¢˜è¢«è§£å†³ä¹‹å‰ï¼Œæµè§ˆå™¨åªæ¥å— URL ä½œä¸ºæ¨¡å—å®šä½ç¬¦ã€‚å®ƒä»¬ä¼šä» URL åŠ è½½æ¨¡å—æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œè¿™å¹¶ä¸æ˜¯åœ¨æ•´ä¸ªå…³ç³»å›¾ä¸ŠåŒæ—¶å‘ç”Ÿçš„ã€‚å› ä¸ºåœ¨è§£æå®Œè¿™ä¸ªæ¨¡å—ä¹‹å‰ï¼Œä½ æ ¹æœ¬ä¸çŸ¥é“å®ƒä¾èµ–å“ªäº›æ¨¡å—ã€‚è€Œä¸”åœ¨å®ƒä¸‹è½½å®Œæˆä¹‹å‰ï¼Œä½ ä¹Ÿæ— æ³•è§£æå®ƒã€‚ è¿™å°±æ„å‘³ç€ï¼Œæˆ‘ä»¬å¿…é¡»ä¸€å±‚å±‚éå†ä¾èµ–æ ‘ï¼Œå…ˆè§£ææ–‡ä»¶ï¼Œç„¶åæ‰¾å‡ºä¾èµ–ï¼Œæœ€ååˆå®šä½å¹¶åŠ è½½è¿™äº›ä¾èµ–ï¼Œå¦‚æ­¤å¾€å¤ã€‚ å¦‚æœä¸»çº¿ç¨‹æ­£åœ¨ç­‰å¾…è¿™äº›æ¨¡å—æ–‡ä»¶ä¸‹è½½å®Œæˆï¼Œè®¸å¤šå…¶ä»–ä»»åŠ¡å°†ä¼šå †ç§¯åœ¨ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œé€ æˆé˜»å¡ã€‚è¿™æ˜¯å› ä¸ºåœ¨æµè§ˆå™¨ä¸­ï¼Œä¸‹è½½ä¼šè€—è´¹å¤§é‡çš„æ—¶é—´ã€‚ è€Œé˜»å¡ä¸»çº¿ç¨‹ä¼šä½¿å¾—åº”ç”¨å˜å¾—å¡é¡¿ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚è¿™æ˜¯ ESM æ ‡å‡†æŠŠç®—æ³•åˆ†æˆå¤šä¸ªé˜¶æ®µçš„åŸå› ä¹‹ä¸€ã€‚å°†æ„å»ºåˆ’åˆ†ä¸ºä¸€ä¸ªç‹¬ç«‹é˜¶æ®µåï¼Œæµè§ˆå™¨å¯ä»¥åœ¨è¿›å…¥åŒæ­¥çš„å®ä¾‹åŒ–è¿‡ç¨‹ä¹‹å‰ä¸‹è½½æ–‡ä»¶ç„¶åç†è§£æ¨¡å—å…³ç³»å›¾ã€‚ ESM å’Œ CJS ä¹‹é—´æœ€ä¸»è¦çš„åŒºåˆ«ä¹‹ä¸€å°±æ˜¯ï¼ŒESM æŠŠç®—æ³•åŒ–ä¸ºä¸ºå¤šä¸ªé˜¶æ®µã€‚ CJS ä½¿ç”¨ä¸åŒçš„ç®—æ³•æ˜¯å› ä¸ºå®ƒä»æ–‡ä»¶ç³»ç»ŸåŠ è½½æ–‡ä»¶ï¼Œè¿™è€—è´¹çš„æ—¶é—´è¿œè¿œå°äºä»ç½‘ç»œä¸Šä¸‹è½½ã€‚å› æ­¤ Node åœ¨åŠ è½½æ–‡ä»¶çš„æ—¶å€™å¯ä»¥é˜»å¡ä¸»çº¿ç¨‹ï¼Œè€Œä¸é€ æˆå¤ªå¤§å½±å“ã€‚è€Œä¸”æ—¢ç„¶æ–‡ä»¶å·²ç»åŠ è½½å®Œæˆäº†ï¼Œé‚£ä¹ˆå®ƒå°±å¯ä»¥ç›´æ¥è¿›è¡Œå®ä¾‹åŒ–å’Œè¿è¡Œã€‚æ‰€ä»¥åœ¨ CJS ä¸­å®ä¾‹åŒ–å’Œè¿è¡Œå¹¶ä¸æ˜¯ä¸¤ä¸ªç›¸äº’ç‹¬ç«‹çš„é˜¶æ®µã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œä½ å¯ä»¥åœ¨è¿”å›æ¨¡å—å®ä¾‹ä¹‹å‰ï¼Œé¡ºç€æ•´é¢—ä¾èµ–æ ‘å»é€ä¸€åŠ è½½ã€å®ä¾‹åŒ–å’Œè¿è¡Œæ¯ä¸€ä¸ªä¾èµ–ã€‚ CJS çš„æ–¹å¼å¯¹ ESM ä¹Ÿæœ‰ä¸€äº›å¯å‘ï¼Œè¿™ä¸ªåé¢ä¼šè§£é‡Šã€‚å…¶ä¸­ä¸€ä¸ªå°±æ˜¯ï¼Œåœ¨ Node çš„ CJS ä¸­ï¼Œä½ å¯ä»¥åœ¨æ¨¡å—å®šä½ç¬¦ä¸­ä½¿ç”¨å˜é‡ã€‚å› ä¸ºå·²ç»æ‰§è¡Œäº† require ä¹‹å‰çš„ä»£ç ï¼Œæ‰€ä»¥æ¨¡å—å®šä½ç¬¦ä¸­çš„å˜é‡æ­¤åˆ»æ˜¯æœ‰å€¼çš„ï¼Œè¿™æ ·å°±å¯ä»¥è¿›è¡Œæ¨¡å—å®šä½çš„å¤„ç†äº†ã€‚ ä½†æ˜¯å¯¹äº ESMï¼Œåœ¨è¿è¡Œä»»ä½•ä»£ç ä¹‹å‰ï¼Œä½ é¦–å…ˆéœ€è¦å»ºç«‹æ•´ä¸ªæ¨¡å—ä¾èµ–çš„å…³ç³»å›¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå»ºç«‹å…³ç³»å›¾æ—¶å˜é‡æ˜¯è¿˜æ²¡æœ‰å€¼çš„ï¼Œå› ä¸ºä»£ç éƒ½è¿˜æ²¡è¿è¡Œã€‚ ä¸è¿‡å‘¢ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ç¡®å®éœ€è¦åœ¨æ¨¡å—å®šä½ç¬¦ä¸­ä½¿ç”¨å˜é‡ã€‚æ¯”å¦‚ï¼Œä½ å¯èƒ½éœ€è¦æ ¹æ®å½“å‰çš„çŠ¶å†µåŠ è½½ä¸åŒçš„ä¾èµ–ã€‚ ä¸ºäº†åœ¨ ESM ä¸­å®ç°è¿™ç§æ–¹å¼ï¼Œäººä»¬å·²ç»æå‡ºäº†ä¸€ä¸ªåŠ¨æ€å¯¼å…¥ææ¡ˆã€‚è¯¥ææ¡ˆå…è®¸ä½ å¯ä»¥ä½¿ç”¨ç±»ä¼¼ import(\\${path}/foo.js)çš„å¯¼å…¥è¯­å¥ã€‚ è¿™ç§æ–¹å¼å®é™…ä¸Šæ˜¯æŠŠä½¿ç”¨ import() åŠ è½½çš„æ–‡ä»¶å½“æˆäº†ä¸€ä¸ªå…¥å£æ–‡ä»¶ã€‚åŠ¨æ€å¯¼å…¥çš„æ¨¡å—ä¼šå¼€å¯ä¸€ä¸ªå…¨æ–°çš„ç‹¬ç«‹ä¾èµ–å…³ç³»æ ‘ã€‚ ä¸è¿‡æœ‰ä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸¤æ£µä¾èµ–å…³ç³»æ ‘å…±æœ‰çš„æ¨¡å—ä¼šå…±äº«åŒä¸€ä¸ªæ¨¡å—å®ä¾‹ã€‚è¿™æ˜¯å› ä¸ºåŠ è½½å™¨ä¼šç¼“å­˜æ¨¡å—å®ä¾‹ã€‚åœ¨ç‰¹å®šçš„å…¨å±€ä½œç”¨åŸŸä¸­ï¼Œæ¯ä¸ªæ¨¡å—åªä¼šæœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„æ¨¡å—å®ä¾‹ã€‚ è¿™ç§æ–¹å¼æœ‰åŠ©äºæé«˜ JS å¼•æ“çš„æ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ¨¡å—æ–‡ä»¶åªä¼šè¢«ä¸‹è½½ä¸€æ¬¡ï¼Œå³ä½¿æœ‰å¤šä¸ªæ¨¡å—ä¾èµ–å®ƒã€‚è¿™ä¹Ÿæ˜¯ç¼“å­˜æ¨¡å—çš„åŸå› ä¹‹ä¸€ï¼Œåé¢è¯´åˆ°è¿è¡Œçš„æ—¶å€™ä¼šä»‹ç»å¦ä¸€ä¸ªåŸå› ã€‚ åŠ è½½å™¨ä½¿ç”¨æ¨¡å—æ˜ å°„ï¼ˆModule Mapï¼‰æ¥ç®¡ç†ç¼“å­˜ã€‚æ¯ä¸ªå…¨å±€ä½œç”¨åŸŸéƒ½åœ¨ä¸€ä¸ªå•ç‹¬çš„æ¨¡å—æ˜ å°„ä¸­è·Ÿè¸ªå…¶æ¨¡å—ã€‚ å½“åŠ è½½å™¨è¦ä»ä¸€ä¸ª URL åŠ è½½æ–‡ä»¶æ—¶ï¼Œå®ƒä¼šæŠŠ URL è®°å½•åˆ°æ¨¡å—æ˜ å°„ä¸­ï¼Œå¹¶æŠŠå®ƒæ ‡è®°ä¸ºæ­£åœ¨ä¸‹è½½çš„æ–‡ä»¶ã€‚ç„¶åå®ƒä¼šå‘å‡ºè¿™ä¸ªæ–‡ä»¶è¯·æ±‚å¹¶ç»§ç»­å¼€å§‹è·å–ä¸‹ä¸€ä¸ªæ–‡ä»¶ã€‚ å½“å…¶ä»–æ¨¡å—ä¹Ÿä¾èµ–è¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼ŸåŠ è½½å™¨ä¼šæŸ¥æ‰¾æ¨¡å—æ˜ å°„ä¸­çš„æ¯ä¸€ä¸ª URL ã€‚å¦‚æœå‘ç° URL çš„çŠ¶æ€ä¸ºæ­£åœ¨ä¸‹è½½ï¼Œåˆ™ä¼šè·³è¿‡è¯¥ URL ï¼Œç„¶åå¼€å§‹ä¸‹ä¸€ä¸ªä¾èµ–çš„å¤„ç†ã€‚ ä¸è¿‡ï¼Œæ¨¡å—æ˜ å°„çš„ä½œç”¨å¹¶ä¸ä»…ä»…æ˜¯è®°å½•å“ªäº›æ–‡ä»¶å·²ç»ä¸‹è½½ã€‚ä¸‹é¢æˆ‘ä»¬å°†ä¼šçœ‹åˆ°ï¼Œæ¨¡å—æ˜ å°„ä¹Ÿå¯ä»¥ä½œä¸ºæ¨¡å—çš„ç¼“å­˜ã€‚ 2.è§£ææ¨¡å—è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»æ‹¿åˆ°äº†æ¨¡å—æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦æŠŠå®ƒè§£æä¸ºæ¨¡å—è®°å½•ã€‚è¿™æœ‰åŠ©äºæµè§ˆå™¨ç†è§£æ¨¡å—çš„ä¸åŒéƒ¨åˆ†ã€‚ ä¸€æ—¦æ¨¡å—è®°å½•åˆ›å»ºå®Œæˆï¼Œå®ƒå°±ä¼šè¢«è®°å½•åœ¨æ¨¡å—æ˜ å°„ä¸­ã€‚æ‰€ä»¥ï¼Œåç»­ä»»ä½•æ—¶å€™å†æ¬¡è¯·æ±‚è¿™ä¸ªæ¨¡å—æ—¶ï¼ŒåŠ è½½å™¨å°±å¯ä»¥ç›´æ¥ä»æ¨¡å—æ˜ å°„ä¸­è·å–è¯¥æ¨¡å—ã€‚ è§£æè¿‡ç¨‹ä¸­æœ‰ä¸€ä¸ªçœ‹ä¼¼å¾®ä¸è¶³é“çš„ç»†èŠ‚ï¼Œä½†æ˜¯å®é™…é€ æˆçš„å½±å“å´å¾ˆå¤§ã€‚é‚£å°±æ˜¯æ‰€æœ‰çš„æ¨¡å—éƒ½æŒ‰ç…§ä¸¥æ ¼æ¨¡å¼æ¥è§£æçš„ã€‚ä¹Ÿè¿˜æœ‰å…¶ä»–çš„å°ç»†èŠ‚ï¼Œæ¯”å¦‚ï¼Œå…³é”®å­— await åœ¨æ¨¡å—çš„æœ€é¡¶å±‚æ˜¯ä¿ç•™å­—ï¼Œ this çš„å€¼ä¸º undefindedã€‚ è¿™ç§ä¸åŒçš„è§£ææ–¹å¼ç§°ä¸ºè§£æç›®æ ‡ï¼ˆParse Goalï¼‰ã€‚å¦‚æœæŒ‰ç…§ä¸åŒçš„è§£æç›®æ ‡æ¥è§£æç›¸åŒçš„æ–‡ä»¶ï¼Œä¼šå¾—åˆ°ä¸åŒçš„ç»“æœã€‚å› æ­¤ï¼Œåœ¨è§£ææ–‡ä»¶ä¹‹å‰ï¼Œå¿…é¡»æ¸…æ¥šåœ°çŸ¥é“æ‰€è§£æçš„æ–‡ä»¶ç±»å‹æ˜¯ä»€ä¹ˆï¼Œä¸ç®¡å®ƒæ˜¯ä¸æ˜¯ä¸€ä¸ªæ¨¡å—æ–‡ä»¶ã€‚ åœ¨æµè§ˆå™¨ä¸­ï¼ŒçŸ¥é“æ–‡ä»¶ç±»å‹æ˜¯å¾ˆç®€å•çš„ã€‚åªéœ€è¦åœ¨ &lt;script&gt; è„šæœ¬ä¸­æ·»åŠ  type=&quot;module&quot; å±æ€§å³å¯ã€‚è¿™å‘Šè¯‰æµè§ˆå™¨è¿™ä¸ªæ–‡ä»¶éœ€è¦è¢«è§£æä¸ºä¸€ä¸ªæ¨¡å—ã€‚è€Œä¸”ï¼Œå› ä¸ºåªæœ‰æ¨¡å—æ‰èƒ½è¢«å¯¼å…¥ï¼Œæ‰€ä»¥æµè§ˆå™¨ä»¥æ­¤æ¨æµ‹æ‰€æœ‰çš„å¯¼å…¥ä¹Ÿéƒ½æ˜¯æ¨¡å—æ–‡ä»¶ã€‚ ä¸è¿‡åœ¨ Node ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸ä½¿ç”¨ HTML æ ‡ç­¾ï¼Œæ‰€ä»¥ä¹Ÿæ²¡åŠæ³•é€šè¿‡ type å±æ€§æ¥è¾¨åˆ«ã€‚ç¤¾åŒºæå‡ºä¸€ç§è§£å†³åŠæ³•æ˜¯ä½¿ç”¨ .mjs æ‹“å±•åã€‚ä½¿ç”¨è¯¥æ‹“å±•åä¼šå‘Šè¯‰ Node è¯´â€œè¿™æ˜¯ä¸ªæ¨¡å—æ–‡ä»¶â€ã€‚ä½ ä¼šçœ‹åˆ°å¤§å®¶æ­£åœ¨è®¨è®ºæŠŠè¿™ä¸ªä½œä¸ºè§£æç›®æ ‡ã€‚ä¸è¿‡è®¨è®ºä»åœ¨ç»§ç»­ï¼Œæ‰€ä»¥ç›®å‰ä»ä¸æ˜ç¡® Node ç¤¾åŒºæœ€ç»ˆä¼šé‡‡ç”¨å“ªç§æ–¹å¼ã€‚ æ— è®ºæœ€ç»ˆä½¿ç”¨å“ªç§æ–¹å¼ï¼ŒåŠ è½½å™¨éƒ½ä¼šå†³å®šæ˜¯å¦æŠŠä¸€ä¸ªæ–‡ä»¶ä½œä¸ºæ¨¡å—æ¥è§£æã€‚å¦‚æœæ˜¯æ¨¡å—ï¼Œè€Œä¸”åŒ…å«å¯¼å…¥è¯­å¥ï¼Œé‚£å®ƒä¼šé‡æ–°å¼€å§‹å¤„ç†ç›´è‡³æ‰€æœ‰çš„æ–‡ä»¶éƒ½å·²æå–å’Œè§£æã€‚ åˆ°è¿™é‡Œï¼Œæ„å»ºé˜¶æ®µå·®ä¸å¤šå°±å®Œæˆäº†ã€‚åœ¨åŠ è½½è¿‡ç¨‹å¤„ç†å®Œæˆåï¼Œä½ å·²ç»ä»æœ€å¼€å§‹åªæœ‰ä¸€ä¸ªå…¥å£æ–‡ä»¶ï¼Œåˆ°ç°åœ¨å¾—åˆ°äº†ä¸€å †æ¨¡å—è®°å½•ã€‚ ä¸‹ä¸€æ­¥ä¼šå®ä¾‹åŒ–è¿™äº›æ¨¡å—å¹¶ä¸”æŠŠæ‰€æœ‰çš„å®ä¾‹é“¾æ¥èµ·æ¥ã€‚ å®ä¾‹åŒ–æ­£å¦‚å‰æ–‡æ‰€è¿°ï¼Œä¸€ä¸ªæ¨¡å—å®ä¾‹ç»“åˆäº†ä»£ç å’ŒçŠ¶æ€ã€‚çŠ¶æ€å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥å®ä¾‹åŒ–çš„è¿‡ç¨‹å°±æ˜¯æŠŠæ‰€æœ‰å€¼å†™å…¥å†…å­˜çš„è¿‡ç¨‹ã€‚ é¦–å…ˆï¼ŒJS å¼•æ“ä¼šåˆ›å»ºä¸€ä¸ªæ¨¡å—ç¯å¢ƒè®°å½•ï¼ˆModule Environment Recordï¼‰ã€‚å®ƒç®¡ç†ç€æ¨¡å—è®°å½•çš„æ‰€æœ‰å˜é‡ã€‚ç„¶åï¼Œå¼•æ“ä¼šæ‰¾å‡ºå¤šæœ‰å¯¼å‡ºåœ¨å†…å­˜ä¸­çš„åœ°å€ã€‚æ¨¡å—ç¯å¢ƒè®°å½•ä¼šè·Ÿè¸ªæ¯ä¸ªå¯¼å‡ºå¯¹åº”äºå“ªä¸ªå†…å­˜åœ°å€ã€‚ è¿™äº›å†…å­˜åœ°å€æ­¤æ—¶è¿˜æ²¡æœ‰å€¼ï¼Œåªæœ‰ç­‰åˆ°è¿è¡Œåå®ƒä»¬æ‰ä¼šè¢«å¡«å……ä¸Šå®é™…å€¼ã€‚æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼Œæ‰€æœ‰å¯¼å‡ºçš„å‡½æ•°å£°æ˜éƒ½åœ¨è¿™ä¸ªé˜¶æ®µåˆå§‹åŒ–ï¼Œè¿™ä¼šä½¿å¾—åé¢çš„è¿è¡Œé˜¶æ®µå˜å¾—æ›´åŠ ç®€å•ã€‚ ä¸ºäº†å®ä¾‹åŒ–æ¨¡å—å…³ç³»å›¾ï¼Œå¼•æ“ä¼šé‡‡ç”¨æ·±åº¦ä¼˜å…ˆçš„ååºéå†æ–¹å¼ã€‚å³ï¼Œå®ƒä¼šé¡ºç€å…³ç³»å›¾åˆ°è¾¾æœ€åº•ç«¯æ²¡æœ‰ä»»ä½•ä¾èµ–çš„æ¨¡å—ï¼Œç„¶åè®¾ç½®å®ƒä»¬çš„å¯¼å‡ºã€‚ æœ€ç»ˆï¼Œå¼•æ“ä¼šæŠŠæ¨¡å—ä¸‹çš„æ‰€æœ‰ä¾èµ–å¯¼å‡ºé“¾æ¥åˆ°å½“å‰æ¨¡å—ã€‚ç„¶åå›åˆ°ä¸Šä¸€å±‚æŠŠæ¨¡å—çš„å¯¼å…¥é“¾æ¥èµ·æ¥ã€‚ è¿™ä¸ªè¿‡ç¨‹è·Ÿ CJS æ˜¯ä¸åŒçš„ã€‚åœ¨ CJS ä¸­ï¼Œæ•´ä¸ªå¯¼å‡ºå¯¹è±¡åœ¨å¯¼å‡ºæ—¶éƒ½æ˜¯å€¼æ‹·è´ã€‚å³ï¼Œæ‰€æœ‰çš„å¯¼å‡ºå€¼éƒ½æ˜¯æ‹·è´å€¼ï¼Œè€Œä¸æ˜¯å¼•ç”¨ã€‚æ‰€ä»¥ï¼Œå¦‚æœå¯¼å‡ºæ¨¡å—å†…å¯¼å‡ºçš„å€¼æ”¹å˜äº†ï¼Œå¯¼å…¥æ¨¡å—ä¸­å¯¼å…¥çš„å€¼ä¹Ÿä¸ä¼šæ”¹å˜ã€‚ ç›¸åï¼ŒESM åˆ™ä½¿ç”¨ç§°ä¸ºå®æ—¶ç»‘å®šï¼ˆLive Bindingï¼‰çš„æ–¹å¼ã€‚å¯¼å‡ºå’Œå¯¼å…¥çš„æ¨¡å—éƒ½æŒ‡å‘ç›¸åŒçš„å†…å­˜åœ°å€ï¼ˆå³å€¼å¼•ç”¨ï¼‰ã€‚æ‰€ä»¥ï¼Œå½“å¯¼å‡ºæ¨¡å—å†…å¯¼å‡ºçš„å€¼æ”¹å˜åï¼Œå¯¼å…¥æ¨¡å—ä¸­çš„å€¼ä¹Ÿå®æ—¶æ”¹å˜äº†ã€‚ æ¨¡å—å¯¼å‡ºçš„å€¼åœ¨ä»»ä½•æ—¶å€™éƒ½å¯ä»¥èƒ½å‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯å¯¼å…¥æ¨¡å—å´ä¸èƒ½æ”¹å˜å®ƒæ‰€å¯¼å…¥çš„å€¼ï¼Œå› ä¸ºå®ƒæ˜¯åªè¯»çš„ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœä¸€ä¸ªæ¨¡å—å¯¼å…¥äº†ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒåªèƒ½æ”¹å˜è¯¥å¯¹è±¡çš„å±æ€§ï¼Œè€Œä¸èƒ½æ”¹å˜å¯¹è±¡æœ¬èº«ã€‚ ESM é‡‡ç”¨è¿™ç§å®æ—¶ç»‘å®šçš„åŸå› æ˜¯ï¼Œå¼•æ“å¯ä»¥åœ¨ä¸è¿è¡Œä»»ä½•æ¨¡å—ä»£ç çš„æƒ…å†µä¸‹å®Œæˆé“¾æ¥ã€‚åé¢ä¼šè§£é‡Šåˆ°ï¼Œè¿™å¯¹è§£å†³è¿è¡Œé˜¶æ®µçš„å¾ªç¯ä¾èµ–é—®é¢˜ä¹Ÿæ˜¯æœ‰å¸®åŠ©çš„ã€‚ å®ä¾‹åŒ–é˜¶æ®µå®Œæˆåï¼Œæˆ‘ä»¬å¾—åˆ°äº†æ‰€æœ‰æ¨¡å—å®ä¾‹ï¼Œä»¥åŠå·²å®Œæˆé“¾æ¥çš„å¯¼å…¥ã€å¯¼å‡ºå€¼ã€‚ ç°åœ¨æˆ‘ä»¬å¯ä»¥å¼€å§‹è¿è¡Œä»£ç å¹¶ä¸”å¾€å†…å­˜ç©ºé—´å†…å¡«å……å€¼äº†ã€‚ è¿è¡Œæœ€åä¸€æ­¥æ˜¯å¾€å·²ç”³è¯·å¥½çš„å†…å­˜ç©ºé—´ä¸­å¡«å…¥çœŸå®å€¼ã€‚JS å¼•æ“é€šè¿‡è¿è¡Œé¡¶å±‚ä»£ç ï¼ˆå‡½æ•°å¤–çš„ä»£ç ï¼‰æ¥å®Œæˆå¡«å……ã€‚ é™¤äº†å¡«å……å€¼ä»¥å¤–ï¼Œè¿è¡Œä»£ç ä¹Ÿä¼šå¼•å‘ä¸€äº›å‰¯ä½œç”¨ï¼ˆSide Effectï¼‰ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ¨¡å—å¯èƒ½ä¼šå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚ å› ä¸ºè¿™äº›æ½œåœ¨å‰¯ä½œç”¨çš„å­˜åœ¨ï¼Œæ‰€ä»¥æ¨¡å—ä»£ç åªèƒ½è¿è¡Œä¸€æ¬¡ã€‚å‰é¢æˆ‘ä»¬çœ‹åˆ°ï¼Œå®ä¾‹åŒ–é˜¶æ®µä¸­å‘ç”Ÿçš„é“¾æ¥å¯ä»¥å¤šæ¬¡è¿›è¡Œï¼Œå¹¶ä¸”æ¯æ¬¡çš„ç»“æœéƒ½ä¸€æ ·ã€‚ä½†æ˜¯ï¼Œå¦‚æœè¿è¡Œé˜¶æ®µè¿›è¡Œå¤šæ¬¡çš„è¯ï¼Œåˆ™å¯èƒ½ä¼šæ¯æ¬¡éƒ½å¾—åˆ°ä¸ä¸€æ ·çš„ç»“æœã€‚ è¿™æ­£æ˜¯ä¸ºä»€ä¹ˆä¼šä½¿ç”¨æ¨¡å—æ˜ å°„çš„åŸå› ä¹‹ä¸€ã€‚æ¨¡å—æ˜ å°„ä¼šä»¥ URL ä¸ºç´¢å¼•æ¥ç¼“å­˜æ¨¡å—ï¼Œä»¥ç¡®ä¿æ¯ä¸ªæ¨¡å—åªæœ‰ä¸€ä¸ªæ¨¡å—è®°å½•ã€‚è¿™ä¿è¯äº†æ¯ä¸ªæ¨¡å—åªä¼šè¿è¡Œä¸€æ¬¡ã€‚è·Ÿå®ä¾‹åŒ–ä¸€æ ·ï¼Œè¿è¡Œé˜¶æ®µä¹Ÿé‡‡ç”¨æ·±åº¦ä¼˜å…ˆçš„ååºéå†æ–¹å¼ã€‚ é‚£å¯¹äºå‰é¢è°ˆåˆ°çš„å¾ªç¯ä¾èµ–ä¼šæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ å¾ªç¯ä¾èµ–ä¼šä½¿å¾—ä¾èµ–å…³ç³»å›¾ä¸­å‡ºç°ä¸€ä¸ªä¾èµ–ç¯ï¼Œå³ä½ ä¾èµ–æˆ‘ï¼Œæˆ‘ä¹Ÿä¾èµ–ä½ ã€‚é€šå¸¸æ¥è¯´ï¼Œè¿™ä¸ªç¯ä¼šéå¸¸å¤§ã€‚ä¸è¿‡ï¼Œä¸ºäº†è§£é‡Šå¥½è¿™ä¸ªé—®é¢˜ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸¾ä¾‹ä¸€ä¸ªç®€å•çš„å¾ªç¯ä¾èµ–ã€‚ counter æ¨¡å—ä¼šè¯•å›¾å»è®¿é—®å¯¼å‡ºå¯¹è±¡çš„ message ã€‚ä¸è¿‡ï¼Œç”±äº main æ¨¡å—ä¸­è¿˜æ²¡è¿è¡Œåˆ° message å¤„ï¼Œæ‰€ä»¥æ­¤æ—¶å¾—åˆ°çš„ message ä¸º undefinedã€‚JS å¼•æ“ä¼šä¸ºæœ¬åœ°å˜é‡åˆ†é…ç©ºé—´å¹¶æŠŠå€¼è®¾ä¸º undefined ã€‚ è¿è¡Œé˜¶æ®µç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œç›´åˆ° counter æ¨¡å—é¡¶å±‚ä»£ç çš„æœ«å°¾å¤„ã€‚æˆ‘ä»¬æƒ³çŸ¥é“ï¼Œå½“ counter æ¨¡å—è¿è¡Œç»“æŸåï¼Œmessage æ˜¯å¦ä¼šå¾—åˆ°çœŸå®å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¾ç½®äº†ä¸€ä¸ªè¶…æ—¶å®šæ—¶å™¨ã€‚ä¹‹åè¿è¡Œé˜¶æ®µä¾¿è¿”å›åˆ° main.js ä¸­ã€‚ è¿™æ—¶ï¼Œmessage å°†ä¼šè¢«åˆå§‹åŒ–å¹¶æ·»åŠ åˆ°å†…å­˜ä¸­ã€‚ä½†æ˜¯è¿™ä¸ª message ä¸ counter æ¨¡å—ä¸­çš„ message ä¹‹é—´å¹¶æ²¡æœ‰ä»»ä½•å…³è”å…³ç³»ï¼Œæ‰€ä»¥ counter æ¨¡å—ä¸­çš„ message ä»ç„¶ä¸º undefinedã€‚ å¦‚æœå¯¼å‡ºå€¼é‡‡ç”¨çš„æ˜¯å®æ—¶ç»‘å®šæ–¹å¼ï¼Œé‚£ä¹ˆ counter æ¨¡å—æœ€ç»ˆä¼šå¾—åˆ°çœŸå®çš„ message å€¼ã€‚å½“è¶…æ—¶å®šæ—¶å™¨å¼€å§‹è®¡æ—¶æ—¶ï¼Œmain.js çš„è¿è¡Œå°±å·²ç»å®Œæˆå¹¶è®¾ç½®äº† message å€¼ã€‚ æ”¯æŒå¾ªç¯ä¾èµ–æ˜¯ ESM è®¾è®¡ä¹‹åˆå°±è€ƒè™‘åˆ°çš„ä¸€å¤§åŸå› ã€‚ä¹Ÿæ­£æ˜¯è¿™ç§åˆ†æ®µè®¾è®¡ä½¿å…¶æˆä¸ºå¯èƒ½ã€‚ ESM çš„å½“å‰çŠ¶æ€ç­‰åˆ° 2018 å¹´ 5 æœˆ Firefox 60 å‘å¸ƒåï¼Œæ‰€æœ‰çš„ä¸»æµæµè§ˆå™¨å°±éƒ½é»˜è®¤æ”¯æŒ ESM äº†ã€‚Node ä¹Ÿæ­£åœ¨æ·»åŠ  ESM æ”¯æŒï¼Œä¸ºæ­¤è¿˜æˆç«‹äº†å·¥ä½œå°ç»„æ¥ä¸“é—¨ç ”ç©¶ CJS å’Œ ESM ä¹‹é—´çš„å…¼å®¹æ€§é—®é¢˜ã€‚ æ‰€ä»¥ï¼Œåœ¨æœªæ¥ä½ å¯ä»¥ç›´æ¥åœ¨ &lt;script&gt; æ ‡ç­¾ä¸­ä½¿ç”¨ type=&quot;module&quot;ï¼Œå¹¶ä¸”åœ¨ä»£ç ä¸­ä½¿ç”¨ import å’Œ export ã€‚åŒæ—¶ï¼Œæ›´å¤šçš„æ¨¡å—åŠŸèƒ½ä¹Ÿæ­£åœ¨ç ”ç©¶ä¸­ã€‚æ¯”å¦‚åŠ¨æ€å¯¼å…¥ææ¡ˆå·²ç»å¤„äº Stage 3 çŠ¶æ€ï¼›import.metaä¹Ÿè¢«æå‡ºä»¥ä¾¿ Node.js å¯¹ ESM çš„æ”¯æŒï¼›æ¨¡å—å®šä½ææ¡ˆ ä¹Ÿè‡´åŠ›äºè§£å†³æµè§ˆå™¨å’Œ Node.js ä¹‹é—´çš„å·®å¼‚ã€‚ ç›¸ä¿¡åœ¨ä¸ä¹…çš„æœªæ¥ï¼Œè·Ÿæ¨¡å—ä¸€èµ·ç©è€å°†ä¼šå˜æˆä¸€ä»¶æ›´åŠ æ„‰å¿«çš„äº‹ï¼","categories":[],"tags":[{"name":"ESmodule","slug":"ESmodule","permalink":"https://tsunamigg.github.io/tags/ESmodule/"}]},{"title":"Event loop","slug":"Event loop","date":"2019-05-19T11:25:19.000Z","updated":"2020-05-23T14:52:52.835Z","comments":true,"path":"2019/05/19/Event loop/","link":"","permalink":"https://tsunamigg.github.io/2019/05/19/Event%20loop/","excerpt":"Event loopçš„ç²—æµ…è®¤è¯†","text":"Event loopçš„ç²—æµ…è®¤è¯† äº‹ä»¶è½®è¯¢jsæ˜¯å•çº¿ç¨‹çš„ã€‚å…¶äº‹ä»¶è½®è¯¢ç”±ï¼šåŒæ­¥ä»»åŠ¡ï¼Œå¼‚æ­¥ä»»åŠ¡ï¼Œmacrotaskï¼ˆå®ä»»åŠ¡ï¼‰ï¼Œmicrotask ï¼ˆå¾®ä»»åŠ¡ï¼‰ç»„æˆã€‚å…¶æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š åŒæ­¥ä»»åŠ¡ï¼š ä¸»çº¿ç¨‹ä¸Šçš„ä»»åŠ¡ï¼Œå‰ä¸€ä¸ªå®Œæˆååä¸€ä¸ªæ‰§è¡Œã€‚ å¼‚æ­¥ä»»åŠ¡ï¼šä¸è¿›å…¥ä¸»çº¿ç¨‹ï¼Œè¿›å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼ˆtask queue)ä¸­æ‰§è¡Œï¼Œç­‰äºmacrotaskã€‚ macrotaskï¼šä»»åŠ¡é˜Ÿåˆ—çš„ä¸»ä½“ï¼ŒåŒä¸€ä¸ªé˜Ÿåˆ—å†…çš„â€œå…ˆè¿›å…ˆå‡ºâ€æ‰§è¡Œã€‚ä¸åŒçš„é˜Ÿåˆ—ä¹‹é—´â€œå…ˆè¿›åå‡ºâ€æ‰§è¡Œã€‚ microtask ï¼šæ€»åœ¨ä»»åŠ¡é˜Ÿåˆ—æœ«å°¾æ‰§è¡Œï¼Œæœ‰æ–°çš„microtask ç»§ç»­åŠ åœ¨æœ«å°¾æ‰§è¡Œã€‚ æ‰§è¡Œè¿‡ç¨‹ï¼š1.åŒæ­¥ä»»åŠ¡æ‰§è¡Œ 2. ä»»åŠ¡æŒ‰é˜Ÿåˆ—ä¾æ¬¡æ‰§è¡Œ 3.å¾®ä»»åŠ¡æŒ‰é˜Ÿåˆ—ä¾æ¬¡æ‰§è¡Œ 4.é‡å¤1-3 å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡å¯¹äºå®ä»»åŠ¡å’Œå¾®ä»»åŠ¡çš„æ¦‚å¿µçš„ç†è§£ï¼Œä¸€å¼€å§‹ç¡®å®æ˜¯ä¸å¤ªæ¸…æ¥šçš„ã€‚ å…ˆæ¥è¯´è¯´å®ä»»åŠ¡ï¼Œæˆ‘ä»¬ä¸å¦¨è¿™æ ·æ¥çœ‹ï¼Œæ—¢ç„¶å®ƒæ˜¯ä»»åŠ¡é˜Ÿåˆ—çš„ä¸»ä½“ï¼Œé‚£ä¹ˆå®ƒä¸€å®šç”±ä¸€ä¸ªæˆ–è€…å¤šä¸ªä»»åŠ¡æ„æˆã€‚æŠ›å¼€JS,[å®]è¿™ä¸ªå­—æœ¬èº«å°±ä¸æ˜¯å•ä¸€çš„ï¼Œåœ¨CSä¸­çš„[å®]å°±æ˜¯æ‰¹é‡å¤„ç†çš„æ„æ€ã€‚ å¯¹äºç¨å¾®äº†è§£è¿‡ä¸€ç‚¹ç‚¹cçš„äººæ¥è¯´ï¼Œåº”è¯¥éƒ½ä¸é™Œç”Ÿï¼Œè¾Ÿå¦‚ï¼šç¼–è¯‘é¢„å¤„ç†å‘½ä»¤ï¼Œå®å®šä¹‰ç­‰ç­‰ã€‚ 1234// ç¼–è¯‘é¢„å¤„ç†å‘½ä»¤#include&lt;stdio.h&gt;// å®å®šä¹‰#define PI 3.14 æˆ‘å°†[ç¼–è¯‘é¢„å¤„ç†å‘½ä»¤]ï¼ˆåœ¨ç¼–è¯‘ä¹‹å‰è¿›è¡Œçš„å¤„ç†ï¼‰å°±çœ‹åšæ˜¯[å®ä»»åŠ¡]ï¼Œå°±æ˜¯ä½ å†™äº†ä¸€ç³»åˆ—çš„å‰ç½®æ“ä½œï¼Œåœ¨åé¢çš„ä»£ç æ‰§è¡Œä¹‹å‰ï¼Œè¿™äº›å®ä»»åŠ¡å…¨éƒ¨éœ€è¦æ‰§è¡Œå®Œæ¯•~ ç¨å¾®ç”Ÿæ´»åŒ–ä¸€ç‚¹ç‚¹ï¼Œæ¯”å¦‚é‚£ä¸ªä¸­å›½äº’è”ç½‘èµ·æ­¥çš„æ—¶å€™ï¼Œæˆ‘çš„åŒå­¦ä¹‹é—´ï¼Œå–œæ¬¢ç”¨QQç­‰çº§ä½œä¸ºè°ˆèµ„ã€‚æ‰€ä»¥æˆ‘è®©æˆ‘çš„ç”µè„‘å¼€æœºåè‡ªåŠ¨ç™»å½•QQï¼›æˆ–è€…ç°ä»Š5Gæ¥ä¸´ä¹‹å‰ï¼Œç”·ç”Ÿå¤šåŠç©è¿‡çš„MOBAç±»æ¸¸æˆï¼Œå°±æ‹¿LOLä¸­çš„çå­æ‘¸çœ¼Ré—ªè¿™ç§æ“ä½œï¼Œä½ å®Œå…¨å¯ä»¥é€‰ä¸€ä¸ªæ‹¥æœ‰å®å‘½ä»¤çš„é¼ æ ‡ï¼Œè®¾ç½®æµ‹è¯•åä¸€é”®å®Œæˆè¿™ç§â€œç”¨åŒæ‰‹æˆå°±ä½ çš„æ¢¦æƒ³â€ç­‰ç§€çš„é£èµ·çš„æ“ä½œï¼›è¿˜æœ‰è¯¸å¦‚ä¹”ç¢§èä¹‹ç±»çš„äººå£«ï¼Œå¼€å¯ç›´æ’­æ¨æµä¹‹å‰ï¼Œå¯¹è‡ªå·±ç›´æ’­æ•ˆæœçš„ä¼˜åŒ–ã€‚è¿™äº›éƒ½æ˜¯æ‰€è°“å®ä»»åŠ¡ã€‚ è‡³äºå¾®ä»»åŠ¡ï¼Œç›¸ä¿¡èªæ˜å¯çˆ±çš„ä½ ä¸€å®šèƒ½å¤Ÿä¸¾ä¸€åä¸€ï¼Œæ‰¾åˆ°è‡ªå·±å¯¹å…¶å……åˆ†çš„ç†è§£~:smile: å¸¸è§çš„å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ï¼š å®ä»»åŠ¡ï¼š setTimeout setInterval setImmediate requestAnimationFrame I/O UI rendering å¾®ä»»åŠ¡ï¼š process.nextTick Promises Object.observe MutationObserver æ‰§è¡Œå›¾ä¾‹ å¸Œæœ›æ‰§è¡Œå¸§åŠ¨ç”»èƒ½è®©ä½ å¯¹æ•´ä¸ªè¿‡ç¨‹çš„ç†è§£æ¸…æ™°è®¸å¤š å°ç»ƒä¹ 11234567891011121314151617181920console.log('script start');setTimeout(function() &#123; console.log('setTimeout');&#125;, 0);Promise.resolve().then(function() &#123; console.log('promise1');&#125;).then(function() &#123; console.log('promise2');&#125;);console.log('script end');// æµè§ˆå™¨è¾“å‡ºé¡ºåºï¼š//script start//script end//promise1//promise2//setTimeout å°ç»ƒä¹ 21234567891011121314151617181920212223242526272829async function async1()&#123; console.log('async1 start') await async2() console.log('async1 end')&#125;async function async2()&#123; console.log('async2')&#125;console.log('script start')setTimeout(function()&#123; console.log('setTimeout') &#125;,0) async1();new Promise(function(resolve)&#123; console.log('promise1') resolve();&#125;).then(function()&#123; console.log('promise2')&#125;)console.log('script end')// æµè§ˆå™¨è¾“å‡ºé¡ºåºï¼š// script start//async1 start//async2//promise1//script end//async1 end//promise2//setTimeout awaitä¼šå°†ä¹‹åçš„ä»£ç æŠ›å…¥ä¸‹ä¸€ä¸ªæ‰§è¡Œé˜Ÿåˆ—ï¼Œä»£ç ä¸Šçš„è¡¨ç°å°±æ˜¯æ‰§è¡Œå®Œawaitçš„ä¼šè·³å‡ºå‡½æ•°ä½“æ‰§è¡Œå…¶ä»–çš„åŒæ­¥ä»»åŠ¡ã€‚ setTimeoutçš„å›è°ƒå‡½æ•°ä¼šè¿›å…¥ä¸‹ä¸€ä¸ªåŒæ­¥ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚ å¦‚æœè¾“å‡ºé¡ºåºä¸ä¸€è‡´ï¼Œæ˜¯å› ä¸ºå„å¤§æµè§ˆå™¨å¯¹å¼‚æ­¥çš„å¤„ç†æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ²¡ä»€ä¹ˆå¥‡æ€ªçš„ã€‚ å¦å¤–ï¼Œnodeç¯å¢ƒè¾“å‡ºé¡ºåºä¹Ÿæœ‰å¾ˆå¤§å·®å¼‚ã€‚","categories":[],"tags":[{"name":"javascript event loop","slug":"javascript-event-loop","permalink":"https://tsunamigg.github.io/tags/javascript-event-loop/"}]},{"title":"css tips","slug":"CSS-tips","date":"2019-04-11T05:14:16.000Z","updated":"2020-05-28T14:21:55.087Z","comments":true,"path":"2019/04/11/CSS-tips/","link":"","permalink":"https://tsunamigg.github.io/2019/04/11/CSS-tips/","excerpt":"å¦‚ä½•è¿›è¡Œå‘½åæ˜¯ä¸€ä»¶çœ‹ä¸Šå»å¾®ä¸è¶³é“ä½†å…¶å®å¯¹ä»£ç æ•´æ´åº¦ç ´åå¾ˆå¤§çš„äº‹æƒ…ï¼Œã€Šä»£ç æ•´æ´ä¹‹é“ã€‹å»ºè®®çš„ç¬¬ä¸€ç¯‡å°±æ˜¯å¦‚ä½•è¿›è¡Œå¥½çš„å‘½å","text":"å¦‚ä½•è¿›è¡Œå‘½åæ˜¯ä¸€ä»¶çœ‹ä¸Šå»å¾®ä¸è¶³é“ä½†å…¶å®å¯¹ä»£ç æ•´æ´åº¦ç ´åå¾ˆå¤§çš„äº‹æƒ…ï¼Œã€Šä»£ç æ•´æ´ä¹‹é“ã€‹å»ºè®®çš„ç¬¬ä¸€ç¯‡å°±æ˜¯å¦‚ä½•è¿›è¡Œå¥½çš„å‘½å cssæ‚é¡¹(å‘½åï¼Œä¹¦å†™é¡ºåºï¼Œè°ƒè¯•) BEMBEMæ˜¯æ¨¡å—ï¼ˆBlockï¼‰ã€å…ƒç´ ï¼ˆElementï¼‰ã€ä¿®é¥°ç¬¦ï¼ˆModifierï¼‰çš„ç®€å†™ã€‚ BEM æ˜¯ä¸€ç§ç»„ä»¶æ¶æ„çš„å‘½åæ–¹æ³•ï¼Œå®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯å°†Htmlå…ƒç´ åˆ’åˆ†æˆç‹¬ç«‹çš„ç»„ä»¶ï¼Œç„¶åç”¨ç®€å•çš„è§„åˆ™é“¾æ¥èµ·æ¥ï¼Œå¼€å‘æ—¶ä¸ç”¨æ‹…å¿ƒä¸ä¼šå–åå­—äº†ï¼ŒåŒæ—¶åæœŸç»´æŠ¤å’Œå¤šäººåä½œä¸Šå¥½å¤„å¤§å¤§çš„ã€‚ å…¶å‘½åè§„åˆ™å¦‚ä¸‹ï¼š 123Block - æ¨¡å—ï¼Œåå­—çš„å•è¯ä¹‹é—´ç”¨ &#96;-&#96; ç¬¦å·è¿æ¥Element - å…ƒç´ ï¼Œæ¨¡å—ä¸­çš„å­å…ƒç´ ï¼Œç”¨ &#96;__&#96; ç¬¦å·è¿æ¥Modifier - ä¿®é¥°ç¬¦ï¼Œè¡¨ç¤ºçˆ¶å…ƒç´ æˆ–å­å…ƒç´ çš„å…¶ä»–å½¢æ€ï¼Œç”¨ &#96;--&#96; ç¬¦å·è¿æ¥ ä¼˜åŠ¿ åœ¨æ²¡ç”¨ BEM ä¹‹å‰ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè¿™æ ·ç»„ç»‡ CSS ç±»åï¼š 12345678&lt;!-- Commonå‘½åçš„ Search Bar æ¨¡å— --&gt; &lt;div class=\"search-bar\"&gt; &lt;input class=\"input\"&gt; &lt;!-- / input è¾“å…¥æ¡† --&gt; &lt;button class=\"btn\"&gt; &lt;!-- / button æœç´¢æŒ‰é’® --&gt; &lt;/div&gt; &lt;!-- E Search Bar æ¨¡å— --&gt; ç”¨ BEM å‘½åé‡å†™ä¹‹åï¼š 12345678&lt;!-- BEMå‘½åçš„ Search Bar æ¨¡å— --&gt; &lt;div class=\"search-bar\"&gt; &lt;input class=\"search-form__input\"/&gt; &lt;!-- / input è¾“å…¥æ¡†å­å…ƒç´  --&gt; &lt;button class=\"search-form__button\"&gt;&lt;/button&gt; &lt;!-- / button æœç´¢æŒ‰é’®å­å…ƒç´  --&gt; &lt;/div&gt; &lt;!-- E Search Bar æ¨¡å— --&gt; æœ‰å¯¹æ¯”é«˜ä¸‹ç«‹åˆ¤~ é€šå¸¸é¢è¯•é—®çš„è¯­ä¹‰åŒ–(ä½œç”¨ä¸å®è·µ)ï¼Œè¿™æ ·å°±è¾¾åˆ°äº†ï¼Œæœ€ç»ˆç›®çš„æ˜¯å‡å°‘ä»£ç é˜…è¯»æˆæœ¬ã€‚ ç¼ºé™· ä¼˜ç‚¹ä¹Ÿæ˜¯ç¼ºç‚¹ï¼Œå½“HTMLå…ƒç´ å±‚çº§ç¹å¤šæ—¶ï¼Œä¼šä½¿å¾—å‘½åè¶Šæ¥è¶Šé•¿ï¼Œé‚£æ ·çš„è¯ï¼Œæ–‡ä»¶ä¼šå˜å¾—è‡ƒè‚¿ä¸å ªï¼Œåè€Œè¿èƒŒäº†æˆ‘ä»¬çš„åˆå¿ƒã€‚ä¹±ä¸ƒå…«ç³Ÿçš„HTMLè°ä¼šæ„¿æ„çœ‹ï¼Ÿ å§“æ°å‘½åæ³•ä¸ºäº†è¿›ä¸€æ­¥ç®€åŒ– CSS çš„å‘½åï¼Œé‡‡ç”¨å‡¹å‡¸å®éªŒå®¤å›¢é˜Ÿæ¨å¹¿çš„å§“æ°å‘½åæ³•ã€‚ æ„Ÿè°¢å‡¹å‡¸å¤§å¤§ä»¬~ æˆ‘ä»¬å¹¶ä¸éœ€è¦æŠŠæ¯ä¸ªå…ƒç´ çš„å…¨éƒ¨åç§°å¸¦ä¸Šæ¥è¡¨æ˜ä¸»æ¬¡å…³ç³»ã€‚å°±åƒè¿™ä»½æ—è°±ä¸€æ ·ï¼Œä»–çš„å­©å­åªéœ€è¦ä¿ç•™ã€Œè´¾ã€å§“å°±å¯ä»¥äº†ï¼Œåå­—æ˜¯å¯ä»¥éšä¾¿å–çš„ã€‚ å…³è”ä¸Š BEM å‘½åæ–¹æ³•ï¼Œå§“æ°å‘½åæ³•ä¸­çš„ Block å°±æ˜¯ã€Œå§“ã€ï¼ŒElement å°±æ˜¯ã€Œåå­—ã€ï¼Œè€Œ Modifier å°±è¡¨ç¤ºè¿™ä¸ªäººçš„æŸç§çŠ¶æ€ï¼Œä¾‹å¦‚ï¼šã€ŒèŒƒ - - å†°å†° - - å¾ˆç¾ã€ã€‚è¿™æ ·å°±è¾¾åˆ°äº†å–å…¶ç²¾åï¼Œå»å…¶ç³Ÿç²•çš„ä½œç”¨ã€‚ 1234567891011&lt;!-- am = app_market --&gt; &lt;div class=\"am_answer\"&gt; &lt;div class=\"am_secheader\"&gt;&lt;/div&gt; &lt;div class=\"am_answer_list\"&gt; &lt;div class=\"am_answer_item\"&gt; &lt;div class=\"am_answer_itop\"&gt;&lt;/div&gt; &lt;div class=\"am_answer_imid\"&gt;&lt;/div&gt; &lt;a href=\"javascript:;\" class=\"am_answer_ibtn\"&gt;å»å›´è§‚&lt;/a&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; å°† app_market å¯ä»¥çœ‹æˆæ˜¯ã€Œå¤å§“ã€ï¼Œå°†ä¸¤ä¸ªå•è¯çš„é¦–å­—æ¯ç»“åˆåœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ–°çš„ã€Œå•å§“ã€ï¼Œå¦‚ am ï¼›å°†itemä¸­çš„å­é¡¹ç±»åç›´æ¥ç®€å†™ä¸ºã€Œixxã€ï¼Œå¦‚ï¼šitopã€‚è¿½æ±‚ä¾¿åˆ©çš„å‰¯ä½œç”¨ä¹‹ä¸€æ˜¯ç‰ºç‰²äº†ä¸€ç‚¹ä»£ç çš„å¯è¯»æ€§ã€‚ä½†å¤šåŠé¡¹ç›®ä¸Šçš„æ–‡æ¡£å¯ä»¥æ³¨æ˜å‘½åæ–¹æ³•å’Œå…¶ä»–ä¹¦å†™è§„èŒƒï¼Œå¦‚æœå›¢é˜Ÿæœ‰çº¦æŸï¼Œé‚£ä¸€å®šæ˜¯æä½³çš„å®è·µã€‚ å°ç»“ ClassName çš„å‘½ååº”è¯¥å°½é‡ç²¾çŸ­ã€æ˜ç¡®ï¼Œä»¥è‹±æ–‡å•è¯å‘½åï¼Œä¸”å…¨éƒ¨å­—æ¯ä¸ºå°å†™ï¼Œé¿å…æ„ä¹‰ä¸æ˜çš„ç¼©å†™ å•è¯ä¹‹é—´ç»Ÿä¸€ä½¿ç”¨ä¸‹åˆ’çº¿ _ æˆ– - è¿æ¥ å®šä¹‰æ ·å¼æ¨¡å—ï¼Œæé«˜ä»£ç çš„å¯å¤ç”¨æ€§ CSSæ¨èä¹¦å†™ æ¨èä¹¦å†™é¡ºåº ä½ç½®å±æ€§(position, top, right, z-index, display, floatç­‰) å¤§å°(width, height, padding, margin) æ–‡å­—ç³»åˆ—(font, line-height, letter-spacing, color- text-alignç­‰) èƒŒæ™¯(background, borderç­‰) å…¶ä»–(animation, transitionç­‰) why this ? ä¸»è¦ä»æµè§ˆå™¨çš„æ¸²æŸ“æœºåˆ¶æ–¹é¢æ¥è€ƒè™‘ï¼Œå‡å°‘é‡ç»˜ä¸é‡æ’,æé«˜æ€§èƒ½ã€‚ è‰¯å¥½çš„ä¹ æƒ¯ä¼šä½¿å¾—ä½ ç¼–å†™cssä»£ç æ—¶ä¹Ÿæ›´åŠ æ¸…æ™° æ‹¿åˆ°æ–‡ä»¶åæµè§ˆå™¨çš„æ¸²æŸ“æµç¨‹ä¸ºï¼š ï¼ˆ1ï¼‰æµè§ˆå™¨è§£æhtmlæ„å»ºdomæ ‘ï¼Œè§£æcssæ„å»ºcssomæ ‘å³css rule treeï¼šå°†htmlå’Œcsséƒ½è§£ææˆæ ‘å½¢çš„æ•°æ®ç»“æ„ï¼› domæ ‘çš„æ„å»ºè¿‡ç¨‹æ˜¯ä¸€ä¸ªæ·±åº¦éå†è¿‡ç¨‹ï¼šå½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹éƒ½æ„å»ºå¥½åæ‰ä¼šå»æ„å»ºå½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ã€‚ ï¼ˆ2ï¼‰æ„å»ºrenderæ ‘ï¼šDOMæ ‘å’Œcssomæ ‘åˆå¹¶ä¹‹åå½¢æˆrenderæ ‘ã€‚ä¸ºäº†æ„å»ºæ¸²æŸ“æ ‘ï¼Œæµè§ˆå™¨å¤§ä½“å®Œæˆäº†ä¸‹åˆ—å·¥ä½œï¼šä»DOMæ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹éå†æ¯ä¸ªå¯è§èŠ‚ç‚¹ã€‚å¯¹äºæ¯ä¸ªå¯è§èŠ‚ç‚¹ï¼Œä¸ºå…¶æ‰¾åˆ°é€‚é…çš„CSSOMè§„åˆ™å¹¶åº”ç”¨å®ƒä»¬ã€‚å‘å°„å¯è§èŠ‚ç‚¹ï¼Œè¿åŒå…¶å†…å®¹å’Œè®¡ç®—çš„æ ·å¼ã€‚æ¸²æŸ“æ ‘ä¸­åŒ…å«äº†å±å¹•ä¸Šæ‰€æœ‰å¯è§å†…å®¹åŠå…¶æ ·å¼ä¿¡æ¯ã€‚ ï¼ˆ3ï¼‰å¸ƒå±€renderæ ‘ï¼šæœ‰äº†renderæ ‘ï¼Œæµè§ˆå™¨å·²ç»çŸ¥é“ç½‘é¡µä¸­æœ‰å“ªäº›èŠ‚ç‚¹ï¼Œå„ä¸ªèŠ‚ç‚¹çš„csså®šä¹‰ä»¥åŠå®ƒä»¬çš„ä»å±å…³ç³»ï¼Œæ¥ç€å°±å¼€å§‹å¸ƒå±€ï¼Œè®¡ç®—å‡ºæ¯ä¸ªèŠ‚ç‚¹åœ¨å±å¹•ä¸­çš„ä½ç½®å’Œå¤§å°ã€‚(htmlé‡‡ç”¨äº†ä¸€ç§æµå¼å¸ƒå±€çš„å¸ƒå±€æ¨¡å‹ï¼Œä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³é¡ºåºå¸ƒå±€ï¼Œå¸ƒå±€çš„èµ·ç‚¹æ˜¯ä»renderæ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹çš„ï¼Œå¯¹åº”domæ ‘çš„documentèŠ‚ç‚¹ï¼Œå…¶åˆå§‹ä½ç½®ä¸º(0,0)ï¼Œè¯¦ç»†çš„å¸ƒå±€è¿‡ç¨‹ä¸ºï¼šæ¯ä¸ªrendererçš„å®½åº¦ç”±çˆ¶èŠ‚ç‚¹çš„rendererç¡®å®šã€‚çˆ¶èŠ‚ç‚¹éå†å­èŠ‚ç‚¹ï¼Œç¡®å®šå­èŠ‚ç‚¹çš„ä½ç½®(x,y)ï¼Œè°ƒç”¨å­èŠ‚ç‚¹çš„layoutæ–¹æ³•ç¡®å®šå…¶é«˜åº¦ï¼Œçˆ¶èŠ‚ç‚¹æ ¹æ®å­èŠ‚ç‚¹çš„height, margin, paddingç¡®å®šè‡ªèº«çš„é«˜åº¦)ã€‚ ï¼ˆ4ï¼‰æ¸²æŸ“renderæ ‘ï¼šæµè§ˆå™¨å·²ç»çŸ¥é“å•¦å“ªäº›èŠ‚ç‚¹è¦æ˜¾ç¤ºï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„csså±æ€§æ˜¯ä»€ä¹ˆï¼Œæ¯ä¸ªèŠ‚ç‚¹åœ¨å±å¹•ä¸­çš„ä½ç½®æ˜¯å“ªé‡Œã€‚å°±è¿›å…¥å•¦æœ€åä¸€æ­¥ï¼ŒæŒ‰ç…§è®¡ç®—å‡ºæ¥çš„è§„åˆ™ï¼Œé€šè¿‡æ˜¾å¡æŠŠå†…å®¹ç”»åœ¨å±å¹•ä¸Šã€‚ DOM çš„å˜åŒ–å½±å“äº†å…ƒç´ çš„å‡ ä½•å±æ€§ï¼ˆå®½å’Œé«˜ï¼‰- æ¯”å¦‚æ”¹å˜è¾¹æ¡†å®½åº¦æˆ–ç»™æ®µè½å¢åŠ æ–‡å­—ï¼Œå¯¼è‡´è¡Œæ•°å¢åŠ  â€“ æµè§ˆå™¨éœ€è¦é‡æ–°è®¡ç®—å…ƒç´ çš„å‡ ä½•å±æ€§ï¼ŒåŒæ ·å…¶ä»–å…ƒç´ çš„å‡ ä½•å±æ€§å’Œä½ç½®ä¹Ÿä¼šå› æ­¤å—åˆ°å½±å“ã€‚æµè§ˆå™¨ä¼šä½¿æ¸²æŸ“æ ‘ä¸­å—åˆ°å½±å“çš„éƒ¨åˆ†å¤±æ•ˆï¼Œå¹¶é‡æ–°æ„å»ºæ¸²æŸ“æ ‘ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸º â€œé‡æ’ï¼ˆreflowï¼‰â€ã€‚å®Œæˆé‡æ’åï¼Œæµè§ˆå™¨ä¼šé‡æ–°ç»˜åˆ¶å—å½±å“çš„éƒ¨åˆ†åˆ°å±å¹•ä¸­ï¼Œè¯¥è¿‡ç¨‹ç§°ä¸º â€œé‡ç»˜ï¼ˆrepaintï¼‰â€ å¥½äº†å¥½äº†ï¼Œç…§æœ¬å®£ç§‘çš„ä¸œè¥¿ç»ˆäºæ²¡äº†ï¼Œå½“ç„¶æ¸²æŸ“è¿‡ç¨‹æ²¡è¿™ä¹ˆç®€å•ï¼Œè¿™é‡Œä¹Ÿæ˜¯å€Ÿé‰´ä¸€ä¸‹å•¦ã€‚ 1234width: 100px; height: 100px; background-color: red; position: absolute; å½“æµè§ˆå™¨è§£æåˆ°positionçš„æ—¶å€™çªç„¶å‘ç°è¯¥å…ƒç´ æ˜¯ç»å¯¹å®šä½å…ƒç´ éœ€è¦è„±ç¦»æ–‡æ¡£æµï¼Œè€Œä¹‹å‰å´æ˜¯æŒ‰ç…§æ™®é€šå…ƒç´ è¿›è¡Œè§£æçš„ï¼Œæ‰€ä»¥ä¸å¾—ä¸é‡æ–°æ¸²æŸ“ï¼Œè§£é™¤è¯¥å…ƒç´ åœ¨æ–‡æ¡£ä¸­æ‰€å ä½ç½®ï¼Œç„¶è€Œç”±äºè¯¥å…ƒç´ çš„å ä½å‘ç”Ÿå˜åŒ–ï¼Œå…¶ä»–å…ƒç´ ä¹Ÿå¯èƒ½ä¼šå—åˆ°å›æµçš„å½±å“è€Œé‡æ–°æ’ä½ï¼Œæœ€ç»ˆå¯¼è‡´ï¼ˆ3ï¼‰æ­¥éª¤èŠ±è´¹æ—¶é—´å¤ªä¹…è€Œå½±å“ ã€‚ CSSä¾¿æ·è°ƒè¯•æ³• æ§åˆ¶å°è¾“å…¥ç¥ç§˜ä»£ç  12345678// 1javascript: var _q = !_q;document.querySelectorAll('*').forEach(q =&gt; q.style.outline = _q ? '1px solid red' : '')// 2$$('*').forEach(a=&gt;&#123;a.style.outline='1px solid red'&#125;)// 3xxxxxxxxx æ’ä»¶ï¼š Keylines ( ä¸€é”®+å½©è‰²çº¿æ¡ ) ä¼˜é›…çš„xss æ‰“å¼€ä¹¦ç­¾ç®¡ç†é¡µ å³ä¸Šè§’ä¸‰ä¸ªç‚¹ã€Œæ·»åŠ æ–°ä¹¦ç­¾ã€ åç§°éšæ„ï¼Œç²˜è´´ä»¥ä¸‹ä»£ç åˆ°ç½‘å€ä¸­ 1234567891011121314151617javascript: (function() &#123; var elements = document.body.getElementsByTagName('*'); var items = []; for (var i = 0; i &lt; elements.length; i++) &#123; if (elements[i].innerHTML.indexOf('html * &#123; outline: 1px solid red &#125;') != -1) &#123; items.push(elements[i]); &#125; &#125; if (items.length &gt; 0) &#123; for (var i = 0; i &lt; items.length; i++) &#123; items[i].innerHTML = ''; &#125; &#125; else &#123; document.body.innerHTML += '&lt;style&gt;html * &#123; outline: 1px solid red &#125;&lt;/style&gt;'; &#125;&#125;)(); ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨ä»»æ„ç½‘ç«™ä¸Šç‚¹å‡»åˆšæ‰åˆ›å»ºçš„ä¹¦ç­¾ï¼Œå†…éƒ¨ä¼šåˆ¤æ–­æ˜¯å¦å­˜åœ¨è°ƒè¯•çš„ styleã€‚å­˜åœ¨çš„è¯å°±åˆ é™¤ï¼Œä¸å­˜åœ¨çš„è¯å°±æ·»åŠ ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æˆ‘ä»¬å°±èƒ½å¾ˆæ–¹ä¾¿çš„é€šè¿‡è¿™ä¸ªæŠ€å·§æŸ¥çœ‹ä»»æ„ç½‘é¡µçš„å¸ƒå±€äº†ã€‚ æ•ˆæœå¦‚ä¸‹ï¼š referenceï¼š æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹ä¸æ€§èƒ½ä¼˜åŒ–ï¼š https://juejin.im/post/59d489156fb9a00a571d6509 ï¼Œ CSSä¹¦å†™é¡ºåº ï¼šhttps://www.cnblogs.com/xuepei/p/8961809.html ï¼Œ autoå®éªŒå®¤ https://aotu.io/","categories":[],"tags":[{"name":"css","slug":"css","permalink":"https://tsunamigg.github.io/tags/css/"}]},{"title":"é—­åŒ…è¯¦è§£","slug":"closure","date":"2019-02-12T02:10:01.000Z","updated":"2020-05-28T14:28:00.239Z","comments":true,"path":"2019/02/12/closure/","link":"","permalink":"https://tsunamigg.github.io/2019/02/12/closure/","excerpt":"ç»“åˆã€Šä½ ä¸çŸ¥é“çš„JavaScript(ä¸Š)ã€‹ä¸€ä¹¦ï¼Œè¯¦è§£é—­åŒ…ï¼Œç†æ¸…å…³äºé—­åŒ…çš„ä¸‰ä¸ªé—®é¢˜ï¼Œå½»åº•è®¤è¯†é—­åŒ…ã€‚","text":"ç»“åˆã€Šä½ ä¸çŸ¥é“çš„JavaScript(ä¸Š)ã€‹ä¸€ä¹¦ï¼Œè¯¦è§£é—­åŒ…ï¼Œç†æ¸…å…³äºé—­åŒ…çš„ä¸‰ä¸ªé—®é¢˜ï¼Œå½»åº•è®¤è¯†é—­åŒ…ã€‚ é—­åŒ…è¯¦è§£1. ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ é—­åŒ…çš„å®šä¹‰ï¼šå½“å‡½æ•°å¯ä»¥è®°ä½å¹¶è®¿é—®æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸæ—¶ï¼Œå°±äº§ç”Ÿäº†é—­åŒ…ï¼Œå³ä½¿å‡½æ•°æ˜¯åœ¨å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–æ‰§è¡Œã€‚ 12345678910function foo() &#123; var a = 3; function bar() &#123; console.log(a); &#125; return bar;&#125;var baz = foo();baz();-----&gt; '3' è¿™æ˜¯ä¸€æ®µéå¸¸ç»å…¸çš„é—­åŒ…ä»£ç ï¼Œæ ¹æ®ç½‘ä¸Šçš„è¯´æ³•ï¼Œé—­åŒ…çš„äº§ç”Ÿæœ‰ä¸‰ä¸ªæ¡ä»¶ï¼š1. Aå‡½æ•°å†…è¿”å›Bå‡½æ•°ã€‚2.Bå‡½æ•°è°ƒç”¨äº†Aå‡½æ•°çš„å˜é‡ã€‚3.B()ã€‚ å¾ˆç¥å¥‡æœ‰æ²¡æœ‰ï¼Ÿ æˆ‘ä»¬åœ¨å¤–éƒ¨ç¯å¢ƒè®¿é—®äº†å†…éƒ¨ç¯å¢ƒçš„å˜é‡ã€‚å¹¶ä¸”æ­£å¸¸æ‰§è¡Œäº†fooçš„ä½œç”¨åŸŸä¼šè¢«é”€æ¯æ‰ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶ä¹Ÿä¼šä½¿çš„é‡Šæ”¾æ‰å†…å­˜ç©ºé—´ã€‚æ˜¾ç„¶é—­åŒ…é˜»æ­¢äº†è¿™ä»¶äº‹æƒ…çš„å‘ç”Ÿã€‚ 2.é—­åŒ…äº§ç”Ÿçš„æ¡ä»¶ï¼Ÿç”±äºbarå£°æ˜çš„ä½ç½®ï¼Œä½¿å…¶æ‹¥æœ‰æ¶µç›–äº†fooçš„å†…éƒ¨ä½œç”¨åŸŸï¼Œå½“barè¢«è°ƒç”¨åï¼Œä¼šä¿æŒå¯¹fooä½œç”¨åŸŸçš„å¼•ç”¨ï¼Œè®¿é—®aå˜é‡ã€‚ä¿æŒå¯¹å¤–éƒ¨ä½œç”¨åŸŸçš„å¼•ç”¨ï¼Œå°±ä¼šäº§ç”Ÿé—­åŒ…ï¼Œè€Œä¸æ˜¯éè¦è¿”å›å‡½æ•°ã€‚ 123456function waiting(msg) &#123; setTimeout(function () &#123; console.log(msg) &#125;, 1000)&#125;waiting('js') æ— è®ºæ˜¯ä»€ä¹ˆå…¶ä»–çš„éªšæ“ä½œï¼Œåªè¦ä½ å°†å†…éƒ¨å‡½æ•°ä¼ é€’åˆ°æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸä¹‹å¤–ï¼Œä»–éƒ½ä¼šä¿æŒå¯¹å†…éƒ¨ä½œç”¨åŸŸçš„å¼•ç”¨ï¼Œæ— è®ºåœ¨å“ªé‡Œæ‰§è¡Œå†…éƒ¨å‡½æ•°ï¼Œéƒ½ä¼šåˆ›å»ºé—­åŒ…ã€‚è¿™ä¸ªä¾‹å­ä¸­setTimeoutä¿æŒå¯¹waitingçš„å¼•ç”¨ï¼Œåœ¨æ‰§è¡Œæ—¶ä¹Ÿä¼šåˆ›å»ºé—­åŒ…ã€‚ 3. é—­åŒ…çš„ç”¨é€”ï¼Ÿæœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿé‡ç”¨ä¸€ä¸ªå˜é‡ï¼Œå¹¶ä¸”å…¶è¢«ä¿æŠ¤èµ·æ¥ä¸è¢«æ±¡æŸ“ç¯¡æ”¹ï¼Œå°±å¯ä»¥ä½¿ç”¨é—­åŒ…ã€‚è¿™ç§å˜é‡ä¸€èˆ¬è¢«ç§°ä¸ºç§æœ‰å˜é‡æˆ–è€…å±€éƒ¨å˜é‡ã€‚ 123456//ä¸€ä¸ªå¾ˆç»å…¸çš„é¢˜for(var i = 1; i &lt;= 5; i++) &#123; setTimeout(function () &#123; console.log(i) &#125;, i* 1000)&#125; å—¯ï¼Œæˆ‘ç›¸ä¿¡å¤§å¤šæ•°æœé›†èµ„æ–™å­¦ä¹ çš„äººï¼Œéƒ½ä¼šæ¸…æ¥šç­”æ¡ˆã€‚ è‡³äºä¸ºä»€ä¹ˆï¼Œå€¼å¾—å†å¤ä¹ ä¸€ä¸‹ã€‚ æ¯æ¬¡å¾ªç¯ï¼Œæˆ‘ä»¬éƒ½ä¼šæŒ‘å‡ºä¸€ä»½iç”¨æ¥è¾“å‡ºï¼Œä½†å› ä¸ºsetTimeoutä¼šåœ¨å¾ªç¯å®Œæˆåæ‰§è¡Œï¼Œæ¯æ¬¡çš„iéƒ½åœ¨åŒä¸€å…¨å±€ä½œç”¨åŸŸä¸‹ï¼Œäºæ˜¯åæ¥å±…ä¸Šï¼Œè¦†ç›–äº†å‰é¢çš„iï¼Œå†ç”±setTimeoutæ‰§è¡Œæ—¶ï¼Œå°±å…¨æ˜¯6äº†ã€‚ æ€ä¹ˆä½¿å¾—æ¯æ¬¡å¾ªç¯è¾“å‡ºæ­£ç¡®å‘¢ï¼Ÿ æˆ‘ä»¬åªéœ€è¦å°†æ¯æ¬¡çš„iå˜æˆä¸€ä¸ªç§æœ‰å˜é‡ï¼Œæœ‰ç‹¬ç«‹çš„ä½œç”¨åŸŸï¼Œè®©å…¶ä¸åœ¨ç¯¡æ”¹å°±OKäº†ã€‚ ä½¿ç”¨IIFE è¿™é‡Œå¼•å…¥æ¥è‡ªMDNçš„é‡Šä¹‰ã€‚ IIFEï¼ˆ ç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼ï¼‰æ˜¯ä¸€ä¸ªåœ¨å®šä¹‰æ—¶å°±ä¼šç«‹å³æ‰§è¡Œçš„ JavaScript å‡½æ•°ã€‚ 123(function () &#123; statements&#125;)(); è¿™æ˜¯ä¸€ä¸ªè¢«ç§°ä¸º è‡ªæ‰§è¡ŒåŒ¿åå‡½æ•° çš„è®¾è®¡æ¨¡å¼ï¼Œä¸»è¦åŒ…å«ä¸¤éƒ¨åˆ†ã€‚ç¬¬ä¸€éƒ¨åˆ†æ˜¯åŒ…å›´åœ¨ åœ†æ‹¬å·è¿ç®—ç¬¦ () é‡Œçš„ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¿™ä¸ªåŒ¿åå‡½æ•°æ‹¥æœ‰ç‹¬ç«‹çš„è¯æ³•ä½œç”¨åŸŸã€‚è¿™ä¸ä»…é¿å…äº†å¤–ç•Œè®¿é—®æ­¤ IIFE ä¸­çš„å˜é‡ï¼Œè€Œä¸”åˆä¸ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸã€‚ ç¬¬äºŒéƒ¨åˆ†å†ä¸€æ¬¡ä½¿ç”¨ () åˆ›å»ºäº†ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼ŒJavaScript å¼•æ“åˆ°æ­¤å°†ç›´æ¥æ‰§è¡Œå‡½æ•°ã€‚ 12345678// IIFEæ–¹æ³•for(var i = 1; i &lt;= 5; i++) &#123; (function (j) &#123; setTimeout(function () &#123; console.log(j) &#125;, j* 1000) &#125;)(i);&#125; è¿™é‡Œåˆ©ç”¨IIFEæ‹¥æœ‰ç‹¬ç«‹çš„æ­¤æ³•ä½œç”¨åŸŸçš„ç‰¹æ€§ï¼Œå°†å˜é‡ç§æœ‰åŒ–ï¼Œè¿™æ ·åœ¨setTimeoutæ‰§è¡Œæ—¶å°±ä¼šå¾—åˆ°æ­£ç¡®è¾“å‡ºã€‚æ²¡é”™ï¼Œå¥½åƒå°±æ˜¯åˆ©ç”¨é—­åŒ…å°†æ¯æ¬¡çš„å˜é‡ç¼“å­˜èµ·æ¥ï¼Œæ”¾åœ¨ç‹¬ç«‹çš„å†…å­˜ä¸­ã€‚ ä½¿ç”¨ES6çš„let 123456// letæ–¹æ³•for(let i = 1; i &lt;= 5; i++) &#123; setTimeout(function () &#123; console.log(i) &#125;, i* 1000)&#125; letä¼šåŠ«æŒå—ä½œç”¨åŸŸï¼Œâ€œåŠ«æŒâ€å°±æ˜¯æŠŠå½“å‰å—ä½œç”¨åŸŸæŠ¢è¿‡æ¥å˜ä¸ºä¸€ä¸ªç‹¬ç«‹çš„ï¼Œå¦‚æœè¿˜ä¸æ˜ç™½ï¼Œè¯·çœ‹ä¸‹é¢ä»£ç ã€‚ 123456for(var i = 1; i &lt;= 5; i++) &#123; let j = i; setTimeout(function () &#123; console.log(j) &#125;, j* 1000)&#125; let é‡è§{}å‘ç”Ÿäº†å¥‡å¦™çš„é‚‚é€…ï¼Œäºæ˜¯ä»–ä»¬â€œç§å¥”â€äº†~ åœ¨æ¯æ¬¡å¾ªç¯ä¸­éƒ½è¢«å£°æ˜äº†ä¸€æ¬¡ï¼Œæ‰€ä»¥æ¯æ¬¡å¾ªç¯ä¸­çš„{}å†…çš„å˜é‡éƒ½ä¸å¹²æ‰°ã€‚setTimeoutå¾ˆé«˜å…´çš„æ‰§è¡Œäº†ã€‚ æ‘‡æ™ƒä¸€ä¸‹ä½ çš„å°è„‘ç“œï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬å°†è¿™äº›é€šè¿‡é—­åŒ…äº§ç”Ÿçš„ç§æœ‰å˜é‡èµ‹å€¼ç»™ä¸€ä¸ªå‡½æ•°ï¼Œä½ ä¼šè”æƒ³åˆ°ä»€ä¹ˆï¼Ÿ 1234567891011121314151617var foo = ï¼ˆfunction myModule() &#123; var myPublic = 'webå·¥ç¨‹å¸ˆçš„è‡ªæˆ‘ä¿®å…»'ï¼› var mywx = ['tangtang1996918']; function joinMyPublic() &#123; console.log('join webå·¥ç¨‹å¸ˆçš„è‡ªæˆ‘ä¿®å…»') &#125; function pushMywx() &#123; console.log(mywx.push('your')) &#125; return &#123; joinMyPublic: joinMyPublic, pushMywx: pushMywx &#125;&#125;ï¼‰ï¼ˆï¼‰ï¼›foo.joinMyPublic();foo.pushMywx(); æ˜¯ä¸æ˜¯åœ¨é¡¹ç›®ä¸­å¾ˆå¸¸è§ï¼Ÿ æˆ‘é ï¼Œè¿™å°±æ˜¯æ¨¡å—æœºåˆ¶å•Šï¼Œå…„å¼Ÿï¼ï¼ï¼æŠŠä¸€äº›ç»å¦™çš„æ–¹æ³•éƒ½åŠ«æŒè¿‡æ¥æ”¾åœ¨è‡ªå·±çš„å°ç©ºé—´é‡Œé¢ï¼Œæƒ³æ‹¿æ¥ç”¨å°±æ‹¿æ¥ç”¨ï¼Œå²‚ä¸ç¾å“‰ï¼Ÿï¼Ÿï¼Ÿå½“ç„¶ï¼Œç°ä»£çš„æ¨¡å—æœºåˆ¶è‚¯å®šæ²¡è¿™ä¹ˆç®€å•ï¼Œå˜»å˜»ã€‚ 4. å¼ºå¤§çš„é—­åŒ…è®¤è¯†äº†é—­åŒ…ï¼Œå¥½å¥½æƒ³æƒ³è¿‡å»ä¸€å¤©ä¸­ä½ æ‰€å†™çš„ä»£ç ï¼Œé‡Œé¢æœ‰é—­åŒ…å—ï¼Ÿè¿™æ˜¯ä¸€ç§æ—¥å¸¸ä¸”å¼ºå¤§çš„æ¨¡å¼ã€‚ åŒ…ç®¡ç†å™¨æˆ–è€…ç®¡ç†æ¨¡å—æœºåˆ¶éƒ½ä¼šå°†æ¨¡å—å®šä¹‰å’Œæ¨¡å—å¼•å…¥è¿›è¡Œå°è£…ã€‚å°è£…åˆ°ç°åœ¨ï¼Œå·²ç»å˜æˆäº†importå’Œexportæˆ–è€…å…¶ä»–çš„è¯­æ³•ç³–ã€‚","categories":[],"tags":[{"name":"javascript-native","slug":"javascript-native","permalink":"https://tsunamigg.github.io/tags/javascript-native/"}]}],"categories":[],"tags":[{"name":"browser","slug":"browser","permalink":"https://tsunamigg.github.io/tags/browser/"},{"name":"diary","slug":"diary","permalink":"https://tsunamigg.github.io/tags/diary/"},{"name":"Vue-2.6X-source-learn notes","slug":"Vue-2-6X-source-learn-notes","permalink":"https://tsunamigg.github.io/tags/Vue-2-6X-source-learn-notes/"},{"name":"fabric canvas notes","slug":"fabric-canvas-notes","permalink":"https://tsunamigg.github.io/tags/fabric-canvas-notes/"},{"name":"javascript-native","slug":"javascript-native","permalink":"https://tsunamigg.github.io/tags/javascript-native/"},{"name":"ESmodule","slug":"ESmodule","permalink":"https://tsunamigg.github.io/tags/ESmodule/"},{"name":"javascript event loop","slug":"javascript-event-loop","permalink":"https://tsunamigg.github.io/tags/javascript-event-loop/"},{"name":"css","slug":"css","permalink":"https://tsunamigg.github.io/tags/css/"}]}